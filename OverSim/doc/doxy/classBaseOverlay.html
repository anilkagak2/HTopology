<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: BaseOverlay Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OverSim
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classBaseOverlay.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">BaseOverlay Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="BaseOverlay" --><!-- doxytag: inherits="BaseRpc,BaseTcpSupport,TopologyVis" -->
<p>Base class for overlays.  
 <a href="classBaseOverlay.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BaseOverlay:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBaseOverlay.png" usemap="#BaseOverlay_map" alt=""/>
  <map id="BaseOverlay_map" name="BaseOverlay_map">
<area href="classBaseRpc.html" title="Base class for RPCs." alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classTopologyVis.html" alt="TopologyVis" shape="rect" coords="230,56,335,80"/>
<area href="classRpcListener.html" title="A Remote-Procedure-Call listener class." alt="RpcListener" shape="rect" coords="0,0,105,24"/>
<area href="classBasePastry.html" alt="BasePastry" shape="rect" coords="230,168,335,192"/>
<area href="classBroose.html" title="Broose overlay module." alt="Broose" shape="rect" coords="230,224,335,248"/>
<area href="classGia.html" title="Gia overlay module." alt="Gia" shape="rect" coords="230,280,335,304"/>
<area href="classHTopology.html" title="TODO - Generated class." alt="HTopology" shape="rect" coords="230,336,335,360"/>
<area href="classKademlia.html" title="Kademlia overlay module." alt="Kademlia" shape="rect" coords="230,392,335,416"/>
<area href="classMyOverlay.html" alt="MyOverlay" shape="rect" coords="230,448,335,472"/>
<area href="classNTree.html" title="A p2p protocol for MMOGs and virtual worlds." alt="NTree" shape="rect" coords="230,504,335,528"/>
<area href="classOverlayDummy.html" alt="OverlayDummy" shape="rect" coords="230,560,335,584"/>
<area href="classoversim_1_1Chord.html" title="Chord overlay module." alt="oversim::Chord" shape="rect" coords="230,616,335,640"/>
<area href="classoversim_1_1Nice.html" title="NICE overlay module." alt="oversim::Nice" shape="rect" coords="230,672,335,696"/>
<area href="classPubSubLobby.html" alt="PubSubLobby" shape="rect" coords="230,728,335,752"/>
<area href="classPubSubMMOG.html" alt="PubSubMMOG" shape="rect" coords="230,784,335,808"/>
<area href="classQuon.html" title="QuON: An overlay network based on quadtrees." alt="Quon" shape="rect" coords="230,840,335,864"/>
<area href="classVast.html" title="Voronoi class." alt="Vast" shape="rect" coords="230,896,335,920"/>
</map>
 </div></div>

<p><a href="classBaseOverlay-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay_1_1BaseOverlayContext.html">BaseOverlayContext</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBaseOverlay_1_1HopDelayRecord.html">HopDelayRecord</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure for computing the average delay in one specific hop.  <a href="structBaseOverlay_1_1HopDelayRecord.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay_1_1lookupHashFcn.html">lookupHashFcn</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a> { <br/>
&#160;&#160;<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a> =  0, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab746fc2a119638665d6ac9d493146662">BOOTSTRAP</a> =  1, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa6f9e50300f12679850ddc29f15cdf37b">DISCOVERY</a> =  2, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faee36df62cd4384e95a4a735b8acbc1ea">PREJOIN</a> =  3, 
<br/>
&#160;&#160;<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a> =  4, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a">POSTJOIN</a> =  5, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a> =  6, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa844ef1f60e4f4efe32c7ba89315a7bf7">REFRESH</a> =  7, 
<br/>
&#160;&#160;<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faad4c4f4f3bddd311d8c11b20c1c6d00f">SHUTDOWN</a> =  8, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1">FAILED</a> =  9, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faa17c975f477d6dd1f472e031d5bd6bc0">RSET</a> =  JOIN, 
<a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa5eb3bb010076f581e3a98cddf2531686">BSET</a> =  POSTJOIN
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a9d3fd0a833ef00d1a739ced007469505">BaseOverlay</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a4fd9da1c26016b59e19ac0ca938ba312">~BaseOverlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor.  <a href="#a4fd9da1c26016b59e19ac0ca938ba312"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#adff10d8324516c75347fe67f11897435">getState</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e">isMalicious</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true, if node is malicious.  <a href="#a234b046348574d37d811638f0b27a89e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#abef37828b7f070044154f53bcd2a765b">isInSimpleMultiOverlayHost</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if overlay is one in an array, inside a SimpleMultiOverlayHost.  <a href="#abef37828b7f070044154f53bcd2a765b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const simtime_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a018f1d79a4f2aa314c2c68f9bface3c6">getCreationTime</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#acb8855faa86247ae37ab894891d9f4dd">join</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;nodeID=<a class="el" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75">OverlayKey::UNSPECIFIED_KEY</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Join the overlay with a given nodeID.  <a href="#acb8855faa86247ae37ab894891d9f4dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a95851770a6ab3a176e1d7b5a7afba3f0">local_lookup</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, int num, bool safe)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">finds nodes closest to the given <a class="el" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>  <a href="#a95851770a6ab3a176e1d7b5a7afba3f0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a08f453e70d8d295bdbabec4accbb9dad">neighborSet</a> (int num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ab5887b89ba9da5973068e834feb69ce7">isSiblingFor</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, int numSiblings, bool *err)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Query if a node is among the siblings for a given key.  <a href="#ab5887b89ba9da5973068e834feb69ce7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#acd3058ad15b470e024500dd4872e2f09">getMaxNumSiblings</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the maximum number of siblings (nodes close to a key) that are maintained by this overlay protocol.  <a href="#acd3058ad15b470e024500dd4872e2f09"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ab4dadd02486560de3a58773b3a90fb41">getMaxNumRedundantNodes</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the maximum number of redundant next hop nodes that are returned by <a class="el" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode()</a>.  <a href="#ab4dadd02486560de3a58773b3a90fb41"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a10189697bd95f3de66c27c1ecf07e323">sendMessageToUDP</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;dest, cPacket *msg, simtime_t delay=SIMTIME_ZERO)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends message to underlay.  <a href="#a10189697bd95f3de66c27c1ecf07e323"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a6f2c598f5d3989a63a8cc7220f1aaf76">sendToKey</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, <a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *message, int numSiblings=1, const std::vector&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a> &gt; &amp;sourceRoute=<a class="el" href="classTransportAddress.html#ac4c193ddadf638fa3f1bf0de04fbaaab">TransportAddress::UNSPECIFIED_NODES</a>, <a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a> routingType=DEFAULT_ROUTING)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a message to an overlay node, with the generic routing algorithm.  <a href="#a6f2c598f5d3989a63a8cc7220f1aaf76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classOverlayKey.html">OverlayKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa12314947ef42726ec6c7066dde8d0f9">distance</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;x, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;y, bool useAlternative=false) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method should implement the distance between two keys.  <a href="#aa12314947ef42726ec6c7066dde8d0f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a2096f89814b5740257cee106b60dda15">registerComp</a> (<a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> compType, cModule *module)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cModule *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a3aba2b6e93094d3cc8107d33db4b5244">getCompModule</a> (<a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> compType)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cGate *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a5fc03fda227c0cca828109842af1b320">getCompRpcGate</a> (<a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> compType)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a19c2c01f99a19bb7de0b30cdd866a2e0">sendMessageToAllComp</a> (cMessage *msg, <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> srcComp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a269ddf1a8caa1efd25ebf0593cf5b671">providesKbr</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#afcab85a6c5a4f8aa70a65ecabaa78180">getBitsPerDigit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a077a698fb5f760290bc67e4a50dfed9e">getMeasureAuthBlock</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBootstrapList.html">BootstrapList</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aab1198e37993729eaf87350d5b83f9a0">getBootstrapList</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classOverlayKey.html">OverlayKey</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a17e5d70377d7441e3c379818688892c2">estimateMeanDistance</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns mean distance between OverlayKeys in the network  <a href="#a17e5d70377d7441e3c379818688892c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#abbe44e3f7df7e0f33b05508023899f94">estimateOverlaySize</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">estimates the current number of nodes online  <a href="#abbe44e3f7df7e0f33b05508023899f94"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef UNORDERED_SET<br class="typebreak"/>
&lt; <a class="el" href="classAbstractLookup.html">AbstractLookup</a> <br class="typebreak"/>
*, <a class="el" href="classBaseOverlay_1_1lookupHashFcn.html">lookupHashFcn</a>, <br class="typebreak"/>
<a class="el" href="classBaseOverlay_1_1lookupHashFcn.html">lookupHashFcn</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">LookupSet</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a3234dfcf81463984e88a42432734a615">numInitStages</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets init stage.  <a href="#a3234dfcf81463984e88a42432734a615"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a41f88dfbea856a2b38319ff52c758c96">initializeOverlay</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes derived-class-attributes.  <a href="#a41f88dfbea856a2b38319ff52c758c96"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a8db85b9c706d04007154761d5a0cec16">finishOverlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">collects statistical data in derived class  <a href="#a8db85b9c706d04007154761d5a0cec16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a512084e3a224f0a3f284e5e240652a26">bindToPort</a> (int port)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells UDP we want to get all packets arriving on the given port.  <a href="#a512084e3a224f0a3f284e5e240652a26"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ad62efdef2b674f46e5368354efb6104f">route</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> destComp, <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> srcComp, cPacket *msg, const std::vector&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a> &gt; &amp;sourceRoute=<a class="el" href="classTransportAddress.html#ac4c193ddadf638fa3f1bf0de04fbaaab">TransportAddress::UNSPECIFIED_NODES</a>, <a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a> routingType=DEFAULT_ROUTING)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Routes message through overlay.  <a href="#ad62efdef2b674f46e5368354efb6104f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a432f79071b87baece93311300cfda0c3">callDeliver</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;destKey)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls deliver function in application.  <a href="#a432f79071b87baece93311300cfda0c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a71bcb54aa4fc66bdf97cc9c87fffc318">callForward</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, <a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *msg, const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;nextHopNode)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls forward function in application.  <a href="#a71bcb54aa4fc66bdf97cc9c87fffc318"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a1422696a8eb138dde850390152ff88c7">callUpdate</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node, bool joined)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Informs application about state changes of nodes or newly joined nodes.  <a href="#a1422696a8eb138dde850390152ff88c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a870d24a243e4b0d1aeb31ea0861e53a7">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for message type and calls corresponding method.  <a href="#a870d24a243e4b0d1aeb31ea0861e53a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8">handleBaseOverlayMessage</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;destKey=<a class="el" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75">OverlayKey::UNSPECIFIED_KEY</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a <a class="el" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a><br/>
  <a href="#ac647b32e360b4db1f0eb53b096437fd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a31d7dd39ddc9e62ad92f69f6d7210344">handleUDPMessage</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes messages from underlay.  <a href="#a31d7dd39ddc9e62ad92f69f6d7210344"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aef92d042c22b47c123e59a831acb7033">handleAppMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes "timer" self-messages.  <a href="#aef92d042c22b47c123e59a831acb7033"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ac1cf471c2918271ed0244e4a9579c878">receiveChangeNotification</a> (int category, const cPolymorphic *details)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">callback-method for events at the NotificationBoard  <a href="#ac1cf471c2918271ed0244e4a9579c878"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a2a53481e2aaf78e6826ab72378bebf48">handleTransportAddressChangedNotification</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method gets call if the node has a new <a class="el" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> (IP address) because he changed his access network.  <a href="#a2a53481e2aaf78e6826ab72378bebf48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af9ea0a59c26b70c50c63c2c1dc4c2ec3">handleNodeLeaveNotification</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method gets call **.gracefulLeaveDelay seconds before it is killed.  <a href="#af9ea0a59c26b70c50c63c2c1dc4c2ec3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa2d70984acd164839ca92694a02e7a91">handleNodeGracefulLeaveNotification</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method gets call **.gracefulLeaveDelay seconds before it is killed if this node is among the gracefulLeaveProbability nodes.  <a href="#aa2d70984acd164839ca92694a02e7a91"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a921ac1fec5765f4099276800a82953ab">recordOverlaySentStats</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Collect overlay specific sent messages statistics.  <a href="#a921ac1fec5765f4099276800a82953ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a9da615809e832cbc4645cc732d510277">setOverlayReady</a> (bool ready)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the overlay ready icon and register/deregisters the node at the <a class="el" href="classGlobalNodeList.html" title="Global module (formerly known as BootstrapList) that supports the node bootstrap process and contains...">GlobalNodeList</a>.  <a href="#a9da615809e832cbc4645cc732d510277"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classAbstractLookup.html">AbstractLookup</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a205a7d44401fb3d77b146e23b2904b6f">createLookup</a> (<a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a> routingType=DEFAULT_ROUTING, const <a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg=NULL, const cPacket *findNodeExt=NULL, bool appLookup=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an abstract iterative lookup instance.  <a href="#a205a7d44401fb3d77b146e23b2904b6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a0bfca744a28f47cae8c99243de04b005">removeLookup</a> (<a class="el" href="classAbstractLookup.html">AbstractLookup</a> *lookup)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the abstract lookup instance.  <a href="#a0bfca744a28f47cae8c99243de04b005"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489">findNode</a> (const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, int numRedundantNodes, int numSiblings, <a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the find node call.  <a href="#a7cbdce336237331b67a3c69c4e43d489"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a3eefb56c2396601373c89d21b5b58110">joinOverlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Join the overlay with a given nodeID in thisNode.key.  <a href="#a3eefb56c2396601373c89d21b5b58110"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ad032eda7f8a65884cf8c6d141224331e">joinForeignPartition</a> (const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;node)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Join another overlay partition with the given node as bootstrap node.  <a href="#ad032eda7f8a65884cf8c6d141224331e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7">handleFailedNode</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;failed)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles a failed node.  <a href="#aa53ca4e1b4720ba0d2874afe29eacbf7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa9d874edfd1b52822e1693695420d5a7">lookupRpc</a> (<a class="el" href="classLookupCall.html">LookupCall</a> *call)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a3eef9db326747d930a455db3b884dac4">nextHopRpc</a> (<a class="el" href="classNextHopCall.html">NextHopCall</a> *call)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aee7b3e4129a3a624b9112c3b7ae2b6a3">countFindNodeCall</a> (const <a class="el" href="classFindNodeCall.html">FindNodeCall</a> *call)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a189d4d1410399ecd264b5bfe6fc85e0f">countFailedNodeCall</a> (const <a class="el" href="classFailedNodeCall.html">FailedNodeCall</a> *call)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a03a24a5876504b36177a0ee041d5822e">internalHandleRpcCall</a> (<a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles internal rpc requests.  <a href="#a03a24a5876504b36177a0ee041d5822e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#adc50f1e153d88a20ca921e84a0dbf3b2">internalHandleRpcResponse</a> (<a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *msg, cPolymorphic *context, int rpcId, simtime_t rtt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles rpc responses internal in base classes<br/>
  <a href="#adc50f1e153d88a20ca921e84a0dbf3b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ac89854c2f011597f3421d414851f4407">internalHandleRpcTimeout</a> (<a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *msg, const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;dest, cPolymorphic *context, int rpcId, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;destKey)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles rpc timeouts internal in base classes<br/>
  <a href="#ac89854c2f011597f3421d414851f4407"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#afe4a27831cec5ad68f1ddca071461808">internalSendRouteRpc</a> (<a class="el" href="classBaseRpcMessage.html">BaseRpcMessage</a> *message, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;destKey, const std::vector&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a> &gt; &amp;sourceRoute, <a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a> routingType)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a92e0d3f96a5716245465e05da60ef487">getThisCompType</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the component type of this module.  <a href="#a92e0d3f96a5716245465e05da60ef487"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99">numAppDataForwarded</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of forwarded app data packets  <a href="#a341a65ab7c50dfbc8222c1adf4f08a99"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6">bytesAppDataForwarded</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of forwarded app data bytes at out-gate  <a href="#a1c90204205e7e5b8f0f12fe4056914e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd">numAppLookupForwarded</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of forwarded app lookup packets  <a href="#a8f5ff290e99ab78f3e0bd4a489bfcadd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7">bytesAppLookupForwarded</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of forwarded app lookup bytes at out-gate  <a href="#adeff8c454760c6eb4ca847e8dda252a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7">numMaintenanceForwarded</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of forwarded maintenance packets  <a href="#a05fa895acb368180bbca74d92152d2f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b">bytesMaintenanceForwarded</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of forwarded maintenance bytes at out-gate  <a href="#a8dbb1ce4eee057f23bea55e5e4a7d13b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">numFindNodeSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">bytesFindNodeSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">numFindNodeResponseSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">bytesFindNodeResponseSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">numFailedNodeSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">bytesFailedNodeSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">numFailedNodeResponseSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">bytesFailedNodeResponseSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structBaseOverlay_1_1HopDelayRecord.html">HopDelayRecord</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd">creationTime</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">simtime when the node has been created  <a href="#af0eebaddea732ee4ab4d247c388e62bd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classGlobalNodeList.html">GlobalNodeList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7">globalNodeList</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to <a class="el" href="classGlobalNodeList.html" title="Global module (formerly known as BootstrapList) that supports the node bootstrap process and contains...">GlobalNodeList</a> in this node  <a href="#a933e505ea77cae4ab0c8edcb77ade2c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NotificationBoard *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae">notificationBoard</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to NotificationBoard in this node  <a href="#af0704186e295039c92666176b0b91dae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classUnderlayConfigurator.html">UnderlayConfigurator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af2f7102d7cc6f5ecb1c3ecb3d9c93df3">underlayConfigurator</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to <a class="el" href="classUnderlayConfigurator.html" title="Base class for configurators of different underlay models.">UnderlayConfigurator</a> in this node  <a href="#af2f7102d7cc6f5ecb1c3ecb3d9c93df3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBootstrapList.html">BootstrapList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504">bootstrapList</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to the <a class="el" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a> module  <a href="#abe4dea93564123116c97d5c4721f0504"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classGlobalParameters.html">GlobalParameters</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a59bde2858b8537864fbad3eb487dbc55">globalParameters</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to the <a class="el" href="classGlobalParameters.html" title="Modul for storing global simulation parameters.">GlobalParameters</a> module  <a href="#a59bde2858b8537864fbad3eb487dbc55"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a58a2fa722396661f55eb490d989a6df6">overlayId</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">identifies the overlay this node belongs to (used for multiple overlays)  <a href="#a58a2fa722396661f55eb490d989a6df6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd">debugOutput</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">debug output ?  <a href="#a49ff0fb8c25792a1339d54a60c36f2cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ac9acbeb30646d54f620d87641d91b113">useCommonAPIforward</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">forward messages to applications?  <a href="#ac9acbeb30646d54f620d87641d91b113"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9">collectPerHopDelay</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">collect delay for single hops  <a href="#a2694627a0082c456367bfa472fff56b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a6e9090bf68f45a31d727a6c7f0501d43">routeMsgAcks</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">send ACK when receiving route message  <a href="#a6e9090bf68f45a31d727a6c7f0501d43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ad0094285f9af244aec5e5fe600126243">recNumRedundantNodes</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">numRedundantNodes for recursive routing  <a href="#ad0094285f9af244aec5e5fe600126243"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a61186fd8bd7368c8a91a63ecc9c62a89">recordRoute</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">record visited hops on route  <a href="#a61186fd8bd7368c8a91a63ecc9c62a89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a79031cb868377512713e343a326dbbd9">drawOverlayTopology</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aecfcf5743d274d9c17730f2aeccf1635">rejoinOnFailure</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a84fe39074cd9dc69acf188abf3e2ea12">sendRpcResponseToLastHop</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">needed by KBR protocols for NAT support  <a href="#a84fe39074cd9dc69acf188abf3e2ea12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ab53aaadb5dfe6fea1ac6b90db356cc52">dropFindNodeAttack</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">if node is malicious, it tries a findNode attack  <a href="#ab53aaadb5dfe6fea1ac6b90db356cc52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc">isSiblingAttack</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">if node is malicious, it tries a isSibling attack  <a href="#ae70528858c70e2404e0d83824d6f5bbc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a319a6b16e55af5e67fbbf65f6d07d5d9">invalidNodesAttack</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">if node is malicious, it tries a invalidNode attack  <a href="#a319a6b16e55af5e67fbbf65f6d07d5d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a3bcd2bdd704803d7ec8ae77633cf03fa">dropRouteMessageAttack</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">if node is malicious, it drops all received BaseRouteMessages  <a href="#a3bcd2bdd704803d7ec8ae77633cf03fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aef12c08638b508af44f257824f9391ef">localPort</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">used UDP-port  <a href="#aef12c08638b508af44f257824f9391ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9">hopCountMax</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum hop count  <a href="#abffe6fbd25963bc2b7542f22ba6455b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ab0b0274a06e70c91e8bd8df0c23d435f">measureAuthBlock</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">if true, measure the overhead of signatures in rpc messages  <a href="#ab0b0274a06e70c91e8bd8df0c23d435f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a7d0beff122a0b5c573dd8ae90c9372d5">restoreContext</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">if true, a node rejoins with its old nodeId and malicious state  <a href="#a7d0beff122a0b5c573dd8ae90c9372d5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7">numDropped</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of dropped packets  <a href="#a4a82bd4b76a8d06a1d63bba98f1a34d7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6">bytesDropped</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of dropped bytes  <a href="#a9e09857b97f52d340e4710580f25f7a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ae035d51942a35ec780eb6f5bad6fe179">delayVector</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">statistical output vector for packet-delays  <a href="#ae035d51942a35ec780eb6f5bad6fe179"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aadc1c2714625c6d3c2d6d0cd96bf4491">hopCountVector</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">statistical output vector for hop-counts  <a href="#aadc1c2714625c6d3c2d6d0cd96bf4491"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classIterativeLookupConfiguration.html">IterativeLookupConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classRecursiveLookupConfiguration.html">RecursiveLookupConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af6573aac3c99626958737209309d7e99">recursiveLookupConfig</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">LookupSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b">kbr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">set this to true, if the overlay provides KBR services  <a href="#a53389ea3326d2e8ad53f02b388487d0b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>, <br class="typebreak"/>
std::pair&lt; cModule *, cGate * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a70450830625412821e38ba9820f4eb16">CompModuleList</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a9738ba6065b0f699f1921bbe82ab97be">initialize</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes base-class-attributes  <a href="#a9738ba6065b0f699f1921bbe82ab97be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aed7e3f36b2c70cbdb0e6daa32925917c">finish</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">collects statistical data  <a href="#aed7e3f36b2c70cbdb0e6daa32925917c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a31e60de81d77afdeb0e68f781ded0f9e">setOwnNodeID</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overlay implementations can overwrite this virtual method to set a specific nodeID.  <a href="#a31e60de81d77afdeb0e68f781ded0f9e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ac93829bc8095a76e6208cf0ec12188b0">sendRouteMessage</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;dest, <a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *msg, bool ack)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a53ded56af8bba8e4caa9a9b29e01ab87">checkFindNode</a> (<a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *routeMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af2c8b2108703c4df49217a719f280bb8">initLookups</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">creates a LookupSet  <a href="#af2c8b2108703c4df49217a719f280bb8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#abaaca6fe44d8e317d56c90a14e0fcada">finishLookups</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">deletes entries in lookups  <a href="#abaaca6fe44d8e317d56c90a14e0fcada"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a42f4c08f6408d155a9907957ecf12d79">recursiveRoutingHook</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;dest, <a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Hook for forwarded message in recursive lookup mode.  <a href="#a42f4c08f6408d155a9907957ecf12d79"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a3b7e4eeca10c3052e0bb51762fe1ce71">internalSendRpcResponse</a> (<a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *call, <a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *response)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a50680d9b44a779f314baeab200da61dc">findNodeRpc</a> (<a class="el" href="classFindNodeCall.html">FindNodeCall</a> *call)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a1655dc0cb4ebb2f22de1d1ee29030433">failedNodeRpc</a> (<a class="el" href="classFailedNodeCall.html">FailedNodeCall</a> *call)</td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4">numAppDataSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of sent app data packets (incl. forwarded packets)  <a href="#aa8c1469e21c59a08a84dec36218582b4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4">bytesAppDataSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of sent app data bytes (incl. forwarded bytes)  <a href="#ae6453766e7a58060722a6323ee3923e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f">numAppLookupSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of sent app loookup packets (incl. forwarded packets)  <a href="#a5b42fe053fd79b9b62680cbfc740ec4f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4">bytesAppLookupSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of sent app lookup bytes (incl. forwarded bytes)  <a href="#a118e46bc3e194c63a70e28846480ffe4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa">numMaintenanceSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of sent maintenance packets (incl. forwarded packets)  <a href="#af1077d5c646390fb11d4f646fc22eaaa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4">bytesMaintenanceSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of sent maintenance bytes (incl. forwarded bytes)  <a href="#a27259327737ad8092c612756c0fe6fb4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898">numAppDataReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of received app data packets (incl. packets to be forwarded )  <a href="#aa83e680792f987f9f5f779e12c055898"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76">bytesAppDataReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of received app data bytes (incl. bytes to be forwarded)  <a href="#a82cd1df80e31e2a9148a9efaacc4bc76"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca">numAppLookupReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of received app lookup packets (incl. packets to be forwarded)  <a href="#a9298db97a2d651e02729ad197964bdca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527">bytesAppLookupReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of received app lookup bytes (incl. bytes to be forwarded)  <a href="#a8527c9038c62bf66e58c07d41b308527"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46">numMaintenanceReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of received maintenance packets (incl. packets to be forwarded)  <a href="#a4e7abb41a2c8698bf530015378a13e46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb">bytesMaintenanceReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of received maintenance bytes (incl. bytes to be forwarded)  <a href="#ad7bd70b69842cc4db485eafa942332fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ae34cc8a058a4dae47a3815cba64ceba2">numInternalSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of packets sent to same host but different port (SimpleMultiOverlayHost)  <a href="#ae34cc8a058a4dae47a3815cba64ceba2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ad0af3d066a89ced910b082a980f68f25">bytesInternalSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of bytes sent to same host but different port (SimpleMultiOverlayHost)  <a href="#ad0af3d066a89ced910b082a980f68f25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef">numInternalReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of packets received from same host but different port (SimpleMultiOverlayHost)  <a href="#a7f185cb11a818d01dcc1a31553de16ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae">bytesInternalReceived</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of bytes received from same host but different port (SimpleMultiOverlayHost)  <a href="#a55ba3d595b6b23db700cb9f36f34f0ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a30e11530c77c2164f0a5c98a489a9fab">bytesAuthBlockSent</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of bytes sent for rpc message signatures  <a href="#a30e11530c77c2164f0a5c98a489a9fab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b">joinRetries</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of join retries  <a href="#aee8e642813784a1f27a81756a4b93b9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const cGate *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a2e2f70aa82a9b4920877b3a13dd1e0ea">udpGate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const cGate *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a6523faf8f52af34c73643dc7f3e083eb">appGate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseOverlay.html#a70450830625412821e38ba9820f4eb16">CompModuleList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323">internalReadyState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">internal overlay state used for <a class="el" href="classBaseOverlay.html#a9da615809e832cbc4645cc732d510277" title="Sets the overlay ready icon and register/deregisters the node at the GlobalNodeList.">setOverlayReady()</a>  <a href="#aa484556ed4ff9e4e97394106d0c1d323"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af0cedb761015fad54f32a96963e8e88c">socketId</a></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#af4b6fb17cb1da8f210d175cdba0c2c5a">IterativeLookup</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#aef42f314710869966a27962174cb1ca3">IterativePathLookup</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a9d94a8362059c5c49b2cfffeb628f7cb">RecursiveLookup</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#ae2d97f842f0b5746d066b9de64dd23f2">BootstrapList</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseOverlay.html#a4083c91b7d09ceaa7fd2768570814d77">SendToKeyListener</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Base class for overlays. </p>
<p>Base class for overlay modules, with KBR-API, statistics and pointers to the <a class="el" href="classGlobalNodeList.html" title="Global module (formerly known as BootstrapList) that supports the node bootstrap process and contains...">GlobalNodeList</a> and the <a class="el" href="classUnderlayConfigurator.html" title="Base class for configurators of different underlay models.">UnderlayConfigurator</a>. Derived classes must use <a class="el" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a> as base class for own message types.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Ingmar Baumgart </dd>
<dd>
Bernhard Heep </dd>
<dd>
Stephan Krause </dd>
<dd>
Sebastian Mies </dd></dl>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00062">62</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a70450830625412821e38ba9820f4eb16"></a><!-- doxytag: member="BaseOverlay::CompModuleList" ref="a70450830625412821e38ba9820f4eb16" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>, std::pair&lt;cModule*, cGate*&gt; &gt; <a class="el" href="classBaseOverlay.html#a70450830625412821e38ba9820f4eb16">BaseOverlay::CompModuleList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00837">837</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a65cc359d4db3de08cde7ff0b3794f0c8"></a><!-- doxytag: member="BaseOverlay::LookupSet" ref="a65cc359d4db3de08cde7ff0b3794f0c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef UNORDERED_SET&lt;<a class="el" href="classAbstractLookup.html">AbstractLookup</a>*, <a class="el" href="classBaseOverlay_1_1lookupHashFcn.html">lookupHashFcn</a>, <a class="el" href="classBaseOverlay_1_1lookupHashFcn.html">lookupHashFcn</a>&gt; <a class="el" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">BaseOverlay::LookupSet</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00580">580</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40f"></a><!-- doxytag: member="BaseOverlay::States" ref="a0ad4b12b0c9949661f66db7fbbf7d40f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">BaseOverlay::States</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a"></a><!-- doxytag: member="INIT" ref="a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a" args="" -->INIT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fab746fc2a119638665d6ac9d493146662"></a><!-- doxytag: member="BOOTSTRAP" ref="a0ad4b12b0c9949661f66db7fbbf7d40fab746fc2a119638665d6ac9d493146662" args="" -->BOOTSTRAP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fa6f9e50300f12679850ddc29f15cdf37b"></a><!-- doxytag: member="DISCOVERY" ref="a0ad4b12b0c9949661f66db7fbbf7d40fa6f9e50300f12679850ddc29f15cdf37b" args="" -->DISCOVERY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40faee36df62cd4384e95a4a735b8acbc1ea"></a><!-- doxytag: member="PREJOIN" ref="a0ad4b12b0c9949661f66db7fbbf7d40faee36df62cd4384e95a4a735b8acbc1ea" args="" -->PREJOIN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab"></a><!-- doxytag: member="JOIN" ref="a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab" args="" -->JOIN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a"></a><!-- doxytag: member="POSTJOIN" ref="a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a" args="" -->POSTJOIN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335"></a><!-- doxytag: member="READY" ref="a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335" args="" -->READY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fa844ef1f60e4f4efe32c7ba89315a7bf7"></a><!-- doxytag: member="REFRESH" ref="a0ad4b12b0c9949661f66db7fbbf7d40fa844ef1f60e4f4efe32c7ba89315a7bf7" args="" -->REFRESH</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40faad4c4f4f3bddd311d8c11b20c1c6d00f"></a><!-- doxytag: member="SHUTDOWN" ref="a0ad4b12b0c9949661f66db7fbbf7d40faad4c4f4f3bddd311d8c11b20c1c6d00f" args="" -->SHUTDOWN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1"></a><!-- doxytag: member="FAILED" ref="a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1" args="" -->FAILED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40faa17c975f477d6dd1f472e031d5bd6bc0"></a><!-- doxytag: member="RSET" ref="a0ad4b12b0c9949661f66db7fbbf7d40faa17c975f477d6dd1f472e031d5bd6bc0" args="" -->RSET</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a0ad4b12b0c9949661f66db7fbbf7d40fa5eb3bb010076f581e3a98cddf2531686"></a><!-- doxytag: member="BSET" ref="a0ad4b12b0c9949661f66db7fbbf7d40fa5eb3bb010076f581e3a98cddf2531686" args="" -->BSET</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00085">85</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>
<div class="fragment"><pre class="fragment">                {
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>      = 0,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab746fc2a119638665d6ac9d493146662">BOOTSTRAP</a> = 1,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa6f9e50300f12679850ddc29f15cdf37b">DISCOVERY</a> = 2,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faee36df62cd4384e95a4a735b8acbc1ea">PREJOIN</a>   = 3,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>      = 4,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a">POSTJOIN</a>  = 5,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>     = 6,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa844ef1f60e4f4efe32c7ba89315a7bf7">REFRESH</a>   = 7,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faad4c4f4f3bddd311d8c11b20c1c6d00f">SHUTDOWN</a>  = 8,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1">FAILED</a>    = 9,

        <span class="comment">//some aliases for compatibility</span>
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faa17c975f477d6dd1f472e031d5bd6bc0">RSET</a>      = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>,
        <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa5eb3bb010076f581e3a98cddf2531686">BSET</a>      = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a">POSTJOIN</a>
    };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9d3fd0a833ef00d1a739ced007469505"></a><!-- doxytag: member="BaseOverlay::BaseOverlay" ref="a9d3fd0a833ef00d1a739ced007469505" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseOverlay::BaseOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00057">57</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a> = NULL;
    <a class="code" href="classBaseOverlay.html#af2f7102d7cc6f5ecb1c3ecb3d9c93df3" title="pointer to UnderlayConfigurator in this node">underlayConfigurator</a> = NULL;
    <a class="code" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae" title="pointer to NotificationBoard in this node">notificationBoard</a> = NULL;
    <a class="code" href="classBaseOverlay.html#a59bde2858b8537864fbad3eb487dbc55" title="pointer to the GlobalParameters module">globalParameters</a> = NULL;
    <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a> = NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4fd9da1c26016b59e19ac0ca938ba312"></a><!-- doxytag: member="BaseOverlay::~BaseOverlay" ref="a4fd9da1c26016b59e19ac0ca938ba312" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseOverlay::~BaseOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Virtual destructor. </p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00066">66</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseOverlay.html#abaaca6fe44d8e317d56c90a14e0fcada" title="deletes entries in lookups">finishLookups</a>();
    <a class="code" href="classBaseRpc.html#a02b90067d0a0b630baca5808d7f82b5a" title="Deinitializes Remote-Procedure state.">finishRpcs</a>();
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a512084e3a224f0a3f284e5e240652a26"></a><!-- doxytag: member="BaseOverlay::bindToPort" ref="a512084e3a224f0a3f284e5e240652a26" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::bindToPort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells UDP we want to get all packets arriving on the given port. </p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00466">466</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::bindToPort() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
       &lt;&lt; <span class="stringliteral">&quot;    Binding to UDP port &quot;</span> &lt;&lt; port
       &lt;&lt; endl;

    <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a46a1b53760e5f2d3f8af8c9591160a48" title="sets this-&gt;port to the given port">setPort</a>(port);

    <span class="comment">// TODO UDPAppBase should be ported to use UDPSocket sometime, but for now</span>
    <span class="comment">// we just manage the UDP socket by hand...</span>
    cMessage *msg = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;UDP_C_BIND&quot;</span>, UDP_C_BIND);
    <a class="code" href="classBaseOverlay.html#af0cedb761015fad54f32a96963e8e88c">socketId</a> = UDPSocket::generateSocketId();
    UDPControlInfo *ctrl = <span class="keyword">new</span> UDPControlInfo();
    ctrl-&gt;setSrcPort(port);
    ctrl-&gt;setSockId(<a class="code" href="classBaseOverlay.html#af0cedb761015fad54f32a96963e8e88c">socketId</a>);
    msg-&gt;setControlInfo(ctrl);
    send(msg, <span class="stringliteral">&quot;udpOut&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a432f79071b87baece93311300cfda0c3"></a><!-- doxytag: member="BaseOverlay::callDeliver" ref="a432f79071b87baece93311300cfda0c3" args="(BaseOverlayMessage *msg, const OverlayKey &amp;destKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::callDeliver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>destKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calls deliver function in application. </p>
<p>Encapsulates messages in <a class="el" href="classKBRdeliver.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRdeliver</a> messages and sends them to application.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>delivered message </td></tr>
    <tr><td class="paramname">destKey</td><td>the destination key of the message </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00491">491</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="Gia_8cc_source.html#l00872">Gia::forwardMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classKBRdeliver.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRdeliver</a>* deliverMsg = <span class="keyword">new</span> <a class="code" href="classKBRdeliver.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRdeliver</a>();

    <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo =
        check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;(msg-&gt;removeControlInfo());

    <a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>* appDataMsg = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>*<span class="keyword">&gt;</span>(msg);

    <span class="comment">// TODO GIA</span>
    <span class="keywordflow">if</span> (appDataMsg != NULL) {
        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a7f814b40a36e2d8c30efab47d61ebfb3">setSrcComp</a>(appDataMsg-&gt;getSrcComp());
        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#adcf0261f01c139a8604483cf240226f3">setDestComp</a>(appDataMsg-&gt;getDestComp());
    }

    deliverMsg-&gt;setControlInfo(overlayCtrlInfo);
    deliverMsg-&gt;<a class="code" href="classKBRdeliver.html#a7b24e6d50100af723d77491519489068">setDestKey</a>(destKey);
    deliverMsg-&gt;encapsulate(msg-&gt;decapsulate());
    deliverMsg-&gt;<a class="code" href="classCommonAPIMessage.html#a29fdd8c02687c486dc30834acd7405e5">setType</a>(<a class="code" href="CommonMessages__m_8h.html#a61951439f8b8b0a1c54516d2e4c72297a9379c2a8f1bf319d3839652a3f3270ca">KBR_DELIVER</a>);

    cGate* destGate = <a class="code" href="classBaseOverlay.html#a5fc03fda227c0cca828109842af1b320">getCompRpcGate</a>(static_cast&lt;CompType&gt;(
            overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a082f26c9d0cac0aec9ca23da4d338134">getDestComp</a>()));

    <span class="keywordflow">if</span> (destGate == NULL) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::callDeliver(): Unknown destComp!&quot;</span>);
    }

    sendDirect(deliverMsg, destGate);

    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a71bcb54aa4fc66bdf97cc9c87fffc318"></a><!-- doxytag: member="BaseOverlay::callForward" ref="a71bcb54aa4fc66bdf97cc9c87fffc318" args="(const OverlayKey &amp;key, BaseRouteMessage *msg, const NodeHandle &amp;nextHopNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::callForward </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&#160;</td>
          <td class="paramname"><em>nextHopNode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calls forward function in application. </p>
<p>Encapsulates messages in <a class="el" href="classKBRforward.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRforward</a> messages and sends them to application. <br/>
 the message to be sent through the API must be encapsulated in <code>msg</code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>destination key </td></tr>
    <tr><td class="paramname">msg</td><td>message to forward </td></tr>
    <tr><td class="paramname">nextHopNode</td><td>next hop </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00524">524</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classKBRforward.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRforward</a>* forwardMsg = <span class="keyword">new</span> <a class="code" href="classKBRforward.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRforward</a>();

    forwardMsg-&gt;<a class="code" href="classKBRforward.html#aa6a9c8c10a8ccd22d1a943def961da11">setDestKey</a>(msg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>());
    forwardMsg-&gt;<a class="code" href="classKBRforward.html#acc57dc0ef5d698d7a6d05e4789d722a7">setNextHopNode</a>(nextHopNode);
    forwardMsg-&gt;encapsulate(msg-&gt;getEncapsulatedPacket()-&gt;decapsulate());

    <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo =
        <span class="keyword">new</span> <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>();
    overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a36db08008216830aaa46b21ee16db58a">setTransportType</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>);
    overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a3a396692c3655f8277f57d8ca8bdb311">setRoutingType</a>(msg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>());
    overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ac038719715302b645e9f13fdb85db75b">setHopCount</a>(msg-&gt;<a class="code" href="classBaseRouteMessage.html#ab59d2969c812aa35d132a68fc2baf819">getHopCount</a>());
    overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a033544e6c2005d7d468cab33547292b8">setSrcNode</a>(msg-&gt;<a class="code" href="classBaseRouteMessage.html#af9787d89915f01a2055e920148015e17">getSrcNode</a>());
    overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a7f814b40a36e2d8c30efab47d61ebfb3">setSrcComp</a>(check_and_cast&lt;BaseAppDataMessage*&gt;
        (msg-&gt;getEncapsulatedPacket())-&gt;getSrcComp());
    overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#adcf0261f01c139a8604483cf240226f3">setDestComp</a>(check_and_cast&lt;BaseAppDataMessage*&gt;
        (msg-&gt;getEncapsulatedPacket())-&gt;getDestComp());

    <span class="keywordflow">if</span> (msg-&gt;getControlInfo() != NULL) {
        <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* ctrlInfo =
            check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;(msg-&gt;removeControlInfo());

        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a9d6567bfe6cfeed2323b975f8ad1422f">setLastHop</a>(ctrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad12b7ac74244fb7ab79ebf41e05fe79c">getLastHop</a>());

        <span class="keyword">delete</span> ctrlInfo;
    }

    forwardMsg-&gt;setControlInfo(overlayCtrlInfo);

    forwardMsg-&gt;<a class="code" href="classCommonAPIMessage.html#a29fdd8c02687c486dc30834acd7405e5">setType</a>(<a class="code" href="CommonMessages__m_8h.html#a61951439f8b8b0a1c54516d2e4c72297a0afbe139422edee97cf4f5998edbfc9e">KBR_FORWARD</a>);

    send(forwardMsg, <span class="stringliteral">&quot;appOut&quot;</span>);

    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1422696a8eb138dde850390152ff88c7"></a><!-- doxytag: member="BaseOverlay::callUpdate" ref="a1422696a8eb138dde850390152ff88c7" args="(const NodeHandle &amp;node, bool joined)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::callUpdate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>joined</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Informs application about state changes of nodes or newly joined nodes. </p>
<p>Creates a KBRUpdate message and sends it up to the application</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>the node that has joined or changed its state </td></tr>
    <tr><td class="paramname">joined</td><td>has the node joined or changed its state? </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00669">669</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BrooseBucket_8cc_source.html#l00070">BrooseBucket::add()</a>, <a class="el" href="Gia_8cc_source.html#l00124">Gia::changeState()</a>, <a class="el" href="PastryLeafSet_8cc_source.html#l00521">PastryLeafSet::failedNode()</a>, <a class="el" href="Kademlia_8cc_source.html#l00846">Kademlia::handleFailedNode()</a>, <a class="el" href="PastryLeafSet_8cc_source.html#l00680">PastryLeafSet::mergeState()</a>, <a class="el" href="Kademlia_8cc_source.html#l00700">Kademlia::refillSiblingTable()</a>, <a class="el" href="BrooseBucket_8cc_source.html#l00117">BrooseBucket::remove()</a>, <a class="el" href="Kademlia_8cc_source.html#l00320">Kademlia::routingAdd()</a>, and <a class="el" href="Kademlia_8cc_source.html#l00630">Kademlia::routingTimeout()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((!node.<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) &amp;&amp; (node != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>)) {
        <span class="keywordflow">if</span> (joined) {
            EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::callUpdate() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
               &lt;&lt; <span class="stringliteral">&quot;    (&quot;</span> &lt;&lt; node &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; joined &lt;&lt; <span class="stringliteral">&quot;) joined&quot;</span>
               &lt;&lt; endl;
        } <span class="keywordflow">else</span> {
            EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::callUpdate() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
               &lt;&lt; <span class="stringliteral">&quot;    (&quot;</span> &lt;&lt; node &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; joined &lt;&lt; <span class="stringliteral">&quot;) left&quot;</span>
               &lt;&lt; endl;
        }
    }

    <a class="code" href="classKBRupdate.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRupdate</a>* updateMsg = <span class="keyword">new</span> <a class="code" href="classKBRupdate.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRupdate</a>(<span class="stringliteral">&quot;UPDATE&quot;</span>);

    updateMsg-&gt;<a class="code" href="classKBRupdate.html#a473c183cceaf4567b0c89f9c01ceddb7">setNode</a>(node);
    updateMsg-&gt;<a class="code" href="classKBRupdate.html#aa55d713fb18cb90e65e967ea78f18c91">setJoined</a>(joined);

    updateMsg-&gt;<a class="code" href="classCommonAPIMessage.html#a29fdd8c02687c486dc30834acd7405e5">setType</a>(<a class="code" href="CommonMessages__m_8h.html#a61951439f8b8b0a1c54516d2e4c72297ac502d048ee6f6b1287c7b7843d2706b8">KBR_UPDATE</a>);

    send(updateMsg, <span class="stringliteral">&quot;appOut&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a53ded56af8bba8e4caa9a9b29e01ab87"></a><!-- doxytag: member="BaseOverlay::checkFindNode" ref="a53ded56af8bba8e4caa9a9b29e01ab87" args="(BaseRouteMessage *routeMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::checkFindNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *&#160;</td>
          <td class="paramname"><em>routeMsg</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01629">1629</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (dynamic_cast&lt;FindNodeCall*&gt;(routeMsg-&gt;getEncapsulatedPacket())) {
        <a class="code" href="classFindNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeCall</a>* findNodeCall =
            <span class="keyword">static_cast&lt;</span><a class="code" href="classFindNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeCall</a>*<span class="keyword">&gt;</span>(routeMsg-&gt;decapsulate());
        findNodeCall
            -&gt;setControlInfo(check_and_cast&lt;OverlayCtrlInfo*&gt;
            (routeMsg-&gt;removeControlInfo()));
        <span class="keywordflow">if</span> (findNodeCall-&gt;<a class="code" href="classBaseRpcMessage.html#ada3e122125cfb5acc7350277ca69c45a">getSrcNode</a>() != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>) {
            <a class="code" href="classBaseOverlay.html#a50680d9b44a779f314baeab200da61dc">findNodeRpc</a>(findNodeCall);
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        } <span class="comment">//else std::cout &lt;&lt; &quot; autsch!! &quot; &lt;&lt; std::endl;</span>
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a189d4d1410399ecd264b5bfe6fc85e0f"></a><!-- doxytag: member="BaseOverlay::countFailedNodeCall" ref="a189d4d1410399ecd264b5bfe6fc85e0f" args="(const FailedNodeCall *call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::countFailedNodeCall </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFailedNodeCall.html">FailedNodeCall</a> *&#160;</td>
          <td class="paramname"><em>call</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01884">1884</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="Kademlia_8cc_source.html#l00831">Kademlia::handleNodeGracefulLeaveNotification()</a>, and <a class="el" href="IterativeLookup_8cc_source.html#l00910">IterativePathLookup::handleTimeout()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">numFailedNodeSent</a>++;
                 <a class="code" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">bytesFailedNodeSent</a> += call-&gt;getByteLength());
}
</pre></div>
</div>
</div>
<a class="anchor" id="aee7b3e4129a3a624b9112c3b7ae2b6a3"></a><!-- doxytag: member="BaseOverlay::countFindNodeCall" ref="aee7b3e4129a3a624b9112c3b7ae2b6a3" args="(const FindNodeCall *call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::countFindNodeCall </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classFindNodeCall.html">FindNodeCall</a> *&#160;</td>
          <td class="paramname"><em>call</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01878">1878</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="IterativeLookup_8cc_source.html#l00650">IterativeLookup::sendRpc()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">numFindNodeSent</a>++;
                 <a class="code" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">bytesFindNodeSent</a> += call-&gt;getByteLength());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a205a7d44401fb3d77b146e23b2904b6f"></a><!-- doxytag: member="BaseOverlay::createLookup" ref="a205a7d44401fb3d77b146e23b2904b6f" args="(RoutingType routingType=DEFAULT_ROUTING, const BaseOverlayMessage *msg=NULL, const cPacket *findNodeExt=NULL, bool appLookup=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAbstractLookup.html">AbstractLookup</a> * BaseOverlay::createLookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a>&#160;</td>
          <td class="paramname"><em>routingType</em> = <code>DEFAULT_ROUTING</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cPacket *&#160;</td>
          <td class="paramname"><em>findNodeExt</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>appLookup</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates an abstract iterative lookup instance. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">routingType</td><td>The routing type for this lookup (e.g. recursive/iterative) </td></tr>
    <tr><td class="paramname">msg</td><td>pointer to the message for which the lookup is created. Derived classes can use it to construct an object with additional info for the lookup class. </td></tr>
    <tr><td class="paramname">findNodeExt</td><td>object that will be sent with the findNodeCalls </td></tr>
    <tr><td class="paramname">appLookup</td><td>Set to true, if lookup is triggered by application (for statistics) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>AbstractLookup* The new lookup instance. </dd></dl>

<p>Reimplemented in <a class="el" href="classBasePastry.html#abcdf9ac9a9cc75300ba325bb8f163d19">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01646">1646</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="Kademlia_8cc_source.html#l01323">Kademlia::handleBucketRefreshTimerExpired()</a>, and <a class="el" href="Kademlia_8cc_source.html#l01183">Kademlia::handleRpcResponse()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* newLookup;

    <span class="keywordflow">if</span> (routingType == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>) {
        routingType = <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a>;
    }

    <span class="keywordflow">switch</span> (routingType) {
        <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ae4bd936cbb47803986c83242cbb51867">ITERATIVE_ROUTING</a>:
        <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad60cf756d6bb24af372d7fe7c279f44d">EXHAUSTIVE_ITERATIVE_ROUTING</a>:
            newLookup = <span class="keyword">new</span> <a class="code" href="classBaseOverlay.html#af4b6fb17cb1da8f210d175cdba0c2c5a">IterativeLookup</a>(<span class="keyword">this</span>, routingType,
                                            <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>, findNodeExt,
                                            appLookup);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad8c4eefed3d826e5da402fe582cad2c1">RECURSIVE_SOURCE_ROUTING</a>:
        <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a18b63fe85aa5e81cd3fca5e3c7c9df82">SEMI_RECURSIVE_ROUTING</a>:
        <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551aeec4ce5cac6dae9d3d59b1347a9df957">FULL_RECURSIVE_ROUTING</a>:
            newLookup = <span class="keyword">new</span> <a class="code" href="classBaseOverlay.html#a9d94a8362059c5c49b2cfffeb628f7cb">RecursiveLookup</a>(<span class="keyword">this</span>, routingType,
                                            <a class="code" href="classBaseOverlay.html#af6573aac3c99626958737209309d7e99">recursiveLookupConfig</a>,
                                            appLookup);
            <span class="keywordflow">break</span>;
        <span class="keywordflow">default</span>:
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::createLookup():&quot;</span>
                                    <span class="stringliteral">&quot; Unknown routingType!&quot;</span>);
            <span class="keywordflow">break</span>;
    }

    <a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a>.insert(newLookup);
    <span class="keywordflow">return</span> newLookup;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa12314947ef42726ec6c7066dde8d0f9"></a><!-- doxytag: member="BaseOverlay::distance" ref="aa12314947ef42726ec6c7066dde8d0f9" args="(const OverlayKey &amp;x, const OverlayKey &amp;y, bool useAlternative=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOverlayKey.html">OverlayKey</a> BaseOverlay::distance </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useAlternative</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method should implement the distance between two keys. </p>
<p>It may be overloaded to implement a new metric. The default implementation uses the standard-metric d = abs(x-y).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Left-hand-side Key </td></tr>
    <tr><td class="paramname">y</td><td>Right-hand-side key </td></tr>
    <tr><td class="paramname">useAlternative</td><td>use an alternative distance metric </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> Distance between x and y </dd></dl>

<p>Reimplemented in <a class="el" href="classBasePastry.html#a5508a66ddde5207ac255edfe042b69a5">BasePastry</a>, <a class="el" href="classKademlia.html#a8267f4c6d125a1cdd749164f6a1ee65e">Kademlia</a>, and <a class="el" href="classoversim_1_1Chord.html#afa1f27846808b609de259489b1c6a09b">oversim::Chord</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01687">1687</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="IterativeLookup_8cc_source.html#l00404">IterativeLookup::compare()</a>, <a class="el" href="Nice_8cc_source.html#l01457">oversim::Nice::handleNicePingProbeResponse()</a>, and <a class="el" href="Nice_8cc_source.html#l02352">oversim::Nice::maintenance()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::distance(): Not implemented!&quot;</span>);
    <span class="keywordflow">return</span> <a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a17e5d70377d7441e3c379818688892c2"></a><!-- doxytag: member="BaseOverlay::estimateMeanDistance" ref="a17e5d70377d7441e3c379818688892c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOverlayKey.html">OverlayKey</a> BaseOverlay::estimateMeanDistance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns mean distance between OverlayKeys in the network </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>mean distance </dd></dl>

<p>Reimplemented in <a class="el" href="classBasePastry.html#adc106b05b0a841dcef8099d16714a219">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00582">582</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlays::estimate_mean_distance(): &quot;</span>
            <span class="stringliteral">&quot;Function not implemented for this Overlay!&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abbe44e3f7df7e0f33b05508023899f94"></a><!-- doxytag: member="BaseOverlay::estimateOverlaySize" ref="abbe44e3f7df7e0f33b05508023899f94" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t BaseOverlay::estimateOverlaySize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>estimates the current number of nodes online </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>estimated number current nodes </dd></dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00588">588</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> mean = <a class="code" href="classBaseOverlay.html#a17e5d70377d7441e3c379818688892c2" title="returns mean distance between OverlayKeys in the network">estimateMeanDistance</a>();
    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> start = mean;
    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> count = mean;
    uint32_t number = 1;

    <span class="keywordflow">while</span> (count &gt;= start) {
        number++;
        count += mean;
    }
    <span class="keywordflow">return</span> number;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1655dc0cb4ebb2f22de1d1ee29030433"></a><!-- doxytag: member="BaseOverlay::failedNodeRpc" ref="a1655dc0cb4ebb2f22de1d1ee29030433" args="(FailedNodeCall *call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::failedNodeRpc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFailedNodeCall.html">FailedNodeCall</a> *&#160;</td>
          <td class="paramname"><em>call</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01968">1968</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classFailedNodeResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FailedNodeResponse</a>* failedNodeResponse =
        <span class="keyword">new</span> <a class="code" href="classFailedNodeResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FailedNodeResponse</a>(<span class="stringliteral">&quot;FailedNodeResponse&quot;</span>);
    failedNodeResponse-&gt;<a class="code" href="classFailedNodeResponse.html#ab5d9127eed8cdca17366704abc9e942e">setTryAgain</a>(<a class="code" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7" title="Handles a failed node.">handleFailedNode</a>(call-&gt;<a class="code" href="classFailedNodeCall.html#a5a47646a10bc9e34503a4635121ef85c">getFailedNode</a>()));
    failedNodeResponse-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#ae470e5deb63f7debd17b8666514dae46">FAILEDNODERESPONSE_L</a>(failedNodeResponse));

    <span class="keywordflow">if</span> (call-&gt;hasObject(<span class="stringliteral">&quot;findNodeExt&quot;</span>)) {
        cPacket* findNodeExt = check_and_cast&lt;cPacket*&gt;(
                                    call-&gt;removeObject(<span class="stringliteral">&quot;findNodeExt&quot;</span>));
        failedNodeResponse-&gt;addObject(findNodeExt);
        failedNodeResponse-&gt;addBitLength(findNodeExt-&gt;getBitLength());
    }

    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">numFailedNodeResponseSent</a>++; <a class="code" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">bytesFailedNodeResponseSent</a> +=
                     failedNodeResponse-&gt;getByteLength());

    <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>(call, failedNodeResponse);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7cbdce336237331b67a3c69c4e43d489"></a><!-- doxytag: member="BaseOverlay::findNode" ref="a7cbdce336237331b67a3c69c4e43d489" args="(const OverlayKey &amp;key, int numRedundantNodes, int numSiblings, BaseOverlayMessage *msg=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a> * BaseOverlay::findNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numRedundantNodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSiblings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements the find node call. </p>
<p>This method simply returns the closest nodes known in the corresponding routing topology. If the node is a sibling for this key (isSiblingFor(key) = true), this method returns all numSiblings siblings, with the closest neighbor to the key first.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The lookup key. </td></tr>
    <tr><td class="paramname">numRedundantNodes</td><td>Maximum number of next hop nodes to return. </td></tr>
    <tr><td class="paramname">numSiblings</td><td>number of siblings to return </td></tr>
    <tr><td class="paramname">msg</td><td>A pointer to the <a class="el" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a> or <a class="el" href="classFindNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeCall</a> message of this lookup. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>NodeVector with closest nodes. </dd></dl>

<p>Reimplemented in <a class="el" href="classoversim_1_1Chord.html#a4f5cc75c40ceedbfc4f41b215358bdea">oversim::Chord</a>, <a class="el" href="classBroose.html#a7af9754f05bb7e0e7a53a9334ada5784">Broose</a>, <a class="el" href="classoversim_1_1Koorde.html#a0b50911a5d0a1bbb4dc277d6854e9a7c">oversim::Koorde</a>, <a class="el" href="classHTopology.html#a476f055a94b0a4e90b13b0b7793a7098">HTopology</a>, <a class="el" href="classKademlia.html#aafad68d123da52e5fefb719699ed2dc3">Kademlia</a>, <a class="el" href="classBasePastry.html#a3f8ba63e19c092f9ecf4d5ecb1817061">BasePastry</a>, and <a class="el" href="classMyOverlay.html#a9bcbf789e463e45f5d8c2028e8568ca7">MyOverlay</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01696">1696</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="IterativeLookup_8cc_source.html#l00910">IterativePathLookup::handleTimeout()</a>, and <a class="el" href="IterativeLookup_8cc_source.html#l00131">IterativeLookup::start()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;findNode: Not implemented!&quot;</span>);
    <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50680d9b44a779f314baeab200da61dc"></a><!-- doxytag: member="BaseOverlay::findNodeRpc" ref="a50680d9b44a779f314baeab200da61dc" args="(FindNodeCall *call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::findNodeRpc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFindNodeCall.html">FindNodeCall</a> *&#160;</td>
          <td class="paramname"><em>call</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01891">1891</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if this node is malicious don&#39;t answer a findNodeCall</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e" title="Returns true, if node is malicious.">isMalicious</a>() &amp;&amp; <a class="code" href="classBaseOverlay.html#ab53aaadb5dfe6fea1ac6b90db356cc52" title="if node is malicious, it tries a findNode attack">dropFindNodeAttack</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::findNodeRpc() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Node ignores findNodeCall because this node is malicious&quot;</span>
           &lt;&lt; endl;
        <span class="keyword">delete</span> call;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="classFindNodeResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeResponse</a>* findNodeResponse =
        <span class="keyword">new</span> <a class="code" href="classFindNodeResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeResponse</a>(<span class="stringliteral">&quot;FindNodeResponse&quot;</span>);

    findNodeResponse-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#adf1e0e3719d7a62675c9c873cee6155e">FINDNODERESPONSE_L</a>(findNodeResponse));
    <a class="code" href="classBaseKeySortedVector.html">NodeVector</a>* nextHops = <a class="code" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode</a>(call-&gt;<a class="code" href="classFindNodeCall.html#a1be5a1314a95df730b18ac73b08d07e8">getLookupKey</a>(),
                                    call-&gt;<a class="code" href="classFindNodeCall.html#ad145ac485f8da308c4b976802cfa48ae">getNumRedundantNodes</a>(),
                                    call-&gt;<a class="code" href="classFindNodeCall.html#ad9bb40597926cfc521e7eb8e10b5f14d">getExhaustiveIterative</a>() ? -1 : call-&gt;<a class="code" href="classFindNodeCall.html#ac5a68f5e9f62d37613c5ce47a9348a92">getNumSiblings</a>(), call);

    findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#aafe7a51c910c28bec242629aef2146df">setClosestNodesArraySize</a>(nextHops-&gt;size());
    <span class="keywordflow">for</span> (uint32_t i=0; i &lt; nextHops-&gt;size(); i++) {
        findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a010c092191009895499369eb5920ef0b">setClosestNodes</a>(i, (*nextHops)[i]);
    }

    <span class="keywordtype">bool</span> err;
    <span class="keywordflow">if</span> (!call-&gt;<a class="code" href="classFindNodeCall.html#ad9bb40597926cfc521e7eb8e10b5f14d">getExhaustiveIterative</a>() &amp;&amp;
            <a class="code" href="classBaseOverlay.html#ab5887b89ba9da5973068e834feb69ce7" title="Query if a node is among the siblings for a given key.">isSiblingFor</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, call-&gt;<a class="code" href="classFindNodeCall.html#a1be5a1314a95df730b18ac73b08d07e8">getLookupKey</a>(), call-&gt;<a class="code" href="classFindNodeCall.html#ac5a68f5e9f62d37613c5ce47a9348a92">getNumSiblings</a>(),
                         &amp;err)) {
        findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a09db619c7bd35b89520e37c9ece0b572">setSiblings</a>(<span class="keyword">true</span>);
    }

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e" title="Returns true, if node is malicious.">isMalicious</a>() &amp;&amp; <a class="code" href="classBaseOverlay.html#a319a6b16e55af5e67fbbf65f6d07d5d9" title="if node is malicious, it tries a invalidNode attack">invalidNodesAttack</a>) {
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc" title="if node is malicious, it tries a isSibling attack">isSiblingAttack</a>) {
            findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a09db619c7bd35b89520e37c9ece0b572">setSiblings</a>(<span class="keyword">true</span>);
        } <span class="keywordflow">else</span> {
            findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a09db619c7bd35b89520e37c9ece0b572">setSiblings</a>(<span class="keyword">false</span>);
        }

        <span class="keywordtype">int</span> resultSize = <a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc" title="if node is malicious, it tries a isSibling attack">isSiblingAttack</a> ? call-&gt;<a class="code" href="classFindNodeCall.html#ac5a68f5e9f62d37613c5ce47a9348a92">getNumSiblings</a>() :
                                           call-&gt;<a class="code" href="classFindNodeCall.html#ad145ac485f8da308c4b976802cfa48ae">getNumRedundantNodes</a>();

        findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#aafe7a51c910c28bec242629aef2146df">setClosestNodesArraySize</a>(resultSize);
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; resultSize; i++) {
            findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a010c092191009895499369eb5920ef0b">setClosestNodes</a>(i,
                    <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>(call-&gt;<a class="code" href="classFindNodeCall.html#a1be5a1314a95df730b18ac73b08d07e8">getLookupKey</a>() + i, IPvXAddress(IPAddress(
                    <a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc" title="if node is malicious, it tries a isSibling attack">isSiblingAttack</a> ? (424242+i) : intuniform(42,123123))), 42));
<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>            <span class="comment">// was not used for evaluation</span>
            <span class="keywordflow">if</span> ((i == 0) &amp;&amp; <a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc" title="if node is malicious, it tries a isSibling attack">isSiblingAttack</a>) {
                findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a010c092191009895499369eb5920ef0b">setClosestNodes</a>(0, <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
            }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>        }
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e" title="Returns true, if node is malicious.">isMalicious</a>() &amp;&amp; <a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc" title="if node is malicious, it tries a isSibling attack">isSiblingAttack</a>) {
        findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a09db619c7bd35b89520e37c9ece0b572">setSiblings</a>(<span class="keyword">true</span>);
        findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#aafe7a51c910c28bec242629aef2146df">setClosestNodesArraySize</a>(1);
        findNodeResponse-&gt;<a class="code" href="classFindNodeResponse.html#a010c092191009895499369eb5920ef0b">setClosestNodes</a>(0, <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
    }

    findNodeResponse-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#adf1e0e3719d7a62675c9c873cee6155e">FINDNODERESPONSE_L</a>(findNodeResponse));

    <span class="keywordflow">if</span> (call-&gt;hasObject(<span class="stringliteral">&quot;findNodeExt&quot;</span>)) {
        cPacket* findNodeExt = check_and_cast&lt;cPacket*&gt;(call-&gt;removeObject(<span class="stringliteral">&quot;findNodeExt&quot;</span>));
        findNodeResponse-&gt;addObject(findNodeExt);
        findNodeResponse-&gt;addBitLength(findNodeExt-&gt;getBitLength());
    }

    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">numFindNodeResponseSent</a>++; <a class="code" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">bytesFindNodeResponseSent</a> +=
        findNodeResponse-&gt;getByteLength());

    <span class="keyword">delete</span> nextHops;

    <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>(call, findNodeResponse);
}
</pre></div>
</div>
</div>
<a class="anchor" id="aed7e3f36b2c70cbdb0e6daa32925917c"></a><!-- doxytag: member="BaseOverlay::finish" ref="aed7e3f36b2c70cbdb0e6daa32925917c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::finish </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collects statistical data </p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00305">305</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseOverlay.html#a8db85b9c706d04007154761d5a0cec16" title="collects statistical data in derived class">finishOverlay</a>();

    simtime_t time = <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a610799ebfbf64696c59b811870cc8300">calcMeasuredLifetime</a>(<a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>);

    <span class="keywordflow">if</span> (time &gt;= <a class="code" href="classGlobalStatistics.html#a169810c78519b271f7e32fdc7c9fc641" title="minimum useful measured lifetime in seconds">GlobalStatistics::MIN_MEASURED</a>) {

        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9" title="collect delay for single hops">collectPerHopDelay</a>) {
            std::ostringstream singleHopName;
            HopDelayRecord* hdrl = NULL;
            HopDelayRecord* hdr = NULL;
            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a>.size();) {
                hdrl = <a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a>[i++];
                hdr = hdrl;
                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 1; j &lt;= i; ++j) {
                    <span class="keywordflow">if</span> (hdr-&gt;count == 0) <span class="keywordflow">continue</span>;
                    singleHopName.str(<span class="stringliteral">&quot;&quot;</span>);
                    singleHopName &lt;&lt; <span class="stringliteral">&quot;BaseOverlay: Average Delay in Hop &quot;</span>
                                  &lt;&lt; j &lt;&lt; <span class="stringliteral">&quot; of &quot;</span> &lt;&lt; i;
                    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(singleHopName.str(),
                                          SIMTIME_DBL(hdr-&gt;val / hdr-&gt;count));
                    ++hdr;
                }
                <span class="keyword">delete</span>[] hdrl;
            }
            <a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a>.clear();
        }

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Join Retries&quot;</span>, <a class="code" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b" title="number of join retries">joinRetries</a>);

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent App Data Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4" title="number of sent app data packets (incl. forwarded packets)">numAppDataSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent App Data Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4" title="number of sent app data bytes (incl. forwarded bytes)">bytesAppDataSent</a> / time);
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#abef37828b7f070044154f53bcd2a765b" title="Returns true if overlay is one in an array, inside a SimpleMultiOverlayHost.">isInSimpleMultiOverlayHost</a>()) {
            <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Internal Sent Messages/s&quot;</span>,
                                        <a class="code" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef" title="number of packets received from same host but different port (SimpleMultiOverlayHost)">numInternalReceived</a> / time);
            <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Internal Sent Bytes/s&quot;</span>,
                                        <a class="code" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae" title="number of bytes received from same host but different port (SimpleMultiOverlayHost)">bytesInternalReceived</a> / time);
        }
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent App Lookup Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f" title="number of sent app loookup packets (incl. forwarded packets)">numAppLookupSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent App Lookup Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4" title="number of sent app lookup bytes (incl. forwarded bytes)">bytesAppLookupSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Maintenance Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa" title="number of sent maintenance packets (incl. forwarded packets)">numMaintenanceSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Maintenance Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4" title="number of sent maintenance bytes (incl. forwarded bytes)">bytesMaintenanceSent</a> / time);

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Total Messages/s&quot;</span>,
                                    (<a class="code" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4" title="number of sent app data packets (incl. forwarded packets)">numAppDataSent</a> + <a class="code" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f" title="number of sent app loookup packets (incl. forwarded packets)">numAppLookupSent</a> +
                                        <a class="code" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa" title="number of sent maintenance packets (incl. forwarded packets)">numMaintenanceSent</a>) / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Total Bytes/s&quot;</span>,
                                    (<a class="code" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4" title="number of sent app data bytes (incl. forwarded bytes)">bytesAppDataSent</a> + <a class="code" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4" title="number of sent app lookup bytes (incl. forwarded bytes)">bytesAppLookupSent</a> +
                                            <a class="code" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4" title="number of sent maintenance bytes (incl. forwarded bytes)">bytesMaintenanceSent</a>) / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FindNode Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">numFindNodeSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FindNode Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">bytesFindNodeSent</a> / time);

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FindNodeResponse Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">numFindNodeResponseSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FindNodeResponse Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">bytesFindNodeResponseSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FailedNode Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">numFailedNodeSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FailedNode Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">bytesFailedNodeSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FailedNodeResponse Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">numFailedNodeResponseSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent FailedNodeResponse Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">bytesFailedNodeResponseSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received App Data Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898" title="number of received app data packets (incl. packets to be forwarded )">numAppDataReceived</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received App Data Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76" title="number of received app data bytes (incl. bytes to be forwarded)">bytesAppDataReceived</a> / time);
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#abef37828b7f070044154f53bcd2a765b" title="Returns true if overlay is one in an array, inside a SimpleMultiOverlayHost.">isInSimpleMultiOverlayHost</a>()) {
            <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Internal Received Messages/s&quot;</span>,
                                        <a class="code" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef" title="number of packets received from same host but different port (SimpleMultiOverlayHost)">numInternalReceived</a> / time);
            <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Internal Received Bytes/s&quot;</span>,
                                        <a class="code" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae" title="number of bytes received from same host but different port (SimpleMultiOverlayHost)">bytesInternalReceived</a> / time);
        }
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received App Lookup Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca" title="number of received app lookup packets (incl. packets to be forwarded)">numAppLookupReceived</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received App Lookup Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527" title="number of received app lookup bytes (incl. bytes to be forwarded)">bytesAppLookupReceived</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received Maintenance Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46" title="number of received maintenance packets (incl. packets to be forwarded)">numMaintenanceReceived</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received Maintenance Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb" title="number of received maintenance bytes (incl. bytes to be forwarded)">bytesMaintenanceReceived</a> / time);

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received Total Messages/s&quot;</span>,
                                    (<a class="code" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898" title="number of received app data packets (incl. packets to be forwarded )">numAppDataReceived</a> + <a class="code" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca" title="number of received app lookup packets (incl. packets to be forwarded)">numAppLookupReceived</a> +
                                            <a class="code" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46" title="number of received maintenance packets (incl. packets to be forwarded)">numMaintenanceReceived</a>)/time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Received Total Bytes/s&quot;</span>,
                                    (<a class="code" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76" title="number of received app data bytes (incl. bytes to be forwarded)">bytesAppDataReceived</a> + <a class="code" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527" title="number of received app lookup bytes (incl. bytes to be forwarded)">bytesAppLookupReceived</a> +
                                            <a class="code" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb" title="number of received maintenance bytes (incl. bytes to be forwarded)">bytesMaintenanceReceived</a>)/time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded App Data Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99" title="number of forwarded app data packets">numAppDataForwarded</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded App Data Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6" title="number of forwarded app data bytes at out-gate">bytesAppDataForwarded</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded App Lookup Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd" title="number of forwarded app lookup packets">numAppLookupForwarded</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded App Lookup Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7" title="number of forwarded app lookup bytes at out-gate">bytesAppLookupForwarded</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded Maintenance Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7" title="number of forwarded maintenance packets">numMaintenanceForwarded</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded Maintenance Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b" title="number of forwarded maintenance bytes at out-gate">bytesMaintenanceForwarded</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded Total Messages/s&quot;</span>,
                                    (<a class="code" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99" title="number of forwarded app data packets">numAppDataForwarded</a> + <a class="code" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd" title="number of forwarded app lookup packets">numAppLookupForwarded</a> +
                                            <a class="code" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7" title="number of forwarded maintenance packets">numMaintenanceForwarded</a>) / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Forwarded Total Bytes/s&quot;</span>,
                                    (<a class="code" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6" title="number of forwarded app data bytes at out-gate">bytesAppDataForwarded</a> + <a class="code" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7" title="number of forwarded app lookup bytes at out-gate">bytesAppLookupForwarded</a> +
                                            <a class="code" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b" title="number of forwarded maintenance bytes at out-gate">bytesMaintenanceForwarded</a>) / time);

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Dropped Messages/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Dropped Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> / time);

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Measured Session Time&quot;</span>,
                                    SIMTIME_DBL(simTime() - <a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>));

        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Ping Messages/s&quot;</span>,
                                    <a class="code" href="classBaseRpc.html#a16d5d34610391c442e9f9cde71b2518a">numPingSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Ping Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseRpc.html#a5653805d9dcb9a53bc240b388e735389">bytesPingSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Ping Response Messages/s&quot;</span>,
                                    <a class="code" href="classBaseRpc.html#a5f194baa9787f523bdbf6f8639356a62">numPingResponseSent</a> / time);
        <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent Ping Response Bytes/s&quot;</span>,
                                    <a class="code" href="classBaseRpc.html#a8525bc500487a2641a2a947b0d5e1946">bytesPingResponseSent</a> / time);

        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a077a698fb5f760290bc67e4a50dfed9e">getMeasureAuthBlock</a>()) {
            <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;BaseOverlay: Sent AuthBlock Bytes/s&quot;</span>,
                                        <a class="code" href="classBaseOverlay.html#a30e11530c77c2164f0a5c98a489a9fab" title="number of bytes sent for rpc message signatures">bytesAuthBlockSent</a> / time);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="abaaca6fe44d8e317d56c90a14e0fcada"></a><!-- doxytag: member="BaseOverlay::finishLookups" ref="abaaca6fe44d8e317d56c90a14e0fcada" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::finishLookups </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>deletes entries in lookups </p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01249">1249</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">while</span> (<a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a>.size() &gt; 0) {
        (*<a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a>.begin())-&gt;abortLookup();
    }
    <a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a>.clear();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8db85b9c706d04007154761d5a0cec16"></a><!-- doxytag: member="BaseOverlay::finishOverlay" ref="a8db85b9c706d04007154761d5a0cec16" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::finishOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collects statistical data in derived class </p>

<p>Reimplemented in <a class="el" href="classHTopology.html#aa1d359fa9f4ee3a8f43b1e55b8dbe5c7">HTopology</a>, <a class="el" href="classKademlia.html#a9682b56476fa08cd0af341312d2c8186">Kademlia</a>, <a class="el" href="classBasePastry.html#aa38739065522ad67152dd4ff604ef759">BasePastry</a>, <a class="el" href="classoversim_1_1Nice.html#a93acdc685e2e7ad1ada75063db007463">oversim::Nice</a>, <a class="el" href="classGia.html#abc588b36819fb28ca69db4ddbcf4ccc7">Gia</a>, <a class="el" href="classoversim_1_1Koorde.html#a11bccef58fe7f9eae778645d38c95451">oversim::Koorde</a>, <a class="el" href="classoversim_1_1Chord.html#a17c0e05ef938b225dacecc6c9f03b1d0">oversim::Chord</a>, <a class="el" href="classBroose.html#a612a233a588034ad82589aab7769e196">Broose</a>, <a class="el" href="classMyOverlay.html#a2c99f0d95f68f8135dac6acc3a24011b">MyOverlay</a>, <a class="el" href="classNTree.html#afd127335c6ff83e01ce7b93b24df2f29">NTree</a>, <a class="el" href="classQuon.html#a2e3fd357706467ba1238bdd8382f5be8">Quon</a>, <a class="el" href="classVast.html#a5ebb4aad5fd0a309cae1d09762b6c270">Vast</a>, <a class="el" href="classPubSubLobby.html#a75b9ef6a08fd634c142d6cbd7d6f0f68">PubSubLobby</a>, and <a class="el" href="classPubSubMMOG.html#ab097bce7563e87ecf690559095908207">PubSubMMOG</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00446">446</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="afcab85a6c5a4f8aa70a65ecabaa78180"></a><!-- doxytag: member="BaseOverlay::getBitsPerDigit" ref="afcab85a6c5a4f8aa70a65ecabaa78180" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual uint8_t BaseOverlay::getBitsPerDigit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classBasePastry.html#a64142ec5a4c2536f6633c1a05dd30726">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00813">813</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00753">NeighborCache::setCbrNodeId()</a>, and <a class="el" href="GlobalViewBuilder_8cc_source.html#l00289">GlobalViewBuilder::spreadGlobalView()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> 1; };
</pre></div>
</div>
</div>
<a class="anchor" id="aab1198e37993729eaf87350d5b83f9a0"></a><!-- doxytag: member="BaseOverlay::getBootstrapList" ref="aab1198e37993729eaf87350d5b83f9a0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBootstrapList.html">BootstrapList</a>&amp; BaseOverlay::getBootstrapList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00817">817</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="NeighborCache_8cc_source.html#l00658">NeighborCache::handleReadyMessage()</a>, and <a class="el" href="NeighborCache_8cc_source.html#l00705">NeighborCache::prepareOverlay()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> *<a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>;}
</pre></div>
</div>
</div>
<a class="anchor" id="a3aba2b6e93094d3cc8107d33db4b5244"></a><!-- doxytag: member="BaseOverlay::getCompModule" ref="a3aba2b6e93094d3cc8107d33db4b5244" args="(CompType compType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cModule * BaseOverlay::getCompModule </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&#160;</td>
          <td class="paramname"><em>compType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l02069">2069</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseOverlay_8cc_source.html#l00077">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    CompModuleList::iterator it = <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>.find(compType);

    <span class="keywordflow">if</span> (it != <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>.end())
        <span class="keywordflow">return</span> it-&gt;second.first;
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5fc03fda227c0cca828109842af1b320"></a><!-- doxytag: member="BaseOverlay::getCompRpcGate" ref="a5fc03fda227c0cca828109842af1b320" args="(CompType compType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cGate * BaseOverlay::getCompRpcGate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&#160;</td>
          <td class="paramname"><em>compType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l02079">2079</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseRpc_8cc_source.html#l00620">BaseRpc::sendRpcMessageWithTransport()</a>.</p>
<div class="fragment"><pre class="fragment">{
    CompModuleList::iterator it = <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>.find(compType);

    <span class="keywordflow">if</span> (it != <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>.end())
        <span class="keywordflow">return</span> it-&gt;second.second;
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> NULL;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a018f1d79a4f2aa314c2c68f9bface3c6"></a><!-- doxytag: member="BaseOverlay::getCreationTime" ref="a018f1d79a4f2aa314c2c68f9bface3c6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const simtime_t&amp; BaseOverlay::getCreationTime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00290">290</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="ab4dadd02486560de3a58773b3a90fb41"></a><!-- doxytag: member="BaseOverlay::getMaxNumRedundantNodes" ref="ab4dadd02486560de3a58773b3a90fb41" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseOverlay::getMaxNumRedundantNodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query the maximum number of redundant next hop nodes that are returned by <a class="el" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode()</a>. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>int number of redundant nodes returned by <a class="el" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode()</a>. </dd></dl>

<p>Reimplemented in <a class="el" href="classoversim_1_1Chord.html#a54f62061b8333f151032f710abcfb831">oversim::Chord</a>, <a class="el" href="classBroose.html#a510ec0b3d3378fc4ebb2a276cdff829b">Broose</a>, <a class="el" href="classHTopology.html#af464a88cefc8c6a7c4b23a9864f0da26">HTopology</a>, <a class="el" href="classKademlia.html#a5127b16ed36be0a202ecb7b890a7e634">Kademlia</a>, <a class="el" href="classMyOverlay.html#a6e8306f62ca6378f317d401b378af724">MyOverlay</a>, and <a class="el" href="classBasePastry.html#acad786a6138720f76e80ceb9a93d0e12">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00714">714</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="IterativeLookup_8cc_source.html#l00131">IterativeLookup::start()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;getMaxNumRedundantNodes()&quot;</span>);

    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;getMaxNumRedundantNodes: Not implemented!&quot;</span>);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd3058ad15b470e024500dd4872e2f09"></a><!-- doxytag: member="BaseOverlay::getMaxNumSiblings" ref="acd3058ad15b470e024500dd4872e2f09" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseOverlay::getMaxNumSiblings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query the maximum number of siblings (nodes close to a key) that are maintained by this overlay protocol. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>int number of siblings. </dd></dl>

<p>Reimplemented in <a class="el" href="classoversim_1_1Chord.html#af893e5128428ac817fb084339a08a9be">oversim::Chord</a>, <a class="el" href="classBroose.html#ade0172a588daa00efd1a0db945579047">Broose</a>, <a class="el" href="classHTopology.html#ab518e13e448e6cdc3d613831cab095d5">HTopology</a>, <a class="el" href="classKademlia.html#a7253ff80d709265f6e74d3ebf4e691ad">Kademlia</a>, <a class="el" href="classMyOverlay.html#a4afcf38dab3c871471fc658c7a12ee4c">MyOverlay</a>, and <a class="el" href="classBasePastry.html#a23fca1965b3c6240fdcfb19bbf8e5a02">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00705">705</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="KBRTestApp_8cc_source.html#l00160">KBRTestApp::handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;getMaxNumSiblings()&quot;</span>);

    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;getMaxNumSiblings: Not implemented!&quot;</span>);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a077a698fb5f760290bc67e4a50dfed9e"></a><!-- doxytag: member="BaseOverlay::getMeasureAuthBlock" ref="a077a698fb5f760290bc67e4a50dfed9e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::getMeasureAuthBlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00815">815</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#ab0b0274a06e70c91e8bd8df0c23d435f" title="if true, measure the overhead of signatures in rpc messages">measureAuthBlock</a>; }
</pre></div>
</div>
</div>
<a class="anchor" id="adff10d8324516c75347fe67f11897435"></a><!-- doxytag: member="BaseOverlay::getState" ref="adff10d8324516c75347fe67f11897435" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a> BaseOverlay::getState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classQuon.html#a68e3080e90a657d328c4234f3d75fac7">Quon</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00102">102</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="ConnectivityProbe_8cc_source.html#l00257">ConnectivityProbe::extractTopology()</a>, and <a class="el" href="hstreaming_8cc_source.html#l00098">HStreaming::handleReadyMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="a92e0d3f96a5716245465e05da60ef487"></a><!-- doxytag: member="BaseOverlay::getThisCompType" ref="a92e0d3f96a5716245465e05da60ef487" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a> BaseOverlay::getThisCompType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the component type of this module. </p>
<p>This method is overloaded by BaseOverlay/BaseApp and returns the appropriate component type of this module.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the component type of this module </dd></dl>

<p>Implements <a class="el" href="classBaseRpc.html#aa76a787b8fbbc33de93646edc67f0e23">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00458">458</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="Quon_8cc_source.html#l00121">Quon::changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00106">Vast::changeState()</a>, <a class="el" href="Quon_8cc_source.html#l00530">Quon::handleNodeGracefulLeaveNotification()</a>, and <a class="el" href="Vast_8cc_source.html#l00568">Vast::handleNodeLeaveNotification()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ead1b904580b02f8adaa1ab2de239c4c79">OVERLAY_COMP</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aef92d042c22b47c123e59a831acb7033"></a><!-- doxytag: member="BaseOverlay::handleAppMessage" ref="aef92d042c22b47c123e59a831acb7033" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::handleAppMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes "timer" self-messages. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A self-message Processes non-commonAPI messages</td></tr>
    <tr><td class="paramname">msg</td><td>non-commonAPIMessage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classGia.html#a58ce19fdd1b582e6fabb236b6eeab391">Gia</a>, <a class="el" href="classoversim_1_1Nice.html#af750b796fbab34f8fc9c48cca7a26ddb">oversim::Nice</a>, <a class="el" href="classNTree.html#aa40977b963b16f3c26043ccd193fcd43">NTree</a>, <a class="el" href="classQuon.html#ae1e1b8da4dc8347f67905eff7b01b458">Quon</a>, <a class="el" href="classVast.html#a9bfca7e546baa11222621b528659efa7">Vast</a>, and <a class="el" href="classPubSubMMOG.html#aa755315cd277b3c3cad5522cb7acb9dc">PubSubMMOG</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01087">1087</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac647b32e360b4db1f0eb53b096437fd8"></a><!-- doxytag: member="BaseOverlay::handleBaseOverlayMessage" ref="ac647b32e360b4db1f0eb53b096437fd8" args="(BaseOverlayMessage *msg, const OverlayKey &amp;destKey=OverlayKey::UNSPECIFIED_KEY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::handleBaseOverlayMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>destKey</em> = <code><a class="el" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75">OverlayKey::UNSPECIFIED_KEY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles a <a class="el" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a><br/>
 </p>
<p>Handles BaseOverlayMessages of type OVERLAYSIGNALING, RPC, APPDATA or OVERLAYROUTE.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message to be handled </td></tr>
    <tr><td class="paramname">destKey</td><td>the destination key of the message </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00877">877</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span> (msg-&gt;<a class="code" href="classBaseOverlayMessage.html#a406e342c0841abe2d82b9bb5c1e2aabd">getType</a>()) {
    <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17ea7c7b80e64b0ee54f9c64b4547d82e7fa">OVERLAYSIGNALING</a>:
        <a class="code" href="classBaseOverlay.html#a31d7dd39ddc9e62ad92f69f6d7210344" title="Processes messages from underlay.">handleUDPMessage</a>(msg);
        <span class="keywordflow">return</span>;

    <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17ea7f7e32ed10aea1dd73b80e96c70e8abf">RPC</a>: {
        <span class="comment">// process rpc-messages</span>
        <a class="code" href="classBaseRpcMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRpcMessage</a>* rpcMsg = check_and_cast&lt;<a class="code" href="classBaseRpcMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRpcMessage</a>*&gt;(msg);

        <span class="comment">// TODO destKey -&gt; overlayCtrlInfo</span>
        <a class="code" href="classBaseRpc.html#a26c06fa9558c497e6dfe1ba6c5153042" title="Handles incoming rpc messages and delegates them to the corresponding listeners or handlers...">internalHandleRpcMessage</a>(rpcMsg);
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17eab0641a3f5bcb1e08ee72afe9583ff5e6">APPDATA</a>: {
        <span class="comment">//TODO use route messages? here: set transport type to ROUTE for &quot;naked&quot;</span>
        <span class="comment">// app messages</span>
        <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo = check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;(msg-&gt;getControlInfo());
        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a36db08008216830aaa46b21ee16db58a">setTransportType</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>);

        <a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>* baseAppDataMsg =
            check_and_cast&lt;<a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>*&gt;(msg);
        <a class="code" href="classBaseOverlay.html#a432f79071b87baece93311300cfda0c3" title="Calls deliver function in application.">callDeliver</a>(baseAppDataMsg, destKey);
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17ea9fb39f8e1c5f2ff00e45bb7294e5524f">OVERLAYROUTE</a>: {
        <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* baseRouteMsg =
            check_and_cast&lt;<a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>*&gt;(msg);

        <span class="comment">// collect delay-value of completed hop</span>
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9" title="collect delay for single hops">collectPerHopDelay</a>) {
            baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#adae1180a932d161a07885217adcf2213">setHopDelayArraySize</a>(baseRouteMsg-&gt;
                                               getHopDelayArraySize() + 1);
            baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a5e11a0d687b818e45879e33fac3df564">setHopDelay</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ae75d0790b13698bfa9d31e2e2e04983b">getHopDelayArraySize</a>() - 1,
                                      simTime() - baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a31086f2b50373a749bf986c8ee1bab0f">getHopStamp</a>());
        }

        <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo
            = check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;(baseRouteMsg
                                               -&gt;removeControlInfo());
        <span class="comment">// set transport type</span>
        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a36db08008216830aaa46b21ee16db58a">setTransportType</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>);

        <span class="comment">// source routing: save visited nodes, copy next hops</span>
        std::vector&lt;TransportAddress&gt; sourceRoute;
        <span class="keywordflow">if</span> ((baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4037dda18976c8d98ef3f9ed663f8dc7">getNextHopsArraySize</a>() &gt; 0) ||
             (baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>() == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad8c4eefed3d826e5da402fe582cad2c1">RECURSIVE_SOURCE_ROUTING</a>) ||
             <a class="code" href="classBaseOverlay.html#a61186fd8bd7368c8a91a63ecc9c62a89" title="record visited hops on route">recordRoute</a>) {
            <span class="comment">// store the TransportAddress of the sender in the visited list</span>
            baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a152289adca72ada1c7a8823d08e2164c">setVisitedHopsArraySize</a>(baseRouteMsg
                                          -&gt;getVisitedHopsArraySize() + 1);
            baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4cc0a72bbee29facef3914e318017b76">setVisitedHops</a>(baseRouteMsg
                                          -&gt;getVisitedHopsArraySize() - 1,
                                        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad12b7ac74244fb7ab79ebf41e05fe79c">getLastHop</a>());

            <span class="comment">// remove nodes from next hops and copy them to sourceRoute</span>
            <span class="keywordflow">if</span> (baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4037dda18976c8d98ef3f9ed663f8dc7">getNextHopsArraySize</a>() &gt; 0) {
                sourceRoute.resize(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4037dda18976c8d98ef3f9ed663f8dc7">getNextHopsArraySize</a>()- 1);
                <span class="keywordflow">for</span> (uint32_t i = 1; i &lt; baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4037dda18976c8d98ef3f9ed663f8dc7">getNextHopsArraySize</a>();
                     ++i) {
                    sourceRoute[i - 1] = baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a23f57254381410520aaa67dd52b0bc6c">getNextHops</a>(i);
                }
                baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a3cb14c09b287d613f26d58ad39fec4d0">setNextHopsArraySize</a>(0);
            }
        }

        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a033544e6c2005d7d468cab33547292b8">setSrcNode</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#af9787d89915f01a2055e920148015e17">getSrcNode</a>());

        <span class="comment">// decapsulate msg if node is sibling for destKey</span>
        <span class="comment">// or message is at its destination node</span>
        <span class="keywordtype">bool</span> err;
        <span class="keywordflow">if</span> ((sourceRoute.size() == 0) &amp;&amp;
            (baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() ||
             <a class="code" href="classBaseOverlay.html#ab5887b89ba9da5973068e834feb69ce7" title="Query if a node is among the siblings for a given key.">isSiblingFor</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>(), 1, &amp;err)
             <span class="comment">/*&amp;&amp; !err*/</span>)) {
            overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ac038719715302b645e9f13fdb85db75b">setHopCount</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ab59d2969c812aa35d132a68fc2baf819">getHopCount</a>());
            overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a3a396692c3655f8277f57d8ca8bdb311">setRoutingType</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>());

            <span class="keywordflow">if</span> (baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4d937e983eb4887400e41749b55ebecb">getVisitedHopsArraySize</a>() &gt; 0) {
                <span class="comment">// recorded route available =&gt; add to srcNode</span>
                <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> srcRoute(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#af9787d89915f01a2055e920148015e17">getSrcNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>(),
                                   baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a5e4624df761b01f0df433ef0ace1c597">getVisitedHops</a>(0));

                <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4d937e983eb4887400e41749b55ebecb">getVisitedHopsArraySize</a>(); ++i) {
                    srcRoute.<a class="code" href="classTransportAddress.html#a11394d4f782e430e244b9c46226c5cab" title="Appends a source route to this TransportAddress.">appendSourceRoute</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a5e4624df761b01f0df433ef0ace1c597">getVisitedHops</a>(i));
                }

                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a5a7c2dbadb3b6878d0d34a8fe65590d1">setSrcRoute</a>(srcRoute);
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>()) {
                <span class="comment">// directly received (neither key routed nor source routed)</span>
                <span class="comment">// TODO: does this happen for a BaseRouteMessage?</span>
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a5a7c2dbadb3b6878d0d34a8fe65590d1">setSrcRoute</a>(
                        <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#af9787d89915f01a2055e920148015e17">getSrcNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>(),
                                   overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad12b7ac74244fb7ab79ebf41e05fe79c">getLastHop</a>()));
            } <span class="keywordflow">else</span> {
                <span class="comment">// route to key and no recorded route available</span>
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a5a7c2dbadb3b6878d0d34a8fe65590d1">setSrcRoute</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#af9787d89915f01a2055e920148015e17">getSrcNode</a>());
            }

            <span class="comment">// copy visited nodes to control info</span>
            overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#abc4f5e4539b4858443cf29523727a995">setVisitedHopsArraySize</a>(
                    baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4d937e983eb4887400e41749b55ebecb">getVisitedHopsArraySize</a>());

            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4d937e983eb4887400e41749b55ebecb">getVisitedHopsArraySize</a>();
                 ++i) {
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad74efeab61d168e97bde39075847b127">setVisitedHops</a>(i,
                        baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a5e4624df761b01f0df433ef0ace1c597">getVisitedHops</a>(i));
            }

            <a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* tmpMsg
                = check_and_cast&lt;<a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>*&gt;(baseRouteMsg
                                                      -&gt;decapsulate());
            tmpMsg-&gt;setControlInfo(overlayCtrlInfo);

            <span class="comment">// delay between hops</span>
            <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9" title="collect delay for single hops">collectPerHopDelay</a>) {
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                    <span class="keywordtype">size_t</span> i;
                    <span class="keywordflow">for</span> (i = <a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a>.size();
                             i &lt; baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ae75d0790b13698bfa9d31e2e2e04983b">getHopDelayArraySize</a>();) {
                        <a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a>.push_back(<span class="keyword">new</span> HopDelayRecord[++i]);
                    }

                    i = baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ae75d0790b13698bfa9d31e2e2e04983b">getHopDelayArraySize</a>() - 1;
                    HopDelayRecord* hdr = <a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a>[i];

                    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt;= i; ++j) {
                        hdr[j].count++;
                        hdr[j].val += baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#aadbcf2336edf7d773dfbd6aec4da7b80">getHopDelay</a>(j);
                    }
                );
            }

            <span class="comment">// handle encapsulated message at destination node</span>
            <span class="keywordflow">if</span> (((baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>() == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ae4bd936cbb47803986c83242cbb51867">ITERATIVE_ROUTING</a>)
                    || (baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>() == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad60cf756d6bb24af372d7fe7c279f44d">EXHAUSTIVE_ITERATIVE_ROUTING</a>)
            )
                    || <a class="code" href="classBaseOverlay.html#a42f4c08f6408d155a9907957ecf12d79" title="Hook for forwarded message in recursive lookup mode.">recursiveRoutingHook</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, baseRouteMsg)) {
                <a class="code" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8" title="Handles a BaseOverlayMessage ">handleBaseOverlayMessage</a>(tmpMsg, baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>());
                <span class="keyword">delete</span> baseRouteMsg;
            }
            <span class="keywordflow">return</span>;
        } <span class="keywordflow">else</span> {
            <span class="comment">// forward msg if this node is not responsible for the key</span>
            baseRouteMsg-&gt;setControlInfo(overlayCtrlInfo);

            <span class="comment">// if this node is malicious drop the message</span>
            <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e" title="Returns true, if node is malicious.">isMalicious</a>() &amp;&amp; <a class="code" href="classBaseOverlay.html#a3bcd2bdd704803d7ec8ae77633cf03fa" title="if node is malicious, it drops all received BaseRouteMessages">dropRouteMessageAttack</a>) {
                EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::handleBaseOverlayMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                &lt;&lt; <span class="stringliteral">&quot;    BaseRouteMessage gets dropped because this node is malicious&quot;</span>
                &lt;&lt; endl;
                <span class="comment">//std::cout &lt;&lt; &quot;malicious!&quot; &lt;&lt; std::endl;</span>
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++;
                             <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> += baseRouteMsg-&gt;getByteLength());
                <span class="keyword">delete</span> baseRouteMsg;
                <span class="keywordflow">return</span>;
            }

            <a class="code" href="classBaseOverlay.html#a6f2c598f5d3989a63a8cc7220f1aaf76" title="Sends a message to an overlay node, with the generic routing algorithm.">sendToKey</a>(baseRouteMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>(), baseRouteMsg, 1, sourceRoute);
            <span class="keywordflow">return</span>;
        }
        <span class="keywordflow">break</span>;
    }

    <span class="keywordflow">default</span>:
        EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::handleBaseOverlayMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Received unknown message from UDP of type &quot;</span> &lt;&lt; msg-&gt;getName()
           &lt;&lt; endl;
        <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa53ca4e1b4720ba0d2874afe29eacbf7"></a><!-- doxytag: member="BaseOverlay::handleFailedNode" ref="aa53ca4e1b4720ba0d2874afe29eacbf7" args="(const TransportAddress &amp;failed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::handleFailedNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>failed</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles a failed node. </p>
<p>This method is called whenever a node given by <a class="el" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode()</a> was unreachable. The default implementation does nothing at all.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">failed</td><td>the failed node </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if lookup should retry here </dd></dl>

<p>Reimplemented in <a class="el" href="classoversim_1_1Chord.html#a306a76d59ba7c2b18b7a88975fe62886">oversim::Chord</a>, <a class="el" href="classKademlia.html#aebd62488323d6cebf7812974114ed38b">Kademlia</a>, <a class="el" href="classoversim_1_1Koorde.html#ac783aeb95d5d49ee606da244f2595779">oversim::Koorde</a>, <a class="el" href="classPastry.html#ad94a0f122fe78b1b0002735ce19fea84">Pastry</a>, and <a class="el" href="classBamboo.html#ac33bbf6ffd5a95bb730ce046f921a335">Bamboo</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01712">1712</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00524">BasePastry::handleRpcTimeout()</a>, <a class="el" href="IterativeLookup_8cc_source.html#l00910">IterativePathLookup::handleTimeout()</a>, and <a class="el" href="BasePastry_8cc_source.html#l00273">BasePastry::proxCallback()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//std::cout &lt;&lt; &quot;Mooooo&quot; &lt;&lt; std::endl;</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a870d24a243e4b0d1aeb31ea0861e53a7"></a><!-- doxytag: member="BaseOverlay::handleMessage" ref="a870d24a243e4b0d1aeb31ea0861e53a7" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks for message type and calls corresponding method. </p>
<p><br/>
</p>
<p>Checks for message type (from UDP/App or selfmessage) and calls corresponding method like getRoute(), get(), put(), remove(), <a class="el" href="classBaseRpc.html#ab893c156412e38caa62fe058b229899b">handleTimerEvent()</a>, <a class="el" href="classBaseOverlay.html#aef92d042c22b47c123e59a831acb7033" title="Processes &quot;timer&quot; self-messages.">handleAppMessage()</a> and <a class="el" href="classBaseOverlay.html#a31d7dd39ddc9e62ad92f69f6d7210344" title="Processes messages from underlay.">handleUDPMessage()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The message to be handled </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00729">729</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == <a class="code" href="classBaseOverlay.html#a2e2f70aa82a9b4920877b3a13dd1e0ea">udpGate</a>) {
        UDPControlInfo* udpControlInfo =
            check_and_cast&lt;UDPControlInfo*&gt;(msg-&gt;removeControlInfo());
        <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo = <span class="keyword">new</span> <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>;
        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a9d6567bfe6cfeed2323b975f8ad1422f">setLastHop</a>(<a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>(
                                        udpControlInfo-&gt;getSrcAddr(),
                                        udpControlInfo-&gt;getSrcPort()));
        overlayCtrlInfo-&gt;setSrcRoute(overlayCtrlInfo-&gt;getLastHop());
        overlayCtrlInfo-&gt;setTransportType(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a01580b2e886cd821bd7f3f2bcd7c690c">UDP_TRANSPORT</a>);

        msg-&gt;setControlInfo(overlayCtrlInfo);
        <span class="keyword">delete</span> udpControlInfo;

        <span class="comment">// debug message</span>
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) {
            EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay:handleMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
            &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
            &lt;&lt; <span class="stringliteral">&quot;    Received &quot;</span> &lt;&lt; *msg &lt;&lt; <span class="stringliteral">&quot; from &quot;</span>
            &lt;&lt; overlayCtrlInfo-&gt;getLastHop().getIp() &lt;&lt; endl;
        }

        <a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* baseOverlayMsg =
            <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>*<span class="keyword">&gt;</span>(msg);

        <span class="keywordflow">if</span> (baseOverlayMsg == NULL) {
            cPacket* packet = check_and_cast&lt;cPacket*&gt;(msg);
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++; <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> += packet-&gt;getByteLength());
            <span class="keyword">delete</span> msg;
            <span class="keywordflow">return</span>;
        }

        <span class="comment">// records stats if message is not a UDP &quot;self message&quot;</span>
        <span class="keywordflow">if</span> (overlayCtrlInfo-&gt;getLastHop() != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>) {
            <span class="comment">// is this from anywhere else?</span>
            <span class="keywordflow">if</span> (baseOverlayMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#af0a4bf31778e05a809f8d55dff5bfcc1">getStatType</a>() == <a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad8d082af8526e80f7de088c52ad1b7c0">APP_DATA_STAT</a>)
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898" title="number of received app data packets (incl. packets to be forwarded )">numAppDataReceived</a>++; <a class="code" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76" title="number of received app data bytes (incl. bytes to be forwarded)">bytesAppDataReceived</a> +=
                             baseOverlayMsg-&gt;getByteLength());
            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (baseOverlayMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#af0a4bf31778e05a809f8d55dff5bfcc1">getStatType</a>() == <a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfab0d83e0332137027a936320d7c9bdb86">APP_LOOKUP_STAT</a>)
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca" title="number of received app lookup packets (incl. packets to be forwarded)">numAppLookupReceived</a>++;<a class="code" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527" title="number of received app lookup bytes (incl. bytes to be forwarded)">bytesAppLookupReceived</a> +=
                             baseOverlayMsg-&gt;getByteLength());
            <span class="keywordflow">else</span> <span class="comment">// MAINTENANCE_STAT</span>
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46" title="number of received maintenance packets (incl. packets to be forwarded)">numMaintenanceReceived</a>++;
                             <a class="code" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb" title="number of received maintenance bytes (incl. bytes to be forwarded)">bytesMaintenanceReceived</a> +=
                                 baseOverlayMsg-&gt;getByteLength());
        }
        <span class="keywordflow">if</span> (overlayCtrlInfo-&gt;getLastHop().getIp() == <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()) {
            <span class="comment">// is this from the same node?</span>
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef" title="number of packets received from same host but different port (SimpleMultiOverlayHost)">numInternalReceived</a>++; <a class="code" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae" title="number of bytes received from same host but different port (SimpleMultiOverlayHost)">bytesInternalReceived</a> +=
                             baseOverlayMsg-&gt;getByteLength());
        } <span class="keywordflow">else</span> overlayCtrlInfo-&gt;setHopCount(1);

        <span class="comment">// process rpc calls/responses or BaseOverlayMessages</span>
        <span class="keywordflow">if</span> (!<a class="code" href="classBaseRpc.html#ad68b7208473ba1301deb59d51f0bba6c">internalHandleMessage</a>(msg)) {
            <a class="code" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8" title="Handles a BaseOverlayMessage ">handleBaseOverlayMessage</a>(baseOverlayMsg);
        }
    }

    <span class="comment">// process timer events and rpc timeouts</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBaseRpc.html#ad68b7208473ba1301deb59d51f0bba6c">internalHandleMessage</a>(msg)) <span class="keywordflow">return</span>;

    <span class="comment">// process CommonAPIMessages from App</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;CommonAPIMessage*&gt;(msg) != NULL) {
        <span class="keywordflow">if</span> (dynamic_cast&lt;KBRroute*&gt;(msg) != NULL) {
            <a class="code" href="classKBRroute.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRroute</a>* apiMsg = <span class="keyword">static_cast&lt;</span><a class="code" href="classKBRroute.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRroute</a>*<span class="keyword">&gt;</span>(msg);

            std::vector&lt;TransportAddress&gt; sourceRoute;
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; apiMsg-&gt;<a class="code" href="classKBRroute.html#ad2ffb68e9163898b3a4846943c687a53">getSourceRouteArraySize</a>(); ++i)
                sourceRoute.push_back(apiMsg-&gt;<a class="code" href="classKBRroute.html#a40bab7a8989b1eb12246c9e014ba384c">getSourceRoute</a>(i));

            <a class="code" href="classBaseOverlay.html#ad62efdef2b674f46e5368354efb6104f" title="Routes message through overlay.">route</a>(apiMsg-&gt;<a class="code" href="classKBRroute.html#acfbdd202d6783de8d6731d46ab382e00">getDestKey</a>(), <span class="keyword">static_cast&lt;</span><a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a><span class="keyword">&gt;</span>(apiMsg-&gt;<a class="code" href="classKBRroute.html#a32e7dbb5aaeee13f316f1f6c8e55d2b3">getDestComp</a>()),
                  static_cast&lt;CompType&gt;(apiMsg-&gt;<a class="code" href="classKBRroute.html#a1667fc25f4d80791d79e11c399196353">getSrcComp</a>()), apiMsg-&gt;decapsulate(),
                          sourceRoute);
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;KBRforward*&gt;(msg) != NULL) {
            <a class="code" href="classKBRforward.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRforward</a>* apiMsg = <span class="keyword">static_cast&lt;</span><a class="code" href="classKBRforward.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRforward</a>*<span class="keyword">&gt;</span>(msg);
            <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo =
                check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;
                (msg-&gt;removeControlInfo());

            <a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>* dataMsg =
                <span class="keyword">new</span> <a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>();
            dataMsg-&gt;setType(<a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17eab0641a3f5bcb1e08ee72afe9583ff5e6">APPDATA</a>);
            dataMsg-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#aebae47ba62d6bd9fe00ca6d779bf0e81">BASEAPPDATA_L</a>(dataMsg));
            dataMsg-&gt;setName(apiMsg-&gt;getEncapsulatedPacket()-&gt;getName());
            dataMsg-&gt;encapsulate(apiMsg-&gt;decapsulate());
            dataMsg-&gt;setSrcComp(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a79a35b8f98c2fecef8d6bc566c4a7437">getSrcComp</a>());
            dataMsg-&gt;setDestComp(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a082f26c9d0cac0aec9ca23da4d338134">getDestComp</a>());
            dataMsg-&gt;setStatType(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad8d082af8526e80f7de088c52ad1b7c0">APP_DATA_STAT</a>);

            <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* routeMsg = <span class="keyword">new</span> <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>(dataMsg-&gt;getName());
            routeMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#a97cdd7fcea5530191070f50e92d39eb5">setType</a>(<a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17ea9fb39f8e1c5f2ff00e45bb7294e5524f">OVERLAYROUTE</a>);
            routeMsg-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#aa51e9b4f9362c33b9a432fd496bc31d0">BASEROUTE_L</a>(routeMsg));
            routeMsg-&gt;encapsulate(dataMsg);

            routeMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#a07301be10c346b328a0a9cc4cae48777">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad8d082af8526e80f7de088c52ad1b7c0">APP_DATA_STAT</a>);
            routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#adabb301ac82c0e967f9c14717a535b9d">setRoutingType</a>(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a4b81411df66c4c813b664665731ee38c">getRoutingType</a>());
            routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#aa5389407777493ee6f012c15397b7fd4">setDestKey</a>(apiMsg-&gt;<a class="code" href="classKBRforward.html#a5c9aa80a6bd136a034e37af25f9beb42">getDestKey</a>());
            routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#acdc5362ca1ffc63004a8e413fb325fe6">setSrcNode</a>(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#af6e31869ed325ba04288a69346988343">getSrcNode</a>());
            routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a61070a9184332a428bf8f98e8eef21da">setHopCount</a>(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a76fd4681ebb00eb023e35a88e4ba9042">getHopCount</a>());
            routeMsg-&gt;setControlInfo(overlayCtrlInfo);

            <span class="comment">// message marked with this-pointer as already forwarded to tier1</span>
            routeMsg-&gt;setContextPointer(<span class="keyword">this</span>);

            std::vector&lt;TransportAddress&gt; sourceRoute;
            sourceRoute.push_back(apiMsg-&gt;<a class="code" href="classKBRforward.html#a7e0e868fc677593aab3e8302e38f7274">getNextHopNode</a>());
            <a class="code" href="classBaseOverlay.html#a6f2c598f5d3989a63a8cc7220f1aaf76" title="Sends a message to an overlay node, with the generic routing algorithm.">sendToKey</a>(apiMsg-&gt;<a class="code" href="classKBRforward.html#a5c9aa80a6bd136a034e37af25f9beb42">getDestKey</a>(), routeMsg, 1, sourceRoute);
        }

        <span class="keyword">delete</span> msg;
    }

    <span class="comment">// process other messages from App</span>
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;getArrivalGate() == <a class="code" href="classBaseOverlay.html#a6523faf8f52af34c73643dc7f3e083eb">appGate</a>) {
        <a class="code" href="classBaseOverlay.html#aef92d042c22b47c123e59a831acb7033" title="Processes &quot;timer&quot; self-messages.">handleAppMessage</a>(msg);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;arrivedOn(<span class="stringliteral">&quot;tcpIn&quot;</span>)) {
        <a class="code" href="classBaseTcpSupport.html#ac991906514dbe20b4546de49fad67756" title="Member function to handle incoming TCP messages.">handleTCPMessage</a>(msg);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_cast&lt;CompReadyMessage*&gt;(msg)) {
        <a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>* readyMsg = <span class="keyword">static_cast&lt;</span><a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>*<span class="keyword">&gt;</span>(msg);
        <span class="keywordflow">if</span> (((<span class="keywordtype">bool</span>)par(<span class="stringliteral">&quot;joinOnApplicationRequest&quot;</span>) == <span class="keyword">false</span>) &amp;&amp;
            readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#adbc73cb3852f357191584e7a9684838f">getReady</a>() &amp;&amp;
            readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#a3804fb9b24445b1af5484da00634d075">getComp</a>() == <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ead65752bbf62b380b2d957b69477f5742">NEIGHBORCACHE_COMP</a>) {
            cObject** context = <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a9c0e986f725906c17373fac655710e5c">getContext</a>(<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>());
            <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a7d0beff122a0b5c573dd8ae90c9372d5" title="if true, a node rejoins with its old nodeId and malicious state">restoreContext</a> &amp;&amp; context &amp;&amp; *context) {
                BaseOverlayContext* overlayContext = <span class="keyword">static_cast&lt;</span>BaseOverlayContext*<span class="keyword">&gt;</span>(*context);
                <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#ae9b12c25d356b0f02eefc855e338dbd0" title="Set a node to be malicious.">setMalicious</a>(<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>(),
                                             overlayContext-&gt;malicious);
                <a class="code" href="classBaseOverlay.html#acb8855faa86247ae37ab894891d9f4dd" title="Join the overlay with a given nodeID.">join</a>(overlayContext-&gt;key);
            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#ad199433f7bbe1651a6c83774943dd07b">getNodeId</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>()) {
                <span class="comment">//std::cout &lt;&lt; &quot;readymsg at BO&quot; &lt;&lt; std::endl;</span>
                <a class="code" href="classBaseOverlay.html#acb8855faa86247ae37ab894891d9f4dd" title="Join the overlay with a given nodeID.">join</a>(readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#ad199433f7bbe1651a6c83774943dd07b">getNodeId</a>());
            } <span class="keywordflow">else</span> {
                <a class="code" href="classBaseOverlay.html#acb8855faa86247ae37ab894891d9f4dd" title="Join the overlay with a given nodeID.">join</a>();
            }
        } <span class="comment">/*else if (!readyMsg-&gt;getReady() &amp;&amp;</span>
<span class="comment">            readyMsg-&gt;getComp() == NEIGHBORCACHE_COMP) {</span>
<span class="comment">            //STATE =</span>
<span class="comment">            setOverlayReady(false);</span>
<span class="comment">        } */</span>
        <span class="keyword">delete</span> msg;
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::handleMessage(): Received msg with &quot;</span>
                            <span class="stringliteral">&quot;unknown type!&quot;</span>);
        <span class="keyword">delete</span> msg;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa2d70984acd164839ca92694a02e7a91"></a><!-- doxytag: member="BaseOverlay::handleNodeGracefulLeaveNotification" ref="aa2d70984acd164839ca92694a02e7a91" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::handleNodeGracefulLeaveNotification </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method gets call **.gracefulLeaveDelay seconds before it is killed if this node is among the gracefulLeaveProbability nodes. </p>

<p>Reimplemented in <a class="el" href="classNTree.html#abb9c7820c6ca91e38cc686cb3aa51e58">NTree</a>, <a class="el" href="classKademlia.html#ae21a58f63a448c1b41edd84c2e5a0cb0">Kademlia</a>, <a class="el" href="classQuon.html#a54937c5eea5f1a673ddce36e3f34c9ba">Quon</a>, and <a class="el" href="classVast.html#a927d7255a4ffb6ab2ef1f46c5cba8fb4">Vast</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01081">1081</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ...</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af9ea0a59c26b70c50c63c2c1dc4c2ec3"></a><!-- doxytag: member="BaseOverlay::handleNodeLeaveNotification" ref="af9ea0a59c26b70c50c63c2c1dc4c2ec3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::handleNodeLeaveNotification </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method gets call **.gracefulLeaveDelay seconds before it is killed. </p>

<p>Reimplemented in <a class="el" href="classoversim_1_1Nice.html#a9f2264e7a35474365104f15854108700">oversim::Nice</a>, and <a class="el" href="classVast.html#abe5f7fe27677c21cb0421ace877ff368">Vast</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01076">1076</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// ...</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2a53481e2aaf78e6826ab72378bebf48"></a><!-- doxytag: member="BaseOverlay::handleTransportAddressChangedNotification" ref="a2a53481e2aaf78e6826ab72378bebf48" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::handleTransportAddressChangedNotification </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method gets call if the node has a new <a class="el" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> (IP address) because he changed his access network. </p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01067">1067</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// get new ip address</span>
    <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a1c7b834dc2e6e738f1f4db8711a12814" title="Sets the ip address, port and NAT type.">setIp</a>(IPAddressResolver().addressOf(
                      getParentModule()-&gt;getParentModule()));

    <a class="code" href="classBaseOverlay.html#a3eefb56c2396601373c89d21b5b58110" title="Join the overlay with a given nodeID in thisNode.key.">joinOverlay</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31d7dd39ddc9e62ad92f69f6d7210344"></a><!-- doxytag: member="BaseOverlay::handleUDPMessage" ref="a31d7dd39ddc9e62ad92f69f6d7210344" args="(BaseOverlayMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::handleUDPMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes messages from underlay. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Message from UDP </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classKademlia.html#af1edeee0ba2c1f2fb26355076814f102">Kademlia</a>, <a class="el" href="classGia.html#a93933a7734f571abf2e82812603b4d21">Gia</a>, <a class="el" href="classoversim_1_1Nice.html#aa7b0abef7e007a2a032614cd1e5be597">oversim::Nice</a>, <a class="el" href="classPastry.html#a47fc606cfbb1977305f97c60c3c21481">Pastry</a>, <a class="el" href="classoversim_1_1Koorde.html#a98fb65a513aa6274415a4638449201ad">oversim::Koorde</a>, <a class="el" href="classoversim_1_1Chord.html#a3e4011d819724809a665e987b0ba6726">oversim::Chord</a>, <a class="el" href="classNTree.html#a419c6ad3063b42119ebd8afa64c2a14d">NTree</a>, <a class="el" href="classQuon.html#a298fcf2d2e493783099f6d0b07cf04d1">Quon</a>, <a class="el" href="classVast.html#a5a12a3e1f34fbad6a2f6bb3231fce048">Vast</a>, <a class="el" href="classPubSubLobby.html#ae6e5337366950b5812ea523a7feffc2c">PubSubLobby</a>, and <a class="el" href="classPubSubMMOG.html#a4af2596c5cc972a1c4dacfde82c989ee">PubSubMMOG</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01092">1092</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9738ba6065b0f699f1921bbe82ab97be"></a><!-- doxytag: member="BaseOverlay::initialize" ref="a9738ba6065b0f699f1921bbe82ab97be" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initializes base-class-attributes </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>the init stage </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00077">77</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (stage == 0) {
        <a class="code" href="classOverlayKey.html#a4d1b67c81853679686ed8f9d52bade16" title="Set the length of an OverlayKey.">OverlayKey::setKeyLength</a>(par(<span class="stringliteral">&quot;keyLength&quot;</span>));
    }

    <span class="keywordflow">if</span> (stage == <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532af7318a654ca995f5f66f3396e4ebf61a">REGISTER_STAGE</a>) {
        <a class="code" href="classBaseOverlay.html#a2096f89814b5740257cee106b60dda15">registerComp</a>(<a class="code" href="classBaseOverlay.html#a92e0d3f96a5716245465e05da60ef487" title="Return the component type of this module.">getThisCompType</a>(), <span class="keyword">this</span>);
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (stage == <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a58e83c497c7c8495e9c592ff3148b6b9" title="first stage for overlay modules (Tier 0 / KBR)">MIN_STAGE_OVERLAY</a>) {
        <span class="comment">// find friend modules</span>
        <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a> = <a class="code" href="classGlobalNodeListAccess.html" title="Gives access to the GlobalNodeList.">GlobalNodeListAccess</a>().<a class="code" href="classGlobalNodeListAccess.html#a632ebc68d476efa2dd053517509786ec">get</a>();
        <a class="code" href="classBaseOverlay.html#af2f7102d7cc6f5ecb1c3ecb3d9c93df3" title="pointer to UnderlayConfigurator in this node">underlayConfigurator</a> = <a class="code" href="classUnderlayConfiguratorAccess.html" title="Gives access to the UnderlayConfigurator.">UnderlayConfiguratorAccess</a>().<a class="code" href="classUnderlayConfiguratorAccess.html#a5e0cc87f6699810ee663e2239184e9b9">get</a>();
        <a class="code" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae" title="pointer to NotificationBoard in this node">notificationBoard</a> = NotificationBoardAccess().get();
        <a class="code" href="classBaseOverlay.html#a59bde2858b8537864fbad3eb487dbc55" title="pointer to the GlobalParameters module">globalParameters</a> = <a class="code" href="classGlobalParametersAccess.html" title="Gives access to the GlobalParameters module.">GlobalParametersAccess</a>().<a class="code" href="classGlobalParametersAccess.html#a472e2df26739d9c174391846b0dd9c64" title="returns the GlobalParameters module">get</a>();
        <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a> = check_and_cast&lt;<a class="code" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a>*&gt;(getParentModule()-&gt;
                getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;bootstrapList&quot;</span>, 0));

        <a class="code" href="classBaseOverlay.html#a2e2f70aa82a9b4920877b3a13dd1e0ea">udpGate</a> = gate(<span class="stringliteral">&quot;udpIn&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a6523faf8f52af34c73643dc7f3e083eb">appGate</a> = gate(<span class="stringliteral">&quot;appIn&quot;</span>);

        <span class="comment">// fetch some parameters</span>
        <a class="code" href="classBaseOverlay.html#a58a2fa722396661f55eb490d989a6df6" title="identifies the overlay this node belongs to (used for multiple overlays)">overlayId</a> = par (<span class="stringliteral">&quot;overlayId&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a> = par(<span class="stringliteral">&quot;debugOutput&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9" title="collect delay for single hops">collectPerHopDelay</a> = par(<span class="stringliteral">&quot;collectPerHopDelay&quot;</span>);
        <a class="code" href="classBaseOverlay.html#aef12c08638b508af44f257824f9391ef" title="used UDP-port">localPort</a> = par(<span class="stringliteral">&quot;localPort&quot;</span>);
        <a class="code" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9" title="maximum hop count">hopCountMax</a> = par(<span class="stringliteral">&quot;hopCountMax&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a79031cb868377512713e343a326dbbd9">drawOverlayTopology</a> = par(<span class="stringliteral">&quot;drawOverlayTopology&quot;</span>);
        <a class="code" href="classBaseOverlay.html#aecfcf5743d274d9c17730f2aeccf1635">rejoinOnFailure</a> = par(<span class="stringliteral">&quot;rejoinOnFailure&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a84fe39074cd9dc69acf188abf3e2ea12" title="needed by KBR protocols for NAT support">sendRpcResponseToLastHop</a> = par(<span class="stringliteral">&quot;sendRpcResponseToLastHop&quot;</span>);
        <a class="code" href="classBaseOverlay.html#ab53aaadb5dfe6fea1ac6b90db356cc52" title="if node is malicious, it tries a findNode attack">dropFindNodeAttack</a> = par(<span class="stringliteral">&quot;dropFindNodeAttack&quot;</span>);
        <a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc" title="if node is malicious, it tries a isSibling attack">isSiblingAttack</a> = par(<span class="stringliteral">&quot;isSiblingAttack&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a319a6b16e55af5e67fbbf65f6d07d5d9" title="if node is malicious, it tries a invalidNode attack">invalidNodesAttack</a> = par(<span class="stringliteral">&quot;invalidNodesAttack&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a3bcd2bdd704803d7ec8ae77633cf03fa" title="if node is malicious, it drops all received BaseRouteMessages">dropRouteMessageAttack</a> = par(<span class="stringliteral">&quot;dropRouteMessageAttack&quot;</span>);
        <a class="code" href="classBaseOverlay.html#ab0b0274a06e70c91e8bd8df0c23d435f" title="if true, measure the overhead of signatures in rpc messages">measureAuthBlock</a> = par(<span class="stringliteral">&quot;measureAuthBlock&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a7d0beff122a0b5c573dd8ae90c9372d5" title="if true, a node rejoins with its old nodeId and malicious state">restoreContext</a> = par(<span class="stringliteral">&quot;restoreContext&quot;</span>);

        <span class="comment">// we assume most overlays don&#39;t provide KBR services</span>
        <a class="code" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b" title="set this to true, if the overlay provides KBR services">kbr</a> = <span class="keyword">false</span>;

        <span class="comment">// set routing type</span>
        std::string temp = par(<span class="stringliteral">&quot;routingType&quot;</span>).stdstringValue();
        <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;iterative&quot;</span>)
            <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a> = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ae4bd936cbb47803986c83242cbb51867">ITERATIVE_ROUTING</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;exhaustive-iterative&quot;</span>)
            <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a> = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad60cf756d6bb24af372d7fe7c279f44d">EXHAUSTIVE_ITERATIVE_ROUTING</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;semi-recursive&quot;</span>)
            <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a> = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a18b63fe85aa5e81cd3fca5e3c7c9df82">SEMI_RECURSIVE_ROUTING</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;full-recursive&quot;</span>)
            <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a> = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551aeec4ce5cac6dae9d3d59b1347a9df957">FULL_RECURSIVE_ROUTING</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp == <span class="stringliteral">&quot;source-routing-recursive&quot;</span>)
            <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a> = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad8c4eefed3d826e5da402fe582cad2c1">RECURSIVE_SOURCE_ROUTING</a>;
        <span class="keywordflow">else</span> <span class="keywordflow">throw</span> cRuntimeError((std::string(<span class="stringliteral">&quot;Wrong routing type: &quot;</span>)
                                      + temp).c_str());

        <a class="code" href="classBaseOverlay.html#ac9acbeb30646d54f620d87641d91b113" title="forward messages to applications?">useCommonAPIforward</a> = par(<span class="stringliteral">&quot;useCommonAPIforward&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a6e9090bf68f45a31d727a6c7f0501d43" title="send ACK when receiving route message">routeMsgAcks</a> = par(<span class="stringliteral">&quot;routeMsgAcks&quot;</span>);
        <a class="code" href="classBaseOverlay.html#ad0094285f9af244aec5e5fe600126243" title="numRedundantNodes for recursive routing">recNumRedundantNodes</a> = par(<span class="stringliteral">&quot;recNumRedundantNodes&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a61186fd8bd7368c8a91a63ecc9c62a89" title="record visited hops on route">recordRoute</a> = par(<span class="stringliteral">&quot;recordRoute&quot;</span>);

        <span class="comment">// set base lookup parameters</span>
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a5ffefd1d559420cc498307521ae1fac7" title="number of next hops in each step">redundantNodes</a> = par(<span class="stringliteral">&quot;lookupRedundantNodes&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#ad847495e9bdd53b83437150b0b26381e" title="number of parallel paths">parallelPaths</a> = par(<span class="stringliteral">&quot;lookupParallelPaths&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#ad0cc5694665de82ca47d2763d829238a" title="number of nodes to ask in parallel">parallelRpcs</a> = par(<span class="stringliteral">&quot;lookupParallelRpcs&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#ac4f7617d2cf8e6a7a9d178b9092fec7f" title="true, if siblings need to be authenticated with a ping">verifySiblings</a> = par(<span class="stringliteral">&quot;lookupVerifySiblings&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a948fd1a937d5d2fb516e0e9181183078" title="true, if sibling candidates are selected by a majority decision if using parallel paths...">majoritySiblings</a> = par(<span class="stringliteral">&quot;lookupMajoritySiblings&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a1bb036f4f3d11da022eacb20c9175132" title="true, if parallel RPCs results should be merged">merge</a> = par(<span class="stringliteral">&quot;lookupMerge&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a7e4a47e8ecba9deba2509cb674c53e8c" title="communicate failed nodes">failedNodeRpcs</a> = par(<span class="stringliteral">&quot;lookupFailedNodeRpcs&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a4b0e4def1dc1071314091dc9e5ec854a" title="limited the number of concurrent RPCS to parameter parallelRpcs">strictParallelRpcs</a> =
            par(<span class="stringliteral">&quot;lookupStrictParallelRpcs&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a0285a36b3308b2d9d9531658fe08cb29" title="merge all parallel responses from earlier steps">useAllParallelResponses</a> =
            par(<span class="stringliteral">&quot;lookupUseAllParallelResponses&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a691b1a92109829e5a7e84bfbddd868ea" title="send a new RPC immediately after an RPC timeouts">newRpcOnEveryTimeout</a> =
            par(<span class="stringliteral">&quot;lookupNewRpcOnEveryTimeout&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a9b8b8df5836e6d138869c54a0e59ca26" title="send a new RPC after every response, even if there was no progress">newRpcOnEveryResponse</a> =
            par(<span class="stringliteral">&quot;lookupNewRpcOnEveryResponse&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a156800b5539367619349b4b55542931c" title="finish lookup, if the last pending RPC returned without progress">finishOnFirstUnchanged</a> =
            par(<span class="stringliteral">&quot;lookupFinishOnFirstUnchanged&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#a7c59dacd3b232a23104bf8d6e9986f61" title="if true, the same node is never asked twice during a single lookup">visitOnlyOnce</a> =
            par(<span class="stringliteral">&quot;lookupVisitOnlyOnce&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>.<a class="code" href="classIterativeLookupConfiguration.html#addae3ccd0ed97c72baea50ad03711f5a" title="if true, a FindNodeResponse with sibling flag set is always accepted, even if it is from a previous l...">acceptLateSiblings</a> =
            par(<span class="stringliteral">&quot;lookupAcceptLateSiblings&quot;</span>);

        <a class="code" href="classBaseOverlay.html#af6573aac3c99626958737209309d7e99">recursiveLookupConfig</a>.<a class="code" href="classRecursiveLookupConfiguration.html#a344319f090e4d972a5514ef0e800836f" title="number of next hops in each step">redundantNodes</a> = par(<span class="stringliteral">&quot;lookupRedundantNodes&quot;</span>);
        <a class="code" href="classBaseOverlay.html#af6573aac3c99626958737209309d7e99">recursiveLookupConfig</a>.<a class="code" href="classRecursiveLookupConfiguration.html#acfc1d3d17ad0db3aa9654f399a1a93c9">numRetries</a> = 0; <span class="comment">//TODO</span>

        <span class="comment">// statistics</span>
        <a class="code" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4" title="number of sent app data packets (incl. forwarded packets)">numAppDataSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4" title="number of sent app data bytes (incl. forwarded bytes)">bytesAppDataSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f" title="number of sent app loookup packets (incl. forwarded packets)">numAppLookupSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4" title="number of sent app lookup bytes (incl. forwarded bytes)">bytesAppLookupSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa" title="number of sent maintenance packets (incl. forwarded packets)">numMaintenanceSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4" title="number of sent maintenance bytes (incl. forwarded bytes)">bytesMaintenanceSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898" title="number of received app data packets (incl. packets to be forwarded )">numAppDataReceived</a> = 0;
        <a class="code" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76" title="number of received app data bytes (incl. bytes to be forwarded)">bytesAppDataReceived</a> = 0;
        <a class="code" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca" title="number of received app lookup packets (incl. packets to be forwarded)">numAppLookupReceived</a> = 0;
        <a class="code" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527" title="number of received app lookup bytes (incl. bytes to be forwarded)">bytesAppLookupReceived</a> = 0;
        <a class="code" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46" title="number of received maintenance packets (incl. packets to be forwarded)">numMaintenanceReceived</a> = 0;
        <a class="code" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb" title="number of received maintenance bytes (incl. bytes to be forwarded)">bytesMaintenanceReceived</a> = 0;
        <a class="code" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99" title="number of forwarded app data packets">numAppDataForwarded</a> = 0;
        <a class="code" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6" title="number of forwarded app data bytes at out-gate">bytesAppDataForwarded</a> = 0;
        <a class="code" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd" title="number of forwarded app lookup packets">numAppLookupForwarded</a> = 0;
        <a class="code" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7" title="number of forwarded app lookup bytes at out-gate">bytesAppLookupForwarded</a> = 0;
        <a class="code" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7" title="number of forwarded maintenance packets">numMaintenanceForwarded</a> = 0;
        <a class="code" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b" title="number of forwarded maintenance bytes at out-gate">bytesMaintenanceForwarded</a> = 0;
        <a class="code" href="classBaseOverlay.html#a30e11530c77c2164f0a5c98a489a9fab" title="number of bytes sent for rpc message signatures">bytesAuthBlockSent</a> = 0;

        <a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a> = 0;
        <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> = 0;
        <a class="code" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">numFindNodeSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">bytesFindNodeSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">numFindNodeResponseSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">bytesFindNodeResponseSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">numFailedNodeSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">bytesFailedNodeSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">numFailedNodeResponseSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">bytesFailedNodeResponseSent</a> = 0;

        <a class="code" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b" title="number of join retries">joinRetries</a> = 0;

        <a class="code" href="classBaseOverlay.html#ae34cc8a058a4dae47a3815cba64ceba2" title="number of packets sent to same host but different port (SimpleMultiOverlayHost)">numInternalSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#ad0af3d066a89ced910b082a980f68f25" title="number of bytes sent to same host but different port (SimpleMultiOverlayHost)">bytesInternalSent</a> = 0;
        <a class="code" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef" title="number of packets received from same host but different port (SimpleMultiOverlayHost)">numInternalReceived</a> = 0;
        <a class="code" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae" title="number of bytes received from same host but different port (SimpleMultiOverlayHost)">bytesInternalReceived</a> = 0;

        WATCH(<a class="code" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4" title="number of sent app data packets (incl. forwarded packets)">numAppDataSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4" title="number of sent app data bytes (incl. forwarded bytes)">bytesAppDataSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f" title="number of sent app loookup packets (incl. forwarded packets)">numAppLookupSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4" title="number of sent app lookup bytes (incl. forwarded bytes)">bytesAppLookupSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa" title="number of sent maintenance packets (incl. forwarded packets)">numMaintenanceSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4" title="number of sent maintenance bytes (incl. forwarded bytes)">bytesMaintenanceSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898" title="number of received app data packets (incl. packets to be forwarded )">numAppDataReceived</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76" title="number of received app data bytes (incl. bytes to be forwarded)">bytesAppDataReceived</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca" title="number of received app lookup packets (incl. packets to be forwarded)">numAppLookupReceived</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527" title="number of received app lookup bytes (incl. bytes to be forwarded)">bytesAppLookupReceived</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46" title="number of received maintenance packets (incl. packets to be forwarded)">numMaintenanceReceived</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb" title="number of received maintenance bytes (incl. bytes to be forwarded)">bytesMaintenanceReceived</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99" title="number of forwarded app data packets">numAppDataForwarded</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6" title="number of forwarded app data bytes at out-gate">bytesAppDataForwarded</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd" title="number of forwarded app lookup packets">numAppLookupForwarded</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7" title="number of forwarded app lookup bytes at out-gate">bytesAppLookupForwarded</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7" title="number of forwarded maintenance packets">numMaintenanceForwarded</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b" title="number of forwarded maintenance bytes at out-gate">bytesMaintenanceForwarded</a>);

        WATCH(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">numFindNodeSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">bytesFindNodeSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">numFindNodeResponseSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">bytesFindNodeResponseSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">numFailedNodeSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">bytesFailedNodeSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">numFailedNodeResponseSent</a>);
        WATCH(<a class="code" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">bytesFailedNodeResponseSent</a>);

        WATCH(<a class="code" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b" title="number of join retries">joinRetries</a>);

        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#abef37828b7f070044154f53bcd2a765b" title="Returns true if overlay is one in an array, inside a SimpleMultiOverlayHost.">isInSimpleMultiOverlayHost</a>()) {
            WATCH(<a class="code" href="classBaseOverlay.html#ae34cc8a058a4dae47a3815cba64ceba2" title="number of packets sent to same host but different port (SimpleMultiOverlayHost)">numInternalSent</a>);
            WATCH(<a class="code" href="classBaseOverlay.html#ad0af3d066a89ced910b082a980f68f25" title="number of bytes sent to same host but different port (SimpleMultiOverlayHost)">bytesInternalSent</a>);
            WATCH(<a class="code" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef" title="number of packets received from same host but different port (SimpleMultiOverlayHost)">numInternalReceived</a>);
            WATCH(<a class="code" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae" title="number of bytes received from same host but different port (SimpleMultiOverlayHost)">bytesInternalReceived</a>);
        }

        <span class="comment">// set up local nodehandle</span>
        <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a1c7b834dc2e6e738f1f4db8711a12814" title="Sets the ip address, port and NAT type.">setIp</a>(IPAddressResolver().
                      addressOf(getParentModule()-&gt;getParentModule()));
        <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>(<a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>);

        <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>;
        <a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323" title="internal overlay state used for setOverlayReady()">internalReadyState</a> = <span class="keyword">false</span>;

        getDisplayString().setTagArg(<span class="stringliteral">&quot;i&quot;</span>, 1, <span class="stringliteral">&quot;red&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a94604495a81e687f7492564d788c7c36" title="Colors module-icon blue (ready), green (ready, malicious) or red (not ready)">setOverlayReadyIcon</a>(<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>(), <span class="keyword">false</span>);

        <span class="comment">// set up UDP</span>
        <a class="code" href="classBaseOverlay.html#a512084e3a224f0a3f284e5e240652a26" title="Tells UDP we want to get all packets arriving on the given port.">bindToPort</a>(<a class="code" href="classBaseOverlay.html#aef12c08638b508af44f257824f9391ef" title="used UDP-port">localPort</a>);

        <span class="comment">// subscribe to the notification board</span>
        <a class="code" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae" title="pointer to NotificationBoard in this node">notificationBoard</a>-&gt;subscribe(<span class="keyword">this</span>, NF_OVERLAY_TRANSPORTADDRESS_CHANGED);
        <a class="code" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae" title="pointer to NotificationBoard in this node">notificationBoard</a>-&gt;subscribe(<span class="keyword">this</span>, NF_OVERLAY_NODE_LEAVE);
        <a class="code" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae" title="pointer to NotificationBoard in this node">notificationBoard</a>-&gt;subscribe(<span class="keyword">this</span>, NF_OVERLAY_NODE_GRACEFUL_LEAVE);

        <span class="comment">// init visualization with terminal ptr</span>
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a79031cb868377512713e343a326dbbd9">drawOverlayTopology</a>)
            <a class="code" href="classTopologyVis.html#ab551ff162d16d625b967f228f479bf72">initVis</a>(getParentModule()-&gt;getParentModule());

        <span class="comment">// init rpcs</span>
        <a class="code" href="classBaseRpc.html#a270e68f0d93dfcf9c5f26dbafd0fba54" title="Initializes Remote-Procedure state.">initRpcs</a>();
        <a class="code" href="classBaseOverlay.html#af2c8b2108703c4df49217a719f280bb8" title="creates a LookupSet">initLookups</a>();

        <span class="comment">// set TCP output gate</span>
        <a class="code" href="classBaseTcpSupport.html#a3de2e8b022586f387fdba1ca42dbdfd1" title="Member function to set local gate towards the TCP module during init phase.">setTcpOut</a>(gate(<span class="stringliteral">&quot;tcpOut&quot;</span>));

        <span class="comment">// statistics</span>
        <a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a> = simTime();
        WATCH(<a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>);
    }

    <span class="keywordflow">if</span> (stage &gt;= <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a58e83c497c7c8495e9c592ff3148b6b9" title="first stage for overlay modules (Tier 0 / KBR)">MIN_STAGE_OVERLAY</a> &amp;&amp; stage &lt;= <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532af261a91f9b71ec40c7c7c7e18b3455ac" title="last stage for overlay modules (Tier 0 / KBR)">MAX_STAGE_OVERLAY</a>)
        <a class="code" href="classBaseOverlay.html#a41f88dfbea856a2b38319ff52c758c96" title="Initializes derived-class-attributes.">initializeOverlay</a>(stage);

    <span class="keywordflow">if</span> (stage == <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532adde3c0e76fb4c24e253ada0ac73e6d08" title="last stage for overlay application modules (Tier 1)">MAX_STAGE_TIER_1</a>) {
        <span class="comment">// bootstrapList registered its gate to the overlay 0</span>
        <span class="comment">// if this is not overlay 0, we may not have the gate, so retrieve it</span>
        <span class="comment">// this assumes that the overlay is in a container module!</span>
        <span class="keywordflow">if</span> (!<a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>.count(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ea6b7871eeda317b7934cc8fb0b84899c5">BOOTSTRAPLIST_COMP</a>)) {
            <a class="code" href="classBaseOverlay.html" title="Base class for overlays.">BaseOverlay</a> *firstOverlay = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classBaseOverlay.html" title="Base class for overlays.">BaseOverlay</a>*<span class="keyword">&gt;</span>
                    (getParentModule()-&gt;getParentModule()
                    -&gt;getSubmodule(<span class="stringliteral">&quot;overlay&quot;</span>, 0)-&gt;gate(<span class="stringliteral">&quot;appIn&quot;</span>)
                    -&gt;getNextGate()-&gt;getOwnerModule());
            <span class="keywordflow">if</span> (!firstOverlay) {
                <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay.cc: &quot;</span>
                                    <span class="stringliteral">&quot;Couldn&#39;t obtain bootstrap gate&quot;</span>);
            }
            <a class="code" href="classBaseOverlay.html#a2096f89814b5740257cee106b60dda15">registerComp</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ea6b7871eeda317b7934cc8fb0b84899c5">BOOTSTRAPLIST_COMP</a>,
                         firstOverlay-&gt;<a class="code" href="classBaseOverlay.html#a3aba2b6e93094d3cc8107d33db4b5244">getCompModule</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ea6b7871eeda317b7934cc8fb0b84899c5">BOOTSTRAPLIST_COMP</a>));
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a41f88dfbea856a2b38319ff52c758c96"></a><!-- doxytag: member="BaseOverlay::initializeOverlay" ref="a41f88dfbea856a2b38319ff52c758c96" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::initializeOverlay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes derived-class-attributes. </p>
<p><br/>
</p>
<p>Initializes derived-class-attributes, called by <a class="el" href="classBaseOverlay.html#a9738ba6065b0f699f1921bbe82ab97be" title="initializes base-class-attributes">BaseOverlay::initialize()</a>. By default this method is called once. If more stages are needed one can overload <a class="el" href="classBaseOverlay.html#a3234dfcf81463984e88a42432734a615" title="Sets init stage.">numInitStages()</a> and add more stages.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>the init stage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classHTopology.html#aaad9a9131f9010c061a1702bfed93dd2">HTopology</a>, <a class="el" href="classKademlia.html#a3230c643b585b8f0745cebb7a577349c">Kademlia</a>, <a class="el" href="classoversim_1_1Nice.html#a63977effde493b185fb9230ec5c2a608">oversim::Nice</a>, <a class="el" href="classGia.html#a9d82f0ca67d3d29f3e500f839fd7efae">Gia</a>, <a class="el" href="classBamboo.html#a52bd33a4d9a8418e9027284cc74f72d1">Bamboo</a>, <a class="el" href="classBroose.html#a98565a4675febbe6e107e4c49dc58450">Broose</a>, <a class="el" href="classPastry.html#afe58f82e796e3f1ad6cc736fed856e3c">Pastry</a>, <a class="el" href="classoversim_1_1Koorde.html#a3b281279cbf37344659bf3f9ff732d8f">oversim::Koorde</a>, <a class="el" href="classoversim_1_1Chord.html#a9af34cb9f3b5f0588a6b6214274339db">oversim::Chord</a>, <a class="el" href="classNTree.html#a563a4902066ebc3ec43d62dffc6ee83a">NTree</a>, <a class="el" href="classMyOverlay.html#a651f1dbe4f6371f3a58dff39ad457d48">MyOverlay</a>, <a class="el" href="classQuon.html#ae17dfb6ef0492454b6b1b4e455e0f403">Quon</a>, <a class="el" href="classVast.html#a9146368d63151277c8442a17afe8d1d6">Vast</a>, <a class="el" href="classPubSubLobby.html#a22c24c5e2c839123f68d3b567eebf16e">PubSubLobby</a>, and <a class="el" href="classPubSubMMOG.html#a42a189f235425d0cc5706857f3122283">PubSubMMOG</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00301">301</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="af2c8b2108703c4df49217a719f280bb8"></a><!-- doxytag: member="BaseOverlay::initLookups" ref="af2c8b2108703c4df49217a719f280bb8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::initLookups </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>creates a LookupSet </p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01244">1244</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a> = <a class="code" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">LookupSet</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a03a24a5876504b36177a0ee041d5822e"></a><!-- doxytag: member="BaseOverlay::internalHandleRpcCall" ref="a03a24a5876504b36177a0ee041d5822e" args="(BaseCallMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::internalHandleRpcCall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles internal rpc requests. </p>
<p><br/>
</p>
<p>This method is used to implement basic functionality in the <a class="el" href="classBaseRpc.html" title="Base class for RPCs.">BaseRpc</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The call message </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool true, if call has been handled. </dd></dl>

<p>Reimplemented from <a class="el" href="classBaseRpc.html#a45b60cfeaa59a7efafeb5bcbb56f50a5">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01723">1723</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// call rpc stubs</span>
    <a class="code" href="RpcMacros_8h.html#aa75b135e279b574267e1a7dc4ab79da4" title="Marks the beginning of a Remote-Procedure-Call Switch block.">RPC_SWITCH_START</a>( msg );
    <a class="code" href="RpcMacros_8h.html#ad81d44e9bc59d2fb2cfcacc4d5ecda35" title="Declares a RPC method delegation.">RPC_DELEGATE</a>( FindNode, <a class="code" href="classBaseOverlay.html#a50680d9b44a779f314baeab200da61dc">findNodeRpc</a> );
    <a class="code" href="RpcMacros_8h.html#ad81d44e9bc59d2fb2cfcacc4d5ecda35" title="Declares a RPC method delegation.">RPC_DELEGATE</a>( FailedNode, <a class="code" href="classBaseOverlay.html#a1655dc0cb4ebb2f22de1d1ee29030433">failedNodeRpc</a> );
    <a class="code" href="RpcMacros_8h.html#ad81d44e9bc59d2fb2cfcacc4d5ecda35" title="Declares a RPC method delegation.">RPC_DELEGATE</a>( <a class="code" href="classLookup.html">Lookup</a>, <a class="code" href="classBaseOverlay.html#aa9d874edfd1b52822e1693695420d5a7">lookupRpc</a> );
    <a class="code" href="RpcMacros_8h.html#ad81d44e9bc59d2fb2cfcacc4d5ecda35" title="Declares a RPC method delegation.">RPC_DELEGATE</a>( NextHop, <a class="code" href="classBaseOverlay.html#a3eef9db326747d930a455db3b884dac4">nextHopRpc</a> );
    <a class="code" href="RpcMacros_8h.html#a29a8a3f21e67ecb25f58608a54df5191" title="Marks the end of a Remote-Procedure-Call Switch block.">RPC_SWITCH_END</a>( );

    <span class="comment">// if RPC was handled return true, else tell the parent class to handle it</span>
    <span class="keywordflow">return</span> <a class="code" href="RpcMacros_8h.html#aa5e964b7c7129c0943237a786e455e9a">RPC_HANDLED</a> || <a class="code" href="classBaseOverlay.html#a03a24a5876504b36177a0ee041d5822e" title="Handles internal rpc requests.">BaseRpc::internalHandleRpcCall</a>(msg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="adc50f1e153d88a20ca921e84a0dbf3b2"></a><!-- doxytag: member="BaseOverlay::internalHandleRpcResponse" ref="adc50f1e153d88a20ca921e84a0dbf3b2" args="(BaseResponseMessage *msg, cPolymorphic *context, int rpcId, simtime_t rtt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::internalHandleRpcResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>rtt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles rpc responses internal in base classes<br/>
 </p>
<p>This method is used to implement basic functionality in the <a class="el" href="classBaseRpc.html" title="Base class for RPCs.">BaseRpc</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The call message </td></tr>
    <tr><td class="paramname">context</td><td>Pointer to an optional state object. The object has to be handled/deleted by the <a class="el" href="classBaseOverlay.html#adc50f1e153d88a20ca921e84a0dbf3b2" title="Handles rpc responses internal in base classes ">internalHandleRpcResponse()</a> code </td></tr>
    <tr><td class="paramname">rpcId</td><td>The ID of the call </td></tr>
    <tr><td class="paramname">rtt</td><td>the time between sending the call and receiving the response </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseRpc.html#ad25a2ad1fb68d2da5d1fab8b577592a4">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01737">1737</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseOverlay.html#adc50f1e153d88a20ca921e84a0dbf3b2" title="Handles rpc responses internal in base classes ">BaseRpc::internalHandleRpcResponse</a>(msg, context, rpcId, rtt);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac89854c2f011597f3421d414851f4407"></a><!-- doxytag: member="BaseOverlay::internalHandleRpcTimeout" ref="ac89854c2f011597f3421d414851f4407" args="(BaseCallMessage *msg, const TransportAddress &amp;dest, cPolymorphic *context, int rpcId, const OverlayKey &amp;destKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::internalHandleRpcTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>destKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles rpc timeouts internal in base classes<br/>
 </p>
<p>This method is used to implement basic functionality in the <a class="el" href="classBaseRpc.html" title="Base class for RPCs.">BaseRpc</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The call message </td></tr>
    <tr><td class="paramname">dest</td><td>The node that did not response </td></tr>
    <tr><td class="paramname">context</td><td>Pointer to an optional state object. The object has to be handled/deleted by the <a class="el" href="classBaseOverlay.html#adc50f1e153d88a20ca921e84a0dbf3b2" title="Handles rpc responses internal in base classes ">internalHandleRpcResponse()</a> code </td></tr>
    <tr><td class="paramname">rpcId</td><td>The ID of the call </td></tr>
    <tr><td class="paramname">destKey</td><td>The key of the call if used </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool true, if call has been handled. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>return bool? </dd></dl>

<p>Reimplemented from <a class="el" href="classBaseRpc.html#ae4b1dfdb39322697542e02d3be48a848">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01744">1744</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="RpcMacros_8h.html#aa75b135e279b574267e1a7dc4ab79da4" title="Marks the beginning of a Remote-Procedure-Call Switch block.">RPC_SWITCH_START</a>( msg )
        <a class="code" href="RpcMacros_8h.html#ae07fad586ce7b9e82ad12848767a32e5">RPC_ON_CALL</a>( NextHop )
        {
            <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* tempMsg
                = check_and_cast&lt;<a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>*&gt;(msg-&gt;decapsulate());

            assert(!tempMsg-&gt;getControlInfo());
            <span class="keywordflow">if</span> (!tempMsg-&gt;getControlInfo()) {
                <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo = <span class="keyword">new</span> <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>;
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a9d6567bfe6cfeed2323b975f8ad1422f">setLastHop</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ac038719715302b645e9f13fdb85db75b">setHopCount</a>(tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ab59d2969c812aa35d132a68fc2baf819">getHopCount</a>());
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a033544e6c2005d7d468cab33547292b8">setSrcNode</a>(tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#af9787d89915f01a2055e920148015e17">getSrcNode</a>());
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a3a396692c3655f8277f57d8ca8bdb311">setRoutingType</a>(tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>());
                overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a36db08008216830aaa46b21ee16db58a">setTransportType</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a01580b2e886cd821bd7f3f2bcd7c690c">UDP_TRANSPORT</a>);
                tempMsg-&gt;setControlInfo(overlayCtrlInfo);
            }
            <span class="comment">// remove node from local routing tables</span>
            <span class="comment">// + route message again if possible</span>
            assert(!dest.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>() &amp;&amp; destKey.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>());
            <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7" title="Handles a failed node.">handleFailedNode</a>(dest)) {
                <span class="keywordflow">if</span> (!tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() &amp;&amp;
                    tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>() != <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ae4bd936cbb47803986c83242cbb51867">ITERATIVE_ROUTING</a> &amp;&amp;
                    tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>() != <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad60cf756d6bb24af372d7fe7c279f44d">EXHAUSTIVE_ITERATIVE_ROUTING</a>) {
                    <span class="comment">// TODO: msg is resent only in recursive mode</span>
                    EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::internalHandleRpcTimeout() @ &quot;</span>
                       &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Resend msg for key &quot;</span> &lt;&lt; destKey
                       &lt;&lt; endl;
                    <a class="code" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8" title="Handles a BaseOverlayMessage ">handleBaseOverlayMessage</a>(tempMsg, destKey);
                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4037dda18976c8d98ef3f9ed663f8dc7">getNextHopsArraySize</a>() &gt; 1) {
                    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4037dda18976c8d98ef3f9ed663f8dc7">getNextHopsArraySize</a>() - 1; ++i) {
                        tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a3bce024c4897adfef1f8ad7a645a11ab">setNextHops</a>(i, tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a23f57254381410520aaa67dd52b0bc6c">getNextHops</a>(i + 1));
                    }
                    tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a3cb14c09b287d613f26d58ad39fec4d0">setNextHopsArraySize</a>(tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a4037dda18976c8d98ef3f9ed663f8dc7">getNextHopsArraySize</a>() - 1);
                    EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::internalHandleRpcTimeout() @ &quot;</span>
                       &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Resend msg to next available node in nextHops[]: &quot;</span>
                       &lt;&lt; tempMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a23f57254381410520aaa67dd52b0bc6c">getNextHops</a>(0).<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; std::endl;
                    <a class="code" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8" title="Handles a BaseOverlayMessage ">handleBaseOverlayMessage</a>(tempMsg);
                } <span class="keywordflow">else</span> {
                    EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::internalHandleRpcTimeout() @ &quot;</span>
                       &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    dropping msg for &quot;</span> &lt;&lt; dest
                       &lt;&lt; endl;
                    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++;
                                 <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> += tempMsg-&gt;getByteLength());
                    <span class="keyword">delete</span> tempMsg;
                }
            } <span class="keywordflow">else</span> {
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++;
                             <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> += tempMsg-&gt;getByteLength());
                <span class="comment">//std::cout &lt;&lt; thisNode.getIp() &lt;&lt; &quot; BaseOverlay::internalHandleRpcTimeout() 2 &quot; &lt;&lt; msg-&gt;getName() &lt;&lt; std::endl;</span>
                <span class="keyword">delete</span> tempMsg;
                <a class="code" href="classBaseOverlay.html#acb8855faa86247ae37ab894891d9f4dd" title="Join the overlay with a given nodeID.">join</a>();
            }
            <span class="keywordflow">break</span>;
        }
    <a class="code" href="RpcMacros_8h.html#a29a8a3f21e67ecb25f58608a54df5191" title="Marks the end of a Remote-Procedure-Call Switch block.">RPC_SWITCH_END</a>( )

    <a class="code" href="classBaseRpc.html" title="Base class for RPCs.">BaseRpc</a>::<a class="code" href="classBaseOverlay.html#ac89854c2f011597f3421d414851f4407" title="Handles rpc timeouts internal in base classes ">internalHandleRpcTimeout</a>(msg, dest, context, rpcId, destKey);
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe4a27831cec5ad68f1ddca071461808"></a><!-- doxytag: member="BaseOverlay::internalSendRouteRpc" ref="afe4a27831cec5ad68f1ddca071461808" args="(BaseRpcMessage *message, const OverlayKey &amp;destKey, const std::vector&lt; TransportAddress &gt; &amp;sourceRoute, RoutingType routingType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::internalSendRouteRpc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseRpcMessage.html">BaseRpcMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>destKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>sourceRoute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a>&#160;</td>
          <td class="paramname"><em>routingType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classBaseRpc.html#a2c7d2b7bc0e2b9eef6481c654d57d877">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01815">1815</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
    <a class="code" href="classFindNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeCall</a>* findNodeCall;
    uint32_t numSiblings = 1;
    <span class="keywordflow">if</span> ((findNodeCall = dynamic_cast&lt;FindNodeCall*&gt;(message)))
        numSiblings = findNodeCall-&gt;<a class="code" href="classFindNodeCall.html#ac5a68f5e9f62d37613c5ce47a9348a92">getNumSiblings</a>();

    <a class="code" href="classBaseOverlay.html#a6f2c598f5d3989a63a8cc7220f1aaf76" title="Sends a message to an overlay node, with the generic routing algorithm.">sendToKey</a>(destKey, message, numSiblings, sourceRoute, routingType);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3b7e4eeca10c3052e0bb51762fe1ce71"></a><!-- doxytag: member="BaseOverlay::internalSendRpcResponse" ref="a3b7e4eeca10c3052e0bb51762fe1ce71" args="(BaseCallMessage *call, BaseResponseMessage *response)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::internalSendRpcResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *&#160;</td>
          <td class="paramname"><em>call</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classBaseRpc.html#a8e96c8787fba93dc24c673507152cff3">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01828">1828</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo =
        check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;(call-&gt;getControlInfo());

    <a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9" title="Enum generated from common/CommonMessages.msg by opp_msgc.">TransportType</a> transportType = <a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>;
    <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>* destNode;
    <span class="keywordflow">if</span> (overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#af6e31869ed325ba04288a69346988343">getSrcNode</a>().<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a84fe39074cd9dc69acf188abf3e2ea12" title="needed by KBR protocols for NAT support">sendRpcResponseToLastHop</a>) {
            <span class="comment">// used for KBR protocols to deal with NATs</span>
            <span class="comment">// (srcNode in call message may contain private IP address)</span>
            destNode = &amp;(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad12b7ac74244fb7ab79ebf41e05fe79c">getLastHop</a>());
        } <span class="keywordflow">else</span> {
            <span class="comment">// used for non-KBR protocols which have to route RPC calls</span>
            <span class="comment">// but can&#39;t use BaseRouteMessage (this doesn&#39;t work with NATs)</span>
            destNode = &amp;(call-&gt;<a class="code" href="classBaseRpcMessage.html#ada3e122125cfb5acc7350277ca69c45a">getSrcNode</a>());
        }
    } <span class="keywordflow">else</span> {
        destNode = &amp;(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#af6e31869ed325ba04288a69346988343">getSrcNode</a>());
    }
    <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>* destKey = &amp;<a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>;

    <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType
        = <span class="keyword">static_cast&lt;</span><a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a><span class="keyword">&gt;</span>(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a4b81411df66c4c813b664665731ee38c">getRoutingType</a>());

    assert(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad80a56dfc9e2b8c5bc12994fee6adda2">getTransportType</a>() != <a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a94f99d3e9b3318d2fc69d80e3c33008b">INTERNAL_TRANSPORT</a>);

    <span class="keywordflow">if</span> ((overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad80a56dfc9e2b8c5bc12994fee6adda2">getTransportType</a>() == <a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a01580b2e886cd821bd7f3f2bcd7c690c">UDP_TRANSPORT</a>) ||
        (routingType == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a18b63fe85aa5e81cd3fca5e3c7c9df82">SEMI_RECURSIVE_ROUTING</a>) ||
        (routingType == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ae4bd936cbb47803986c83242cbb51867">ITERATIVE_ROUTING</a>) ||
        (routingType == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad60cf756d6bb24af372d7fe7c279f44d">EXHAUSTIVE_ITERATIVE_ROUTING</a>)
        ) {
        <span class="comment">// received by UDP or direct response (IR, EIR or SRR routing)</span>
        transportType = <a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a01580b2e886cd821bd7f3f2bcd7c690c">UDP_TRANSPORT</a>;
        overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#abc4f5e4539b4858443cf29523727a995">setVisitedHopsArraySize</a>(0); <span class="comment">//???</span>
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((static_cast&lt;RoutingType&gt; (overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a4b81411df66c4c813b664665731ee38c">getRoutingType</a>())
            == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551aeec4ce5cac6dae9d3d59b1347a9df957">FULL_RECURSIVE_ROUTING</a>)) {
        <span class="comment">// full recursive routing</span>
        destKey = &amp;(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#af6e31869ed325ba04288a69346988343">getSrcNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>());
        destNode = &amp;<a class="code" href="classNodeHandle.html#a79bf2c5e29c969cbd0b2581cb188d8a6" title="the unspecified NodeHandle">NodeHandle::UNSPECIFIED_NODE</a>;
    }
    <span class="comment">// else: source routing -&gt; route back over visited hops</span>

    <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>(transportType,
                    static_cast&lt;CompType&gt;(overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a79a35b8f98c2fecef8d6bc566c4a7437">getSrcComp</a>()),
                    *destNode, *destKey, call, response);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abef37828b7f070044154f53bcd2a765b"></a><!-- doxytag: member="BaseOverlay::isInSimpleMultiOverlayHost" ref="abef37828b7f070044154f53bcd2a765b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::isInSimpleMultiOverlayHost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if overlay is one in an array, inside a SimpleMultiOverlayHost. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true, if overlay is in a SimpleMultiOverlayHost </dd></dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l02105">2105</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> isVector() || getParentModule()-&gt;isVector();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a234b046348574d37d811638f0b27a89e"></a><!-- doxytag: member="BaseOverlay::isMalicious" ref="a234b046348574d37d811638f0b27a89e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::isMalicious </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true, if node is malicious. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true, if node is malicious. </dd></dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00453">453</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a8312d71c91eac1144c94c41fe121a755" title="Check if a node is malicious.">isMalicious</a>(<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab5887b89ba9da5973068e834feb69ce7"></a><!-- doxytag: member="BaseOverlay::isSiblingFor" ref="ab5887b89ba9da5973068e834feb69ce7" args="(const NodeHandle &amp;node, const OverlayKey &amp;key, int numSiblings, bool *err)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::isSiblingFor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSiblings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query if a node is among the siblings for a given key. </p>
<p>Query if a node is among the siblings for a given key. This means, that the nodeId of this node is among the closest numSiblings nodes to the key and that by a local <a class="el" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode()</a> call all other siblings to this key can be retrieved.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>the <a class="el" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> </td></tr>
    <tr><td class="paramname">key</td><td>destination key </td></tr>
    <tr><td class="paramname">numSiblings</td><td>The nodes knows all numSiblings nodes close to this key </td></tr>
    <tr><td class="paramname">err</td><td>return false if the range could not be determined </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>bool true, if the node is responsible for the key. </dd></dl>

<p>Reimplemented in <a class="el" href="classoversim_1_1Chord.html#a5a1c7a5739b0dd0fcea99dac422eb82c">oversim::Chord</a>, <a class="el" href="classHTopology.html#a0370eaefcfeb3b6699ebf6e27791e55a">HTopology</a>, <a class="el" href="classKademlia.html#ada80a26aba760ec53ce539d8180cf865">Kademlia</a>, <a class="el" href="classBasePastry.html#aa8d7ea4daf5bb613fefc62a4da602f2b">BasePastry</a>, <a class="el" href="classBroose.html#a40ebbf7442175faf9f71527d297f2834">Broose</a>, and <a class="el" href="classMyOverlay.html#a1a588f5af9c3aee2484d9d0e8ed89b44">MyOverlay</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00695">695</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="TreeManagement_8cc_source.html#l00332">TreeManagement::checkParentValid()</a>, <a class="el" href="TreeManagement_8cc_source.html#l00587">TreeManagement::getResponsibleDomainKey()</a>, <a class="el" href="BaseApp_8h_source.html#l00264">BaseApp::isSiblingFor()</a>, and <a class="el" href="IterativeLookup_8cc_source.html#l00131">IterativeLookup::start()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;isSiblingFor()&quot;</span>);

    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;isSiblingFor: Not implemented!&quot;</span>);

    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acb8855faa86247ae37ab894891d9f4dd"></a><!-- doxytag: member="BaseOverlay::join" ref="acb8855faa86247ae37ab894891d9f4dd" args="(const OverlayKey &amp;nodeID=OverlayKey::UNSPECIFIED_KEY)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::join </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>nodeID</em> = <code><a class="el" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75">OverlayKey::UNSPECIFIED_KEY</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Join the overlay with a given nodeID. </p>
<p>Join the overlay with a given nodeID. This method may be called by an application to join the overlay with a specific nodeID. It is also called if the node's IP address changes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">nodeID</td><td>The new nodeID for this node. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00602">602</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00299">Bamboo::handleFailedNode()</a>, <a class="el" href="Pastry_8cc_source.html#l00886">Pastry::handleFailedNode()</a>, <a class="el" href="hstreaming_8cc_source.html#l00098">HStreaming::handleReadyMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00575">Pastry::handleRpcTimeout()</a>, <a class="el" href="BasePastry_8cc_source.html#l00524">BasePastry::handleRpcTimeout()</a>, <a class="el" href="Pastry_8cc_source.html#l00252">Pastry::handleTimerEvent()</a>, <a class="el" href="NeighborCache_8cc_source.html#l00780">NeighborCache::handleTimerEvent()</a>, and <a class="el" href="Kademlia_8cc_source.html#l00630">Kademlia::routingTimeout()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;join()&quot;</span>);

    <a class="code" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b" title="number of join retries">joinRetries</a>++;

    <span class="keywordflow">if</span> (((<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) || (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1">FAILED</a>)) &amp;&amp; !<a class="code" href="classBaseOverlay.html#aecfcf5743d274d9c17730f2aeccf1635">rejoinOnFailure</a>) {
        <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1">FAILED</a>;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> != <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
        <span class="comment">// set nodeID and IP</span>
        <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a1c7b834dc2e6e738f1f4db8711a12814" title="Sets the ip address, port and NAT type.">setIp</a>(
            IPAddressResolver().addressOf(getParentModule()-&gt;getParentModule()));

        <span class="keywordflow">if</span> (!nodeID.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>())  {
            <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>(nodeID);
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>()) {
            std::string nodeIdStr = par(<span class="stringliteral">&quot;nodeId&quot;</span>).stdstringValue();

            <span class="keywordflow">if</span> (nodeIdStr.size()) {
                <span class="comment">// manual configuration of nodeId in ini file</span>
                <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>(<a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>(nodeIdStr));
            } <span class="keywordflow">else</span> {
                <a class="code" href="classBaseOverlay.html#a31e60de81d77afdeb0e68f781ded0f9e" title="Overlay implementations can overwrite this virtual method to set a specific nodeID.">setOwnNodeID</a>();
            }
        }
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a> &amp;&amp; !nodeID.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>()) { <span class="comment">// TODO dCBR</span>
        cMessage *msg = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;UDP_C_UNBIND&quot;</span>, UDP_C_UNBIND);
        UDPControlInfo *ctrl = <span class="keyword">new</span> UDPControlInfo();
        ctrl-&gt;setSrcPort(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());
        ctrl-&gt;setSockId(<a class="code" href="classBaseOverlay.html#af0cedb761015fad54f32a96963e8e88c">socketId</a>);
        msg-&gt;setControlInfo(ctrl);
        send(msg, <span class="stringliteral">&quot;udpOut&quot;</span>);
        <a class="code" href="classBaseOverlay.html#a512084e3a224f0a3f284e5e240652a26" title="Tells UDP we want to get all packets arriving on the given port.">bindToPort</a>((<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>() + 10) % 0xFFFF); <span class="comment">// test</span>
        <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>(nodeID);
    }
    cObject** context = <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a9c0e986f725906c17373fac655710e5c">getContext</a>(<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>());
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a7d0beff122a0b5c573dd8ae90c9372d5" title="if true, a node rejoins with its old nodeId and malicious state">restoreContext</a> &amp;&amp; context) {
        <span class="keywordflow">if</span> (*context == NULL) {
            *context = <span class="keyword">new</span> BaseOverlayContext(<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().getKey(),
                                              <a class="code" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e" title="Returns true, if node is malicious.">isMalicious</a>());
        }
    }

    <a class="code" href="classBaseOverlay.html#a3eefb56c2396601373c89d21b5b58110" title="Join the overlay with a given nodeID in thisNode.key.">joinOverlay</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad032eda7f8a65884cf8c6d141224331e"></a><!-- doxytag: member="BaseOverlay::joinForeignPartition" ref="ad032eda7f8a65884cf8c6d141224331e" args="(const NodeHandle &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::joinForeignPartition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Join another overlay partition with the given node as bootstrap node. </p>
<p>Join another overlay partition with the given node as bootstrap node. This method is called to join a foreign overlay partition and start the merging process.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>The foreign bootstrap node </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classoversim_1_1Chord.html#aecef4ab06dbfe72a33006dac9966a408">oversim::Chord</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00651">651</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::joinForeignPartition(): &quot;</span>
                        <span class="stringliteral">&quot;This overlay doesn&#39;t support merging!&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3eefb56c2396601373c89d21b5b58110"></a><!-- doxytag: member="BaseOverlay::joinOverlay" ref="a3eefb56c2396601373c89d21b5b58110" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::joinOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Join the overlay with a given nodeID in thisNode.key. </p>
<p>Join the overlay with a given nodeID in thisNode.key. This method may be called by an application to join the overlay with a specific nodeID. It is also called if the node's IP address changes. </p>

<p>Reimplemented in <a class="el" href="classPastry.html#a06fbfdc4446ac0cfe149eadbb6e59962">Pastry</a>, <a class="el" href="classoversim_1_1Chord.html#a14e93372b444c6b6e7cfe8fdb3eed52d">oversim::Chord</a>, <a class="el" href="classGia.html#a32d9935c5c4968ab92c8e0467b3219ce">Gia</a>, <a class="el" href="classHTopology.html#a7b3d69b96b06c7dc01839406aacd13af">HTopology</a>, <a class="el" href="classBamboo.html#a1b8dba4c0d42b0dbf6b6b2a693c6dc29">Bamboo</a>, <a class="el" href="classKademlia.html#a23662900f3d17541a2b9051a3821a226">Kademlia</a>, <a class="el" href="classoversim_1_1Nice.html#a642dd901f2f5b0561cde5a1c3e932d8e">oversim::Nice</a>, <a class="el" href="classBroose.html#a6e8d0813889738a8c12c47cce18586e5">Broose</a>, and <a class="el" href="classMyOverlay.html#a98f93274ec15fefc1bd3fa24af43b35c">MyOverlay</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01706">1706</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="comment">//  std::cout &lt;&lt; &quot;BaseOverlay::joinOverlay(): Not implemented!&quot; &lt;&lt; endl;</span>
    <span class="keywordflow">return</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a95851770a6ab3a176e1d7b5a7afba3f0"></a><!-- doxytag: member="BaseOverlay::local_lookup" ref="a95851770a6ab3a176e1d7b5a7afba3f0" args="(const OverlayKey &amp;key, int num, bool safe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a> * BaseOverlay::local_lookup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>safe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>finds nodes closest to the given <a class="el" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> </p>
<p>calls <a class="el" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode()</a> (that should be overridden in derived overlay) and returns a list with (num) nodes ordered by distance to the node defined by key.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>the given node </td></tr>
    <tr><td class="paramname">num</td><td>number of nodes that are returned </td></tr>
    <tr><td class="paramname">safe</td><td>The safe parameters is not implemented yet </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00562">562</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseApp_8h_source.html#l00233">BaseApp::callLocalLookup()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;local_lookup()&quot;</span>);

    <span class="keywordflow">if</span> (safe == <span class="keyword">true</span>) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::local_lookup(): &quot;</span>
                            <span class="stringliteral">&quot;safe flag is not implemented!&quot;</span>);
    }

    <span class="keywordflow">if</span> (num &lt; 0) num = INT_MAX;
    <a class="code" href="classBaseKeySortedVector.html">NodeVector</a>* nodeVector = <a class="code" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode</a>(key, min(num, <a class="code" href="classBaseOverlay.html#ab4dadd02486560de3a58773b3a90fb41" title="Query the maximum number of redundant next hop nodes that are returned by findNode().">getMaxNumRedundantNodes</a>()),
                                      min(num,<a class="code" href="classBaseOverlay.html#acd3058ad15b470e024500dd4872e2f09" title="Query the maximum number of siblings (nodes close to a key) that are maintained by this overlay proto...">getMaxNumSiblings</a>()));

    <span class="keywordflow">if</span> (((<span class="keywordtype">int</span>)nodeVector-&gt;size()) &gt; num)
        nodeVector-&gt;resize(num);

    <span class="keywordflow">return</span> nodeVector;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa9d874edfd1b52822e1693695420d5a7"></a><!-- doxytag: member="BaseOverlay::lookupRpc" ref="aa9d874edfd1b52822e1693695420d5a7" args="(LookupCall *call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::lookupRpc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLookupCall.html">LookupCall</a> *&#160;</td>
          <td class="paramname"><em>call</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01988">1988</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> numSiblings = call-&gt;<a class="code" href="classLookupCall.html#a5be7c8b099438db99f2fb0c129ff1edb">getNumSiblings</a>();

    <span class="keywordflow">if</span> (numSiblings &lt; 0) {
        numSiblings = <a class="code" href="classBaseOverlay.html#acd3058ad15b470e024500dd4872e2f09" title="Query the maximum number of siblings (nodes close to a key) that are maintained by this overlay proto...">getMaxNumSiblings</a>();
    }

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323" title="internal overlay state used for setOverlayReady()">internalReadyState</a> == <span class="keyword">false</span>) {
        <span class="comment">// overlay not ready =&gt; lookup failed</span>
        EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::lookupRpc() @ &quot;</span>
           &lt;&lt; <a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    LookupCall &quot;</span>
           &lt;&lt; call-&gt;<a class="code" href="classBaseRpcMessage.html#a79f78c32aa4461025a89e8de3bc35702">getNonce</a>()
           &lt;&lt; <span class="stringliteral">&quot; failed, because overlay module is not ready!&quot;</span> &lt;&lt; endl;

        <a class="code" href="classLookupResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">LookupResponse</a>* response = <span class="keyword">new</span> <a class="code" href="classLookupResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">LookupResponse</a>();
        response-&gt;<a class="code" href="classLookupResponse.html#a89a549b892fa55f591e4da67b2c803f8">setKey</a>(call-&gt;<a class="code" href="classLookupCall.html#ac899d550007c1e632e299e917d38b705">getKey</a>());
        response-&gt;<a class="code" href="classLookupResponse.html#a3a4e3e942bbac01c738c719655fc7b4e">setIsValid</a>(<span class="keyword">false</span>);

        <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>(call, response);

        <span class="keywordflow">return</span>;
    }

    <span class="comment">// create lookup and sent to key</span>
    <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* lookup = <a class="code" href="classBaseOverlay.html#a205a7d44401fb3d77b146e23b2904b6f" title="Creates an abstract iterative lookup instance.">createLookup</a>(static_cast&lt;RoutingType&gt;(
            call-&gt;<a class="code" href="classLookupCall.html#ad0d7ad53c1de441b8567c8c3ecf17753">getRoutingType</a>()), call, NULL, <span class="keyword">true</span>);
    lookup-&gt;<a class="code" href="classAbstractLookup.html#aa1bda70950cbd160ea78d1fcbd8c7767" title="Lookup siblings for a key.">lookup</a>(call-&gt;<a class="code" href="classLookupCall.html#ac899d550007c1e632e299e917d38b705">getKey</a>(), numSiblings, <a class="code" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9" title="maximum hop count">hopCountMax</a>,
                   1, <span class="keyword">new</span> <a class="code" href="classBaseOverlay.html#a4083c91b7d09ceaa7fd2768570814d77">SendToKeyListener</a>( <span class="keyword">this</span>, call ));
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08f453e70d8d295bdbabec4accbb9dad"></a><!-- doxytag: member="BaseOverlay::neighborSet" ref="a08f453e70d8d295bdbabec4accbb9dad" args="(int num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="NodeVector_8h.html#a442f90b66b22aa9fca51f83c5ce1b02b">NodeVector</a> * BaseOverlay::neighborSet </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00662">662</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseApp_8h_source.html#l00244">BaseApp::callNeighborSet()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;neighborSet()&quot;</span>);

    <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#a95851770a6ab3a176e1d7b5a7afba3f0" title="finds nodes closest to the given OverlayKey">local_lookup</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>(), num, <span class="keyword">false</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3eef9db326747d930a455db3b884dac4"></a><!-- doxytag: member="BaseOverlay::nextHopRpc" ref="a3eef9db326747d930a455db3b884dac4" args="(NextHopCall *call)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::nextHopRpc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNextHopCall.html">NextHopCall</a> *&#160;</td>
          <td class="paramname"><em>call</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l02021">2021</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> != <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
        <span class="comment">//TODO EV...</span>
        <span class="comment">//std::cout &lt;&lt; &quot;BaseOverlay::nextHopRpc() (state != READY) &quot; &lt;&lt; state &lt;&lt; &quot; &quot; &lt;&lt; call-&gt;getName() &lt;&lt; std::endl;</span>
        <span class="comment">//delete call;</span>
        <span class="comment">//return;</span>
    }

    <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* routeMsg
        = check_and_cast&lt;<a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>*&gt;(call-&gt;decapsulate());

    <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo =
        check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;(call-&gt;getControlInfo()-&gt;<a class="code" href="classNextHopCall.html#a9ba4dbf11d99bbff0399ae3e0b43ab6a">dup</a>());
    overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ac038719715302b645e9f13fdb85db75b">setHopCount</a>(routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ab59d2969c812aa35d132a68fc2baf819">getHopCount</a>());
    overlayCtrlInfo-&gt;setSrcNode(routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#af9787d89915f01a2055e920148015e17">getSrcNode</a>());
    overlayCtrlInfo-&gt;setRoutingType(routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#a834dd9c8f0b2b776ed5f5b1fa285149a">getRoutingType</a>());

    routeMsg-&gt;setControlInfo(overlayCtrlInfo);
    assert(routeMsg-&gt;getControlInfo());

    std::string temp(<span class="stringliteral">&quot;ACK: [&quot;</span>);
    (temp += routeMsg-&gt;getName()) += <span class="stringliteral">&quot;]&quot;</span>;

    <a class="code" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8" title="Handles a BaseOverlayMessage ">handleBaseOverlayMessage</a>(routeMsg, routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#ad983641a05758bc9d25070f1659b2f34">getDestKey</a>());

    <a class="code" href="classNextHopResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">NextHopResponse</a>* response
        = <span class="keyword">new</span> <a class="code" href="classNextHopResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">NextHopResponse</a>(temp.c_str());
    response-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#adc9bda6bf3f1e194f083e32df15f237d">NEXTHOPRESPONSE_L</a>(response));
    <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>(call, response);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3234dfcf81463984e88a42432734a615"></a><!-- doxytag: member="BaseOverlay::numInitStages" ref="a3234dfcf81463984e88a42432734a615" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int BaseOverlay::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets init stage. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="InitStages_8h.html">InitStages.h</a> for more information about the used stage numbers </dd></dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00072">72</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a89279af766b25396b796fe5cfd77d717" title="total number of stages">NUM_STAGES_ALL</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a269ddf1a8caa1efd25ebf0593cf5b671"></a><!-- doxytag: member="BaseOverlay::providesKbr" ref="a269ddf1a8caa1efd25ebf0593cf5b671" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::providesKbr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00811">811</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b" title="set this to true, if the overlay provides KBR services">kbr</a>; };
</pre></div>
</div>
</div>
<a class="anchor" id="ac1cf471c2918271ed0244e4a9579c878"></a><!-- doxytag: member="BaseOverlay::receiveChangeNotification" ref="ac1cf471c2918271ed0244e4a9579c878" args="(int category, const cPolymorphic *details)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::receiveChangeNotification </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cPolymorphic *&#160;</td>
          <td class="paramname"><em>details</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>callback-method for events at the NotificationBoard </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">category</td><td>... TODO ... </td></tr>
    <tr><td class="paramname">details</td><td>... TODO ... </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classPubSubMMOG.html#ac789c61936dbd0e4787822022f0ecfba">PubSubMMOG</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01055">1055</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    <span class="keywordflow">if</span> (category == NF_OVERLAY_TRANSPORTADDRESS_CHANGED) {
        <a class="code" href="classBaseOverlay.html#a2a53481e2aaf78e6826ab72378bebf48" title="This method gets call if the node has a new TransportAddress (IP address) because he changed his acce...">handleTransportAddressChangedNotification</a>();
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (category == NF_OVERLAY_NODE_LEAVE) {
        <a class="code" href="classBaseOverlay.html#af9ea0a59c26b70c50c63c2c1dc4c2ec3" title="This method gets call **.gracefulLeaveDelay seconds before it is killed.">handleNodeLeaveNotification</a>();
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (category == NF_OVERLAY_NODE_GRACEFUL_LEAVE) {
        <a class="code" href="classBaseOverlay.html#aa2d70984acd164839ca92694a02e7a91" title="This method gets call **.gracefulLeaveDelay seconds before it is killed if this node is among the gra...">handleNodeGracefulLeaveNotification</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a921ac1fec5765f4099276800a82953ab"></a><!-- doxytag: member="BaseOverlay::recordOverlaySentStats" ref="a921ac1fec5765f4099276800a82953ab" args="(BaseOverlayMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::recordOverlaySentStats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Collect overlay specific sent messages statistics. </p>
<p>This method is called from <a class="el" href="classBaseOverlay.html#a10189697bd95f3de66c27c1ecf07e323" title="Sends message to underlay.">BaseOverlay::sendMessageToUDP()</a> for every overlay message that is sent by a node. Use this to collect statistical data for overlay protocol specific message types.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The overlay message to be sent to the UDP layer </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classBroose.html#aa1c5b32d5a8043dedb9e541d7d6a106a">Broose</a>, <a class="el" href="classoversim_1_1Koorde.html#a01b7b96e8645ae25ef00bc04355b9f10">oversim::Koorde</a>, and <a class="el" href="classoversim_1_1Chord.html#a1b0ebef0b3440c6a7e5c30bb41f3979e">oversim::Chord</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01098">1098</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// collect statistics ...</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a42f4c08f6408d155a9907957ecf12d79"></a><!-- doxytag: member="BaseOverlay::recursiveRoutingHook" ref="a42f4c08f6408d155a9907957ecf12d79" args="(const TransportAddress &amp;dest, BaseRouteMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseOverlay::recursiveRoutingHook </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Hook for forwarded message in recursive lookup mode. </p>
<p>This hook is called just before a message is forwarded to a next hop or if the message is at its destination just before it is sent to the app. Default implementation just returns true. This hook can for example be used to detect failed nodes and call <a class="el" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7" title="Handles a failed node.">handleFailedNode()</a> before the actual forwarding takes place.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>destination node </td></tr>
    <tr><td class="paramname">msg</td><td>message to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true, if message should be forwarded; false, if message will be forwarded later by an other function or message has been discarded </dd></dl>

<p>Reimplemented in <a class="el" href="classKademlia.html#a2d0f3eebfa308ff4c88831d917efa8fd">Kademlia</a>, and <a class="el" href="classPastry.html#ab467d712a7a56dece193bce66bd635d6">Pastry</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01405">1405</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2096f89814b5740257cee106b60dda15"></a><!-- doxytag: member="BaseOverlay::registerComp" ref="a2096f89814b5740257cee106b60dda15" args="(CompType compType, cModule *module)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::registerComp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&#160;</td>
          <td class="paramname"><em>compType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cModule *&#160;</td>
          <td class="paramname"><em>module</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l02053">2053</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseApp_8cc_source.html#l00058">BaseApp::initialize()</a>, and <a class="el" href="BaseRpc_8cc_source.html#l00092">BaseRpc::initRpcs()</a>.</p>
<div class="fragment"><pre class="fragment">{
    cGate *gate = NULL;

    <span class="keywordflow">if</span> (module != NULL) {
        gate = module-&gt;gate(<span class="stringliteral">&quot;direct_in&quot;</span>);
        <span class="keywordflow">if</span> (gate == NULL) {
            <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::registerComp(): The module &quot;</span>
                                <span class="stringliteral">&quot;which tried to register has &quot;</span>
                                <span class="stringliteral">&quot;no direct_in gate!&quot;</span>);
        }
    }

    <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>[compType] = make_pair&lt;cModule*, cGate*&gt;(module, gate);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0bfca744a28f47cae8c99243de04b005"></a><!-- doxytag: member="BaseOverlay::removeLookup" ref="a0bfca744a28f47cae8c99243de04b005" args="(AbstractLookup *lookup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::removeLookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAbstractLookup.html">AbstractLookup</a> *&#160;</td>
          <td class="paramname"><em>lookup</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the abstract lookup instance. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">lookup</td><td>the <a class="el" href="classLookup.html">Lookup</a> to remove </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01681">1681</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="IterativeLookup_8cc_source.html#l00111">IterativeLookup::~IterativeLookup()</a>, and <a class="el" href="RecursiveLookup_8cc_source.html#l00044">RecursiveLookup::~RecursiveLookup()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a>.erase(lookup);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad62efdef2b674f46e5368354efb6104f"></a><!-- doxytag: member="BaseOverlay::route" ref="ad62efdef2b674f46e5368354efb6104f" args="(const OverlayKey &amp;key, CompType destComp, CompType srcComp, cPacket *msg, const std::vector&lt; TransportAddress &gt; &amp;sourceRoute=TransportAddress::UNSPECIFIED_NODES, RoutingType routingType=DEFAULT_ROUTING)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::route </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&#160;</td>
          <td class="paramname"><em>destComp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&#160;</td>
          <td class="paramname"><em>srcComp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>sourceRoute</em> = <code><a class="el" href="classTransportAddress.html#ac4c193ddadf638fa3f1bf0de04fbaaab">TransportAddress::UNSPECIFIED_NODES</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a>&#160;</td>
          <td class="paramname"><em>routingType</em> = <code>DEFAULT_ROUTING</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Routes message through overlay. </p>
<p>The default implementation uses FindNode to determine next hops and a generic greedy routing algorithm provides with SendToKey.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>destination key </td></tr>
    <tr><td class="paramname">destComp</td><td>the destination component </td></tr>
    <tr><td class="paramname">srcComp</td><td>the source component </td></tr>
    <tr><td class="paramname">msg</td><td>message to route </td></tr>
    <tr><td class="paramname">sourceRoute</td><td>If sourceRoute is given, the message gets sent via all nodes in the list before it is routed (nextHop is used as a proxy) </td></tr>
    <tr><td class="paramname">routingType</td><td>specifies the routing mode (ITERATIVE_ROUTING, ...) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01354">1354</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (key.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() &amp;&amp;
        (!sourceRoute.size() || sourceRoute[0].isUnspecified()))
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;route(): Key and hint unspecified!&quot;</span>);

    <span class="comment">// encapsulate in a app data message for multiplexing</span>
    <span class="comment">// to destination component</span>
    <a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>* baseAppDataMsg =
        <span class="keyword">new</span> <a class="code" href="classBaseAppDataMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseAppDataMessage</a>(<span class="stringliteral">&quot;BaseAppDataMessage&quot;</span>);
    baseAppDataMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#a97cdd7fcea5530191070f50e92d39eb5">setType</a>(<a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17eab0641a3f5bcb1e08ee72afe9583ff5e6">APPDATA</a>);
    baseAppDataMsg-&gt;<a class="code" href="classBaseAppDataMessage.html#a092231658f48cbed0893ffb17317b28a">setDestComp</a>(destComp);
    baseAppDataMsg-&gt;<a class="code" href="classBaseAppDataMessage.html#a16908cd61320fb16c58baab9d9973a23">setSrcComp</a>(srcComp);
    baseAppDataMsg-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#aebae47ba62d6bd9fe00ca6d779bf0e81">BASEAPPDATA_L</a>(baseAppDataMsg));
    baseAppDataMsg-&gt;setName(msg-&gt;getName());

    baseAppDataMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#a07301be10c346b328a0a9cc4cae48777">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad8d082af8526e80f7de088c52ad1b7c0">APP_DATA_STAT</a>);
    baseAppDataMsg-&gt;encapsulate(msg);

    <span class="comment">// debug output</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::route() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
        &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
        &lt;&lt; <span class="stringliteral">&quot;    Received message from application&quot;</span>
        &lt;&lt; endl;
    }

    <span class="keywordflow">if</span> (key.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() &amp;&amp; sourceRoute.size() &lt;= 1) {
        <a class="code" href="classBaseOverlay.html#a10189697bd95f3de66c27c1ecf07e323" title="Sends message to underlay.">sendMessageToUDP</a>(sourceRoute[0], baseAppDataMsg);
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323" title="internal overlay state used for setOverlayReady()">internalReadyState</a> == <span class="keyword">false</span>) {
            <span class="comment">// overlay not ready =&gt; sendToKey doesn&#39;t work yet</span>
            EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::route() @ &quot;</span>
               &lt;&lt; <a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>().<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
               &lt;&lt; <span class="stringliteral">&quot;    Couldn&#39;t route application message to key &quot;</span>
               &lt;&lt; key.<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16)
               &lt;&lt; <span class="stringliteral">&quot; because the overlay module is not ready!&quot;</span> &lt;&lt; endl;
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++;
                         <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> += baseAppDataMsg-&gt;getByteLength());
            <span class="keyword">delete</span> baseAppDataMsg;
            <span class="keywordflow">return</span>;
        }

        <a class="code" href="classBaseOverlay.html#a6f2c598f5d3989a63a8cc7220f1aaf76" title="Sends a message to an overlay node, with the generic routing algorithm.">sendToKey</a>(key, baseAppDataMsg, 1, sourceRoute, routingType);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a19c2c01f99a19bb7de0b30cdd866a2e0"></a><!-- doxytag: member="BaseOverlay::sendMessageToAllComp" ref="a19c2c01f99a19bb7de0b30cdd866a2e0" args="(cMessage *msg, CompType srcComp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::sendMessageToAllComp </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e">CompType</a>&#160;</td>
          <td class="paramname"><em>srcComp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l02089">2089</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    take(msg);

    <span class="keywordflow">for</span> (CompModuleList::iterator it = <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>.begin();
         it != <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>.end(); it++) {

        <span class="comment">// don&#39;t send message to the origination component</span>
        <span class="keywordflow">if</span> (it-&gt;first != srcComp)
            sendDirect((cMessage*)msg-&gt;dup(), it-&gt;second.second);
    }

    <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a10189697bd95f3de66c27c1ecf07e323"></a><!-- doxytag: member="BaseOverlay::sendMessageToUDP" ref="a10189697bd95f3de66c27c1ecf07e323" args="(const TransportAddress &amp;dest, cPacket *msg, simtime_t delay=SIMTIME_ZERO)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::sendMessageToUDP </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>delay</em> = <code>SIMTIME_ZERO</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends message to underlay. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>destination node </td></tr>
    <tr><td class="paramname">msg</td><td>message to send </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseRpc.html#abaae7e20b0960e9a90cadd216a2a6126">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01186">1186</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="Nice_8cc_source.html#l00555">oversim::Nice::BasicJoinLayer()</a>, <a class="el" href="Nice_8cc_source.html#l02263">oversim::Nice::checkLeaderHeartbeatsForCollisions()</a>, <a class="el" href="Nice_8cc_source.html#l02936">oversim::Nice::ClusterMergeRequest()</a>, <a class="el" href="Pastry_8cc_source.html#l00761">Pastry::doJoinUpdate()</a>, <a class="el" href="Pastry_8cc_source.html#l01070">Pastry::endProcessingState()</a>, <a class="el" href="Gia_8cc_source.html#l00872">Gia::forwardMessage()</a>, <a class="el" href="Gia_8cc_source.html#l00828">Gia::forwardSearchResponseMessage()</a>, <a class="el" href="Nice_8cc_source.html#l00755">oversim::Nice::handleNiceClusterMergeRequest()</a>, <a class="el" href="Nice_8cc_source.html#l01282">oversim::Nice::handleNiceJoinCluster()</a>, <a class="el" href="Nice_8cc_source.html#l01348">oversim::Nice::handleNiceJoineval()</a>, <a class="el" href="Nice_8cc_source.html#l01433">oversim::Nice::handleNicePingProbe()</a>, <a class="el" href="Nice_8cc_source.html#l01478">oversim::Nice::handleNicePollRp()</a>, <a class="el" href="Nice_8cc_source.html#l00623">oversim::Nice::handleNiceQuery()</a>, <a class="el" href="Nice_8cc_source.html#l01506">oversim::Nice::handleNiceQueryResponse()</a>, <a class="el" href="Nice_8cc_source.html#l01572">oversim::Nice::handleNiceRemove()</a>, <a class="el" href="Pastry_8cc_source.html#l00252">Pastry::handleTimerEvent()</a>, <a class="el" href="Pastry_8cc_source.html#l00729">Pastry::iterativeJoinHook()</a>, <a class="el" href="Nice_8cc_source.html#l01670">oversim::Nice::JoinCluster()</a>, <a class="el" href="Nice_8cc_source.html#l03135">oversim::Nice::LeaderTransfer()</a>, <a class="el" href="Nice_8cc_source.html#l03467">oversim::Nice::pollRP()</a>, <a class="el" href="Nice_8cc_source.html#l00594">oversim::Nice::Query()</a>, <a class="el" href="Pastry_8cc_source.html#l00696">Pastry::recursiveRoutingHook()</a>, <a class="el" href="Kademlia_8cc_source.html#l00889">Kademlia::recursiveRoutingHook()</a>, <a class="el" href="Nice_8cc_source.html#l03190">oversim::Nice::Remove()</a>, <a class="el" href="Nice_8cc_source.html#l03365">oversim::Nice::sendDataToOverlay()</a>, <a class="el" href="Nice_8cc_source.html#l01757">oversim::Nice::sendHeartbeats()</a>, <a class="el" href="Nice_8cc_source.html#l01999">oversim::Nice::sendHeartbeatTo()</a>, <a class="el" href="Gia_8cc_source.html#l00780">Gia::sendKeyListToNeighbor()</a>, <a class="el" href="Quon_8cc_source.html#l01047">Quon::sendMessage()</a>, <a class="el" href="Vast_8cc_source.html#l01085">Vast::sendMessage()</a>, <a class="el" href="Gia_8cc_source.html#l00748">Gia::sendMessage_DISCONNECT()</a>, <a class="el" href="Gia_8cc_source.html#l00706">Gia::sendMessage_JOIN_ACK()</a>, <a class="el" href="Gia_8cc_source.html#l00730">Gia::sendMessage_JOIN_DNY()</a>, <a class="el" href="Gia_8cc_source.html#l00664">Gia::sendMessage_JOIN_REQ()</a>, <a class="el" href="Gia_8cc_source.html#l00682">Gia::sendMessage_JOIN_RSP()</a>, <a class="el" href="Gia_8cc_source.html#l00764">Gia::sendMessage_UPDATE()</a>, <a class="el" href="Nice_8cc_source.html#l02135">oversim::Nice::sendRemoveTo()</a>, and <a class="el" href="Gia_8cc_source.html#l00801">Gia::sendToken()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// if there&#39;s still a control info attached to the message, remove it</span>
    cPolymorphic* ctrlInfo = msg-&gt;removeControlInfo();
    <span class="keywordflow">if</span> (ctrlInfo != NULL)
        <span class="keyword">delete</span> ctrlInfo;

    <span class="comment">// debug message</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::sendMessageToUDP() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
        &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
        &lt;&lt; <span class="stringliteral">&quot;    Sending &quot;</span> &lt;&lt; *msg &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; dest.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
        &lt;&lt; endl;
    }

    msg-&gt;setKind(UDP_C_DATA);
    UDPControlInfo* udpControlInfo = <span class="keyword">new</span> UDPControlInfo();
    udpControlInfo-&gt;setSrcAddr(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>());
    udpControlInfo-&gt;setSrcPort(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());
    udpControlInfo-&gt;setDestAddr(dest.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>());
    udpControlInfo-&gt;setDestPort(dest.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());
    msg-&gt;setControlInfo(udpControlInfo);

    <span class="keywordflow">if</span> (dest != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>) {
        <a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* baseOverlayMsg
            = check_and_cast&lt;<a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>*&gt;(msg);
        <span class="comment">// record statistics, if message is not local</span>
        <span class="keywordflow">if</span> (baseOverlayMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#af0a4bf31778e05a809f8d55dff5bfcc1">getStatType</a>() == <a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad8d082af8526e80f7de088c52ad1b7c0">APP_DATA_STAT</a>) {
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4" title="number of sent app data packets (incl. forwarded packets)">numAppDataSent</a>++;
                         <a class="code" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4" title="number of sent app data bytes (incl. forwarded bytes)">bytesAppDataSent</a> += msg-&gt;getByteLength());
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (baseOverlayMsg-&gt;<a class="code" href="classBaseOverlayMessage.html#af0a4bf31778e05a809f8d55dff5bfcc1">getStatType</a>() == <a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfab0d83e0332137027a936320d7c9bdb86">APP_LOOKUP_STAT</a>){
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f" title="number of sent app loookup packets (incl. forwarded packets)">numAppLookupSent</a>++; <a class="code" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4" title="number of sent app lookup bytes (incl. forwarded bytes)">bytesAppLookupSent</a> +=
                         msg-&gt;getByteLength());
        } <span class="keywordflow">else</span> { <span class="comment">// MAINTENANCE_STAT</span>
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa" title="number of sent maintenance packets (incl. forwarded packets)">numMaintenanceSent</a>++; <a class="code" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4" title="number of sent maintenance bytes (incl. forwarded bytes)">bytesMaintenanceSent</a> +=
                         msg-&gt;getByteLength());
        }
        <a class="code" href="classBaseOverlay.html#a921ac1fec5765f4099276800a82953ab" title="Collect overlay specific sent messages statistics.">recordOverlaySentStats</a>(baseOverlayMsg);

        <span class="keywordflow">if</span> (dynamic_cast&lt;BaseResponseMessage*&gt;(msg) &amp;&amp; <a class="code" href="classBaseOverlay.html#a077a698fb5f760290bc67e4a50dfed9e">getMeasureAuthBlock</a>()) {
            <span class="comment">// TODO: Also consider signed DhtPutMessages</span>
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a30e11530c77c2164f0a5c98a489a9fab" title="number of bytes sent for rpc message signatures">bytesAuthBlockSent</a> += ceil(<a class="code" href="CommonMessages__m_8h.html#a06bed1f18c78d612efe98781ddd5f56f">AUTHBLOCK_L</a>/8.0));
        }
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">if</span> (dest.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() == <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()) { <span class="comment">// to same node, but different port</span>
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#ae34cc8a058a4dae47a3815cba64ceba2" title="number of packets sent to same host but different port (SimpleMultiOverlayHost)">numInternalSent</a>++; <a class="code" href="classBaseOverlay.html#ad0af3d066a89ced910b082a980f68f25" title="number of bytes sent to same host but different port (SimpleMultiOverlayHost)">bytesInternalSent</a> += msg-&gt;getByteLength());
        }
    }
    sendDelayed(msg, delay, <span class="stringliteral">&quot;udpOut&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac93829bc8095a76e6208cf0ec12188b0"></a><!-- doxytag: member="BaseOverlay::sendRouteMessage" ref="ac93829bc8095a76e6208cf0ec12188b0" args="(const TransportAddress &amp;dest, BaseRouteMessage *msg, bool ack)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::sendRouteMessage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseRouteMessage.html">BaseRouteMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ack</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01144">1144</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* ctrlInfo =
        <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*<span class="keyword">&gt;</span>(msg-&gt;removeControlInfo());

    <span class="comment">// records statistics, if we forward this message</span>
    <span class="keywordflow">if</span> (ctrlInfo &amp;&amp; ctrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad12b7ac74244fb7ab79ebf41e05fe79c">getLastHop</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()) {
        <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="classBaseOverlayMessage.html#af0a4bf31778e05a809f8d55dff5bfcc1">getStatType</a>() == <a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad8d082af8526e80f7de088c52ad1b7c0">APP_DATA_STAT</a>) {
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99" title="number of forwarded app data packets">numAppDataForwarded</a>++;
                         <a class="code" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6" title="number of forwarded app data bytes at out-gate">bytesAppDataForwarded</a> += msg-&gt;getByteLength());
        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="classBaseOverlayMessage.html#af0a4bf31778e05a809f8d55dff5bfcc1">getStatType</a>() == <a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfab0d83e0332137027a936320d7c9bdb86">APP_LOOKUP_STAT</a>){
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd" title="number of forwarded app lookup packets">numAppLookupForwarded</a>++;
                         <a class="code" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7" title="number of forwarded app lookup bytes at out-gate">bytesAppLookupForwarded</a> += msg-&gt;getByteLength());
        } <span class="keywordflow">else</span> {
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7" title="number of forwarded maintenance packets">numMaintenanceForwarded</a>++;
                         <a class="code" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b" title="number of forwarded maintenance bytes at out-gate">bytesMaintenanceForwarded</a> += msg-&gt;getByteLength());
        }
    }

    <span class="keyword">delete</span> ctrlInfo;

    <span class="keywordflow">if</span> (msg &amp;&amp; (dest != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>)) {
        msg-&gt;<a class="code" href="classBaseRouteMessage.html#a61070a9184332a428bf8f98e8eef21da">setHopCount</a>(msg-&gt;<a class="code" href="classBaseRouteMessage.html#ab59d2969c812aa35d132a68fc2baf819">getHopCount</a>() + 1);
    }
    <span class="keywordflow">if</span> (!ack)
        <a class="code" href="classBaseOverlay.html#a10189697bd95f3de66c27c1ecf07e323" title="Sends message to underlay.">sendMessageToUDP</a>(dest, msg);
    <span class="keywordflow">else</span> {
        <a class="code" href="classNextHopCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">NextHopCall</a>* nextHopCall = <span class="keyword">new</span> <a class="code" href="classNextHopCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">NextHopCall</a>(msg-&gt;getName());
        nextHopCall-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#ad34959682756fd7714484c7326ae823b">NEXTHOPCALL_L</a>(nextHopCall));
        nextHopCall-&gt;encapsulate(msg);
        nextHopCall-&gt;<a class="code" href="classBaseOverlayMessage.html#a07301be10c346b328a0a9cc4cae48777">setStatType</a>(msg-&gt;<a class="code" href="classBaseOverlayMessage.html#af0a4bf31778e05a809f8d55dff5bfcc1">getStatType</a>());

        <span class="comment">// TODO parameter, in recursive mode routeRetries should be 0,</span>
        <span class="comment">// in iterative mode routeRetries could be more than 0</span>
        uint8_t routeRetries = 0;
        <a class="code" href="classBaseRpc.html#ac128e0ff0d09f81b652f7d3e00ce9441" title="Sends a Remote-Procedure-Call message to the underlay ">sendUdpRpcCall</a>(dest, nextHopCall, NULL, -1, routeRetries);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6f2c598f5d3989a63a8cc7220f1aaf76"></a><!-- doxytag: member="BaseOverlay::sendToKey" ref="a6f2c598f5d3989a63a8cc7220f1aaf76" args="(const OverlayKey &amp;key, BaseOverlayMessage *message, int numSiblings=1, const std::vector&lt; TransportAddress &gt; &amp;sourceRoute=TransportAddress::UNSPECIFIED_NODES, RoutingType routingType=DEFAULT_ROUTING)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::sendToKey </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numSiblings</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>sourceRoute</em> = <code><a class="el" href="classTransportAddress.html#ac4c193ddadf638fa3f1bf0de04fbaaab">TransportAddress::UNSPECIFIED_NODES</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a>&#160;</td>
          <td class="paramname"><em>routingType</em> = <code>DEFAULT_ROUTING</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a message to an overlay node, with the generic routing algorithm. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The destination key </td></tr>
    <tr><td class="paramname">message</td><td>Message to be sent </td></tr>
    <tr><td class="paramname">numSiblings</td><td>number of siblings to send message to (numSiblings &gt; 1 means multicast) </td></tr>
    <tr><td class="paramname">sourceRoute</td><td>If sourceRoute is given, the message gets sent via all nodes in the list before it is routed (nextHop is used as a proxy) </td></tr>
    <tr><td class="paramname">routingType</td><td>specifies the routing mode (ITERATIVE_ROUTING, ...) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01411">1411</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="Kademlia_8cc_source.html#l00889">Kademlia::recursiveRoutingHook()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* routeMsg = NULL;

    <span class="keywordflow">if</span> (routingType == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>) routingType = <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a>;

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::sendToKey() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
        &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
        &lt;&lt; <span class="stringliteral">&quot;    Sending &quot;</span> &lt;&lt; msg &lt;&lt;  <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; key
        &lt;&lt; endl;
    }

    <span class="keywordflow">if</span> (key.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() &amp;&amp;
        !(sourceRoute.size() &amp;&amp; !sourceRoute[0].isUnspecified()))
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;BaseOverlay::sendToKey(): &quot;</span>
                            <span class="stringliteral">&quot;unspecified destination address and key!&quot;</span>);

    <span class="keywordflow">if</span> (msg-&gt;getType() != <a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17ea9fb39f8e1c5f2ff00e45bb7294e5524f">OVERLAYROUTE</a>) {
        assert(!msg-&gt;getControlInfo());
        routeMsg = <span class="keyword">new</span> <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>(<span class="stringliteral">&quot;BaseRouteMessage&quot;</span>);
        routeMsg-&gt;setType(<a class="code" href="CommonMessages__m_8h.html#a6af1a552a7a6bce33c291758c369b17ea9fb39f8e1c5f2ff00e45bb7294e5524f">OVERLAYROUTE</a>);
        routeMsg-&gt;setRoutingType(routingType);
        routeMsg-&gt;setDestKey(key);
        routeMsg-&gt;setSrcNode(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
        routeMsg-&gt;setStatType(msg-&gt;getStatType());
        <span class="comment">// copy the name of the inner message</span>
        routeMsg-&gt;setName(msg-&gt;getName());
        routeMsg-&gt;setBitLength(<a class="code" href="CommonMessages__m_8h.html#aa51e9b4f9362c33b9a432fd496bc31d0">BASEROUTE_L</a>(routeMsg));
        routeMsg-&gt;encapsulate(msg);

        <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* routeCtrlInfo = <span class="keyword">new</span> <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>;
        routeCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a9d6567bfe6cfeed2323b975f8ad1422f">setLastHop</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>);
        routeCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a36db08008216830aaa46b21ee16db58a">setTransportType</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>);
        routeCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a3a396692c3655f8277f57d8ca8bdb311">setRoutingType</a>(routingType);
        routeMsg-&gt;setControlInfo(routeCtrlInfo);

        <span class="comment">//message marked as not already forwarded to tier1</span>
        routeMsg-&gt;setContextPointer(NULL);
    } <span class="keywordflow">else</span> {
        routeMsg = check_and_cast&lt;<a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>*&gt;(msg);
        routingType = <span class="keyword">static_cast&lt;</span><a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a><span class="keyword">&gt;</span>(routeMsg-&gt;getRoutingType());
    }

    <span class="comment">// set timestamp for next hop</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9" title="collect delay for single hops">collectPerHopDelay</a>) {
        routeMsg-&gt;<a class="code" href="classBaseRouteMessage.html#aae48f2e4c29aec529e1055743a0e63e4">setHopStamp</a>(simTime());
    }

    <span class="keywordflow">if</span> (sourceRoute.size() &amp;&amp; !sourceRoute[0].isUnspecified()) {
        <span class="comment">// send msg to nextHop if specified (used for e.g. join rpcs)</span>
        <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* ctrlInfo = check_and_cast&lt;<a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*&gt;
            (routeMsg-&gt;getControlInfo());
        ctrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#a36db08008216830aaa46b21ee16db58a">setTransportType</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a01580b2e886cd821bd7f3f2bcd7c690c">UDP_TRANSPORT</a>);
        assert(routeMsg-&gt;getNextHopsArraySize() == 0);
        routeMsg-&gt;setNextHopsArraySize(sourceRoute.size());
        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; sourceRoute.size(); ++i)
            routeMsg-&gt;setNextHops(i, sourceRoute[i]);
        <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a42f4c08f6408d155a9907957ecf12d79" title="Hook for forwarded message in recursive lookup mode.">recursiveRoutingHook</a>(sourceRoute[0], routeMsg)) { <span class="comment">//test</span>
            <a class="code" href="classBaseOverlay.html#ac93829bc8095a76e6208cf0ec12188b0">sendRouteMessage</a>(sourceRoute[0], routeMsg, <a class="code" href="classBaseOverlay.html#a6e9090bf68f45a31d727a6c7f0501d43" title="send ACK when receiving route message">routeMsgAcks</a>);
        }
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">if</span> ((routingType == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ae4bd936cbb47803986c83242cbb51867">ITERATIVE_ROUTING</a>)
        || (routingType == <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551ad60cf756d6bb24af372d7fe7c279f44d">EXHAUSTIVE_ITERATIVE_ROUTING</a>)
        ) {

        <span class="comment">// create lookup and sent to key</span>
        <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* lookup = <a class="code" href="classBaseOverlay.html#a205a7d44401fb3d77b146e23b2904b6f" title="Creates an abstract iterative lookup instance.">createLookup</a>(routingType, routeMsg, NULL,
                                    (routeMsg-&gt;getStatType() == <a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad8d082af8526e80f7de088c52ad1b7c0">APP_DATA_STAT</a>));
        lookup-&gt;<a class="code" href="classAbstractLookup.html#aa1bda70950cbd160ea78d1fcbd8c7767" title="Lookup siblings for a key.">lookup</a>(routeMsg-&gt;getDestKey(), numSiblings, <a class="code" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9" title="maximum hop count">hopCountMax</a>,
                       0, <span class="keyword">new</span> <a class="code" href="classBaseOverlay.html#a4083c91b7d09ceaa7fd2768570814d77">SendToKeyListener</a>(<span class="keyword">this</span>, routeMsg));
    } <span class="keywordflow">else</span>  {
        <span class="comment">// recursive routing</span>
        <a class="code" href="classBaseKeySortedVector.html">NodeVector</a>* nextHops = <a class="code" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode</a>(routeMsg-&gt;getDestKey(),
                                        <a class="code" href="classBaseOverlay.html#ad0094285f9af244aec5e5fe600126243" title="numRedundantNodes for recursive routing">recNumRedundantNodes</a>,
                                        numSiblings, routeMsg);

        <span class="keywordflow">if</span> (nextHops-&gt;size() == 0) {
            EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::sendToKey() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
               &lt;&lt; <span class="stringliteral">&quot;    FindNode() returned NULL - dropping message&quot;</span>
               &lt;&lt; endl;
            <span class="comment">//std::cout &lt;&lt; simTime() &lt;&lt; &quot; &quot; &lt;&lt; thisNode.getIp() &lt;&lt; &quot; &quot; &lt;&lt; state</span>
            <span class="comment">//          &lt;&lt; &quot; FindNode() returned NULL - dropping message &quot;</span>
            <span class="comment">//          &lt;&lt; routeMsg-&gt;getName() &lt;&lt; &quot; from &quot;</span>
            <span class="comment">//          &lt;&lt; routeMsg-&gt;getSrcNode() &lt;&lt; std::endl;</span>

            <span class="comment">// statistics</span>
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++; <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a> += routeMsg-&gt;getByteLength());
            <span class="keyword">delete</span> routeMsg;
        } <span class="keywordflow">else</span> {
            <span class="comment">// delete message if the hop count maximum is exceeded</span>
            <span class="keywordflow">if</span> (routeMsg-&gt;getHopCount() &gt;= <a class="code" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9" title="maximum hop count">hopCountMax</a>) {

                EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::sendToKey() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                   &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                   &lt;&lt; <span class="stringliteral">&quot;    Discards &quot;</span> &lt;&lt; routeMsg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span>
                   &lt;&lt; routeMsg-&gt;getSrcNode().getIp() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
                   &lt;&lt; <span class="stringliteral">&quot;    The hop count maximum has been exceeded (&quot;</span>
                   &lt;&lt; routeMsg-&gt;getHopCount() &lt;&lt; <span class="stringliteral">&quot;&gt;=&quot;</span>
                   &lt;&lt; <a class="code" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9" title="maximum hop count">hopCountMax</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>
                   &lt;&lt; endl;
                <span class="comment">//std::cout &lt;&lt; &quot;[BaseOverlay::sendToKey() @ &quot; &lt;&lt; thisNode.getIp()</span>
                <span class="comment">//          &lt;&lt; &quot; (&quot; &lt;&lt; thisNode.getKey().toString(16) &lt;&lt; &quot;)]\n&quot;</span>
                <span class="comment">//          &lt;&lt; &quot;    Discards &quot; &lt;&lt; routeMsg-&gt;getName() &lt;&lt; &quot; from &quot;</span>
                <span class="comment">//          &lt;&lt; routeMsg-&gt;getSrcNode().getIp() &lt;&lt; &quot;\n&quot;</span>
                <span class="comment">//          &lt;&lt; &quot;    The hop count maximum has been exceeded (&quot;</span>
                <span class="comment">//          &lt;&lt; routeMsg-&gt;getHopCount() &lt;&lt; &quot;&gt;=&quot;</span>
                <span class="comment">//          &lt;&lt; hopCountMax &lt;&lt; &quot;)&quot;</span>
                <span class="comment">//          &lt;&lt; std::endl;</span>

                <span class="comment">// statistics</span>
                <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++;
                             bytesDropped += routeMsg-&gt;getByteLength());
                <span class="keyword">delete</span> routeMsg;
                <span class="keyword">delete</span> nextHops;
                <span class="keywordflow">return</span>;
            }

            <a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>* overlayCtrlInfo =
                <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classOverlayCtrlInfo.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">OverlayCtrlInfo</a>*<span class="keyword">&gt;</span>(routeMsg-&gt;getControlInfo());
            assert(overlayCtrlInfo);

            <span class="comment">// check and choose nextHop candidate</span>
            <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>* nextHop = NULL;
            <span class="keywordtype">bool</span> err, isSibling;
            isSibling = <a class="code" href="classBaseOverlay.html#ab5887b89ba9da5973068e834feb69ce7" title="Query if a node is among the siblings for a given key.">isSiblingFor</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, routeMsg-&gt;getDestKey(),
                                     numSiblings, &amp;err);

            <span class="comment">// if route is recorded we can do a real loop detection</span>
            std::set&lt;TransportAddress&gt; visitedHops;
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; routeMsg-&gt;getVisitedHopsArraySize(); ++i) {
                visitedHops.insert(routeMsg-&gt;getVisitedHops(i));
            }

            <span class="keywordflow">for</span> (uint32_t index = 0; nextHop == NULL &amp;&amp; nextHops-&gt;size() &gt; index;
                 ++index) {
                nextHop = &amp;((*nextHops)[index]);
                <span class="comment">// loop detection</span>
                <span class="keywordflow">if</span> (((overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ad12b7ac74244fb7ab79ebf41e05fe79c">getLastHop</a>() == *nextHop) &amp;&amp;
                     (*nextHop != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>)) ||
                     (visitedHops.find(*nextHop) != visitedHops.end()) ||
                     <span class="comment">// do not forward msg to source node</span>
                    ((*nextHop == routeMsg-&gt;getSrcNode()) &amp;&amp;
                     (<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a> != routeMsg-&gt;getSrcNode())) ||
                     <span class="comment">// nextHop is thisNode, but isSiblingFor() is false</span>
                    ((*nextHop == <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>) &amp;&amp; (!isSibling))) {
                    nextHop = NULL;
                }
            }

            <span class="keywordflow">if</span> (nextHop == NULL) {
                <span class="keywordflow">if</span> (!<a class="code" href="classBaseOverlay.html#a53ded56af8bba8e4caa9a9b29e01ab87">checkFindNode</a>(routeMsg)) {
                    EV &lt;&lt; <span class="stringliteral">&quot;[BaseOverlay::sendToKey() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Discards &quot;</span> &lt;&lt; routeMsg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span>
                       &lt;&lt; routeMsg-&gt;getSrcNode().getIp() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    No useful nextHop found!&quot;</span>
                       &lt;&lt; endl;
                    <span class="comment">//std::cout &lt;&lt; thisNode.getIp() &lt;&lt; &quot; packet from &quot;</span>
                    <span class="comment">//          &lt;&lt; routeMsg-&gt;getSrcNode().getIp()</span>
                    <span class="comment">//          &lt;&lt; &quot; dropped: &quot; &lt;&lt; routeMsg</span>
                    <span class="comment">//          &lt;&lt; &quot; &quot; &lt;&lt; state &lt;&lt; std::endl;</span>
                    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>++;
                                 bytesDropped += routeMsg-&gt;getByteLength());
                }
                <span class="keyword">delete</span> routeMsg;
                <span class="keyword">delete</span> nextHops;
                <span class="keywordflow">return</span>;
            }

            assert(!nextHop-&gt;<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>());

            <span class="comment">// callForward to app</span>
            <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ac9acbeb30646d54f620d87641d91b113" title="forward messages to applications?">useCommonAPIforward</a> &amp;&amp;
                dynamic_cast&lt;BaseAppDataMessage*&gt;(
                        routeMsg-&gt;getEncapsulatedPacket()) &amp;&amp;
                routeMsg-&gt;getContextPointer() == NULL) {
                <a class="code" href="classBaseOverlay.html#a71bcb54aa4fc66bdf97cc9c87fffc318" title="Calls forward function in application.">callForward</a>(routeMsg-&gt;getDestKey(), routeMsg, *nextHop);
                <span class="keyword">delete</span> nextHops;
                <span class="keywordflow">return</span>;
            }
            <span class="comment">//message marked as not already forwarded</span>
            routeMsg-&gt;setContextPointer(NULL);

            <span class="comment">// is this node responsible?</span>
            <span class="keywordflow">if</span> (*nextHop == <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>) {
                <span class="keywordflow">if</span> (isSibling &amp;&amp; !err) {
                    <span class="comment">//EV &lt;&lt; &quot;[BaseOverlay::sendToKey() @ &quot; &lt;&lt; thisNode.getIp()</span>
                    <span class="comment">//   &lt;&lt; &quot; (&quot; &lt;&lt; thisNode.getKey().toString(16) &lt;&lt; &quot;)]\n&quot;</span>
                    <span class="comment">//   &lt;&lt; &quot;    Forwards msg for key &quot; &lt;&lt; routeMsg-&gt;getDestKey() &quot;\n&quot;</span>
                    <span class="comment">//   &lt;&lt; &quot;    to node &quot; &lt;&lt; (*nextHops)[0]</span>
                    <span class="comment">//   &lt;&lt; endl;</span>
                    <span class="keyword">delete</span> nextHops;
                    assert(routeMsg-&gt;getControlInfo());
                    <a class="code" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8" title="Handles a BaseOverlayMessage ">handleBaseOverlayMessage</a>(routeMsg, key);
                    <span class="keywordflow">return</span>;
                } <span class="keywordflow">else</span> {
                    <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;isSiblingsFor() is true with an &quot;</span>
                                        <span class="stringliteral">&quot;error: Erroneous method &quot;</span>
                                        <span class="stringliteral">&quot;isSiblingFor()!&quot;</span>);
                }
            }
            <span class="comment">// else forward msg if this node is not responsible for the key</span>
            overlayCtrlInfo-&gt;<a class="code" href="classOverlayCtrlInfo.html#ac038719715302b645e9f13fdb85db75b">setHopCount</a>(routeMsg-&gt;getHopCount());
            <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a42f4c08f6408d155a9907957ecf12d79" title="Hook for forwarded message in recursive lookup mode.">recursiveRoutingHook</a>(*nextHop, routeMsg)) {
                <a class="code" href="classBaseOverlay.html#ac93829bc8095a76e6208cf0ec12188b0">sendRouteMessage</a>(*nextHop, routeMsg, <a class="code" href="classBaseOverlay.html#a6e9090bf68f45a31d727a6c7f0501d43" title="send ACK when receiving route message">routeMsgAcks</a>);
            }
        }
        <span class="keyword">delete</span> nextHops;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9da615809e832cbc4645cc732d510277"></a><!-- doxytag: member="BaseOverlay::setOverlayReady" ref="a9da615809e832cbc4645cc732d510277" args="(bool ready)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::setOverlayReady </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ready</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the overlay ready icon and register/deregisters the node at the <a class="el" href="classGlobalNodeList.html" title="Global module (formerly known as BootstrapList) that supports the node bootstrap process and contains...">GlobalNodeList</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ready</td><td>true if the overlay changed to ready state (joined successfully) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l01103">1103</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00187">BasePastry::baseChangeState()</a>, <a class="el" href="Gia_8cc_source.html#l00124">Gia::changeState()</a>, <a class="el" href="HTopology_8cc_source.html#l00259">HTopology::changeState()</a>, <a class="el" href="Nice_8cc_source.html#l00248">oversim::Nice::changeState()</a>, <a class="el" href="MyOverlay_8cc_source.html#l00155">MyOverlay::finishOverlay()</a>, <a class="el" href="HTopology_8cc_source.html#l00524">HTopology::finishOverlay()</a>, <a class="el" href="Kademlia_8cc_source.html#l01323">Kademlia::handleBucketRefreshTimerExpired()</a>, <a class="el" href="MyOverlay_8cc_source.html#l00070">MyOverlay::joinOverlay()</a>, <a class="el" href="Kademlia_8cc_source.html#l00204">Kademlia::joinOverlay()</a>, <a class="el" href="Kademlia_8cc_source.html#l01302">Kademlia::lookupFinished()</a>, and <a class="el" href="Kademlia_8cc_source.html#l00239">Kademlia::routingInit()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//TODO new setOverlayState(State state) function</span>
    <span class="keywordflow">if</span> ((ready &amp;&amp; <a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323" title="internal overlay state used for setOverlayReady()">internalReadyState</a>) || (!ready &amp;&amp; !<a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323" title="internal overlay state used for setOverlayReady()">internalReadyState</a>)) {
            <span class="keywordflow">return</span>;
    }

    <a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323" title="internal overlay state used for setOverlayReady()">internalReadyState</a> = ready;

    getDisplayString().setTagArg(<span class="stringliteral">&quot;i&quot;</span>, 1, ready ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;red&quot;</span>);
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e" title="Returns true, if node is malicious.">isMalicious</a>()) {
        getDisplayString().setTagArg(<span class="stringliteral">&quot;i&quot;</span>, 1, ready ? <span class="stringliteral">&quot;green&quot;</span> : <span class="stringliteral">&quot;yellow&quot;</span>);
    }

    <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a94604495a81e687f7492564d788c7c36" title="Colors module-icon blue (ready), green (ready, malicious) or red (not ready)">setOverlayReadyIcon</a>(<a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>(), ready);

    <span class="keywordflow">if</span> (ready) {
        <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>-&gt;<a class="code" href="classBootstrapList.html#a602788717fe7defa84419128764ea517">registerBootstrapNode</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, <a class="code" href="classBaseOverlay.html#a58a2fa722396661f55eb490d989a6df6" title="identifies the overlay this node belongs to (used for multiple overlays)">overlayId</a>);
    } <span class="keywordflow">else</span> {
        <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>-&gt;<a class="code" href="classBootstrapList.html#a918cbbc5c592fb9069abba47a50af7c0">removeBootstrapNode</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>, <a class="code" href="classBaseOverlay.html#a58a2fa722396661f55eb490d989a6df6" title="identifies the overlay this node belongs to (used for multiple overlays)">overlayId</a>);
    }

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a59bde2858b8537864fbad3eb487dbc55" title="pointer to the GlobalParameters module">globalParameters</a>-&gt;<a class="code" href="classGlobalParameters.html#a8d700111d72e65cdefdf87e8f1b3b9b6">getPrintStateToStdOut</a>()) {
        std::cout &lt;&lt; <span class="stringliteral">&quot;OVERLAY STATE: &quot;</span> &lt;&lt; (ready ? <span class="stringliteral">&quot;READY (&quot;</span> : <span class="stringliteral">&quot;OFFLINE (&quot;</span>)
                  &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;
    }

    <a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>* msg = <span class="keyword">new</span> <a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>;
    msg-&gt;<a class="code" href="classCompReadyMessage.html#a07d2b2a15889728c23ed4d80730de2cf">setReady</a>(ready);
    msg-&gt;<a class="code" href="classCompReadyMessage.html#a77640d7f3566804064921b2520ed51b6">setComp</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ead1b904580b02f8adaa1ab2de239c4c79">OVERLAY_COMP</a>);

    <span class="comment">// notify all registered components about new overlay state</span>
    <a class="code" href="classBaseOverlay.html#a19c2c01f99a19bb7de0b30cdd866a2e0">sendMessageToAllComp</a>(msg, <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ead1b904580b02f8adaa1ab2de239c4c79">OVERLAY_COMP</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31e60de81d77afdeb0e68f781ded0f9e"></a><!-- doxytag: member="BaseOverlay::setOwnNodeID" ref="a31e60de81d77afdeb0e68f781ded0f9e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseOverlay::setOwnNodeID </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overlay implementations can overwrite this virtual method to set a specific nodeID. </p>
<p>The default implementation sets a random nodeID. </p>

<p>Reimplemented in <a class="el" href="classHTopology.html#ac14e862eb6abf6d84ffdbc3d79ec6aaf">HTopology</a>, and <a class="el" href="classMyOverlay.html#a9d5aadf1daaa6e02cf3c785811278b0c">MyOverlay</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8cc_source.html#l00657">657</a> of file <a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>(<a class="code" href="classOverlayKey.html#a1983e1b47e32783f8ccd5e59fe725290" title="Returns a random key.">OverlayKey::random</a>());
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="ae2d97f842f0b5746d066b9de64dd23f2"></a><!-- doxytag: member="BaseOverlay::BootstrapList" ref="ae2d97f842f0b5746d066b9de64dd23f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classBootstrapList.html">BootstrapList</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00071">71</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="af4b6fb17cb1da8f210d175cdba0c2c5a"></a><!-- doxytag: member="BaseOverlay::IterativeLookup" ref="af4b6fb17cb1da8f210d175cdba0c2c5a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classIterativeLookup.html">IterativeLookup</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00068">68</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="aef42f314710869966a27962174cb1ca3"></a><!-- doxytag: member="BaseOverlay::IterativePathLookup" ref="aef42f314710869966a27962174cb1ca3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classIterativePathLookup.html">IterativePathLookup</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00069">69</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9d94a8362059c5c49b2cfffeb628f7cb"></a><!-- doxytag: member="BaseOverlay::RecursiveLookup" ref="a9d94a8362059c5c49b2cfffeb628f7cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classRecursiveLookup.html">RecursiveLookup</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00070">70</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4083c91b7d09ceaa7fd2768570814d77"></a><!-- doxytag: member="BaseOverlay::SendToKeyListener" ref="a4083c91b7d09ceaa7fd2768570814d77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classSendToKeyListener.html">SendToKeyListener</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00072">72</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a6523faf8f52af34c73643dc7f3e083eb"></a><!-- doxytag: member="BaseOverlay::appGate" ref="a6523faf8f52af34c73643dc7f3e083eb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const cGate* <a class="el" href="classBaseOverlay.html#a6523faf8f52af34c73643dc7f3e083eb">BaseOverlay::appGate</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00770">770</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="abe4dea93564123116c97d5c4721f0504"></a><!-- doxytag: member="BaseOverlay::bootstrapList" ref="abe4dea93564123116c97d5c4721f0504" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBootstrapList.html">BootstrapList</a>* <a class="el" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504">BaseOverlay::bootstrapList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to the <a class="el" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a> module </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00186">186</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00187">BasePastry::baseChangeState()</a>, <a class="el" href="Gia_8cc_source.html#l00124">Gia::changeState()</a>, <a class="el" href="HTopology_8cc_source.html#l00259">HTopology::changeState()</a>, <a class="el" href="Nice_8cc_source.html#l00248">oversim::Nice::changeState()</a>, <a class="el" href="Gia_8cc_source.html#l01212">Gia::finishOverlay()</a>, <a class="el" href="BasePastry_8cc_source.html#l00813">BasePastry::finishOverlay()</a>, <a class="el" href="HTopology_8cc_source.html#l00524">HTopology::finishOverlay()</a>, <a class="el" href="BaseOverlay_8h_source.html#l00817">getBootstrapList()</a>, <a class="el" href="Quon_8cc_source.html#l00673">Quon::handleJoin()</a>, <a class="el" href="Vast_8cc_source.html#l00728">Vast::handleJoin()</a>, and <a class="el" href="Kademlia_8cc_source.html#l00204">Kademlia::joinOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c90204205e7e5b8f0f12fe4056914e6"></a><!-- doxytag: member="BaseOverlay::bytesAppDataForwarded" ref="a1c90204205e7e5b8f0f12fe4056914e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6">BaseOverlay::bytesAppDataForwarded</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of forwarded app data bytes at out-gate </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00155">155</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Gia_8cc_source.html#l00872">Gia::forwardMessage()</a>, and <a class="el" href="Gia_8cc_source.html#l00828">Gia::forwardSearchResponseMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a82cd1df80e31e2a9148a9efaacc4bc76"></a><!-- doxytag: member="BaseOverlay::bytesAppDataReceived" ref="a82cd1df80e31e2a9148a9efaacc4bc76" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76">BaseOverlay::bytesAppDataReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of received app data bytes (incl. bytes to be forwarded) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00127">127</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae6453766e7a58060722a6323ee3923e4"></a><!-- doxytag: member="BaseOverlay::bytesAppDataSent" ref="ae6453766e7a58060722a6323ee3923e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4">BaseOverlay::bytesAppDataSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of sent app data bytes (incl. forwarded bytes) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00120">120</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="adeff8c454760c6eb4ca847e8dda252a7"></a><!-- doxytag: member="BaseOverlay::bytesAppLookupForwarded" ref="adeff8c454760c6eb4ca847e8dda252a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7">BaseOverlay::bytesAppLookupForwarded</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of forwarded app lookup bytes at out-gate </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00157">157</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8527c9038c62bf66e58c07d41b308527"></a><!-- doxytag: member="BaseOverlay::bytesAppLookupReceived" ref="a8527c9038c62bf66e58c07d41b308527" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527">BaseOverlay::bytesAppLookupReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of received app lookup bytes (incl. bytes to be forwarded) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00129">129</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a118e46bc3e194c63a70e28846480ffe4"></a><!-- doxytag: member="BaseOverlay::bytesAppLookupSent" ref="a118e46bc3e194c63a70e28846480ffe4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4">BaseOverlay::bytesAppLookupSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of sent app lookup bytes (incl. forwarded bytes) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00122">122</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a30e11530c77c2164f0a5c98a489a9fab"></a><!-- doxytag: member="BaseOverlay::bytesAuthBlockSent" ref="a30e11530c77c2164f0a5c98a489a9fab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a30e11530c77c2164f0a5c98a489a9fab">BaseOverlay::bytesAuthBlockSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of bytes sent for rpc message signatures </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00138">138</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9e09857b97f52d340e4710580f25f7a6"></a><!-- doxytag: member="BaseOverlay::bytesDropped" ref="a9e09857b97f52d340e4710580f25f7a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6">BaseOverlay::bytesDropped</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of dropped bytes </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00211">211</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Gia_8cc_source.html#l00872">Gia::forwardMessage()</a>, <a class="el" href="Gia_8cc_source.html#l00828">Gia::forwardSearchResponseMessage()</a>, <a class="el" href="Gia_8cc_source.html#l01006">Gia::getRoute()</a>, and <a class="el" href="Gia_8cc_source.html#l00351">Gia::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="aa62ca9476d42c748e40dd0f287823445"></a><!-- doxytag: member="BaseOverlay::bytesFailedNodeResponseSent" ref="aa62ca9476d42c748e40dd0f287823445" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">BaseOverlay::bytesFailedNodeResponseSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00168">168</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="aca6ed5880fa17a3bfe432deff8d10e7c"></a><!-- doxytag: member="BaseOverlay::bytesFailedNodeSent" ref="aca6ed5880fa17a3bfe432deff8d10e7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">BaseOverlay::bytesFailedNodeSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00166">166</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4b2293e58a3bf5a7ddc0d28cb0669f2f"></a><!-- doxytag: member="BaseOverlay::bytesFindNodeResponseSent" ref="a4b2293e58a3bf5a7ddc0d28cb0669f2f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">BaseOverlay::bytesFindNodeResponseSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00164">164</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a99971f360cdde2d41d239418dfad7281"></a><!-- doxytag: member="BaseOverlay::bytesFindNodeSent" ref="a99971f360cdde2d41d239418dfad7281" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">BaseOverlay::bytesFindNodeSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00162">162</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a55ba3d595b6b23db700cb9f36f34f0ae"></a><!-- doxytag: member="BaseOverlay::bytesInternalReceived" ref="a55ba3d595b6b23db700cb9f36f34f0ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae">BaseOverlay::bytesInternalReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of bytes received from same host but different port (SimpleMultiOverlayHost) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00136">136</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad0af3d066a89ced910b082a980f68f25"></a><!-- doxytag: member="BaseOverlay::bytesInternalSent" ref="ad0af3d066a89ced910b082a980f68f25" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#ad0af3d066a89ced910b082a980f68f25">BaseOverlay::bytesInternalSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of bytes sent to same host but different port (SimpleMultiOverlayHost) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00134">134</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8dbb1ce4eee057f23bea55e5e4a7d13b"></a><!-- doxytag: member="BaseOverlay::bytesMaintenanceForwarded" ref="a8dbb1ce4eee057f23bea55e5e4a7d13b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b">BaseOverlay::bytesMaintenanceForwarded</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of forwarded maintenance bytes at out-gate </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00159">159</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad7bd70b69842cc4db485eafa942332fb"></a><!-- doxytag: member="BaseOverlay::bytesMaintenanceReceived" ref="ad7bd70b69842cc4db485eafa942332fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb">BaseOverlay::bytesMaintenanceReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of received maintenance bytes (incl. bytes to be forwarded) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00131">131</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a27259327737ad8092c612756c0fe6fb4"></a><!-- doxytag: member="BaseOverlay::bytesMaintenanceSent" ref="a27259327737ad8092c612756c0fe6fb4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4">BaseOverlay::bytesMaintenanceSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of sent maintenance bytes (incl. forwarded bytes) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00124">124</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2694627a0082c456367bfa472fff56b9"></a><!-- doxytag: member="BaseOverlay::collectPerHopDelay" ref="a2694627a0082c456367bfa472fff56b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9">BaseOverlay::collectPerHopDelay</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collect delay for single hops </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00194">194</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a572cbbdedbbc386f1d9c3851e9250be7"></a><!-- doxytag: member="BaseOverlay::compModuleList" ref="a572cbbdedbbc386f1d9c3851e9250be7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseOverlay.html#a70450830625412821e38ba9820f4eb16">CompModuleList</a> <a class="el" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">BaseOverlay::compModuleList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00838">838</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="af0eebaddea732ee4ab4d247c388e62bd"></a><!-- doxytag: member="BaseOverlay::creationTime" ref="af0eebaddea732ee4ab4d247c388e62bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd">BaseOverlay::creationTime</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>simtime when the node has been created </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00171">171</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Nice_8cc_source.html#l00521">oversim::Nice::finishOverlay()</a>, <a class="el" href="BasePastry_8cc_source.html#l00813">BasePastry::finishOverlay()</a>, <a class="el" href="Kademlia_8cc_source.html#l00180">Kademlia::finishOverlay()</a>, and <a class="el" href="BaseOverlay_8h_source.html#l00290">getCreationTime()</a>.</p>

</div>
</div>
<a class="anchor" id="a49ff0fb8c25792a1339d54a60c36f2cd"></a><!-- doxytag: member="BaseOverlay::debugOutput" ref="a49ff0fb8c25792a1339d54a60c36f2cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd">BaseOverlay::debugOutput</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>debug output ? </p>

<p>Reimplemented from <a class="el" href="classBaseRpc.html#aff648eca9051b1f37ea42335b021d672">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00191">191</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Gia_8cc_source.html#l00569">Gia::acceptNode()</a>, <a class="el" href="Quon_8cc_source.html#l00315">Quon::addSite()</a>, <a class="el" href="Vast_8cc_source.html#l00363">Vast::buildVoronoi()</a>, <a class="el" href="Gia_8cc_source.html#l00124">Gia::changeState()</a>, <a class="el" href="HTopology_8cc_source.html#l00259">HTopology::changeState()</a>, <a class="el" href="Quon_8cc_source.html#l00121">Quon::changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00106">Vast::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00939">Pastry::checkProxCache()</a>, <a class="el" href="Quon_8cc_source.html#l00456">Quon::deleteSite()</a>, <a class="el" href="Gia_8cc_source.html#l01190">Gia::deliverSearchResult()</a>, <a class="el" href="Gia_8cc_source.html#l00872">Gia::forwardMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00197">Vast::handleAppMessage()</a>, <a class="el" href="Quon_8cc_source.html#l00229">Quon::handleAppMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00568">Vast::handleNodeLeaveNotification()</a>, <a class="el" href="Pastry_8cc_source.html#l01193">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00377">Bamboo::handleStateMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00232">Vast::handleUDPMessage()</a>, <a class="el" href="Quon_8cc_source.html#l00260">Quon::handleUDPMessage()</a>, <a class="el" href="Pastry_8cc_source.html#l00339">Pastry::handleUDPMessage()</a>, <a class="el" href="Gia_8cc_source.html#l00351">Gia::handleUDPMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00034">Vast::initializeOverlay()</a>, <a class="el" href="Pastry_8cc_source.html#l01101">Pastry::mergeState()</a>, <a class="el" href="Quon_8cc_source.html#l00473">Quon::purgeSites()</a>, <a class="el" href="Gia_8cc_source.html#l00621">Gia::removeNeighbor()</a>, <a class="el" href="Vast_8cc_source.html#l00550">Vast::removeNeighbors()</a>, <a class="el" href="Vast_8cc_source.html#l01013">Vast::sendDiscardNode()</a>, <a class="el" href="Quon_8cc_source.html#l01047">Quon::sendMessage()</a>, <a class="el" href="Vast_8cc_source.html#l01085">Vast::sendMessage()</a>, <a class="el" href="Quon_8cc_source.html#l01035">Quon::sendToApp()</a>, <a class="el" href="Vast_8cc_source.html#l01075">Vast::sendToApp()</a>, and <a class="el" href="Quon_8cc_source.html#l00364">Quon::updateThisSite()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e13844ea8090b84a90286f048cdcbf9"></a><!-- doxytag: member="BaseOverlay::defaultRoutingType" ref="a9e13844ea8090b84a90286f048cdcbf9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551">RoutingType</a> <a class="el" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">BaseOverlay::defaultRoutingType</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00192">192</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Kademlia_8cc_source.html#l01323">Kademlia::handleBucketRefreshTimerExpired()</a>, <a class="el" href="HTopology_8cc_source.html#l00476">HTopology::handleJoinTimerExpired()</a>, <a class="el" href="Pastry_8cc_source.html#l00382">Pastry::handlePastryJoinCall()</a>, and <a class="el" href="Kademlia_8cc_source.html#l01183">Kademlia::handleRpcResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="ae035d51942a35ec780eb6f5bad6fe179"></a><!-- doxytag: member="BaseOverlay::delayVector" ref="ae035d51942a35ec780eb6f5bad6fe179" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="classBaseOverlay.html#ae035d51942a35ec780eb6f5bad6fe179">BaseOverlay::delayVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>statistical output vector for packet-delays </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00213">213</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a79031cb868377512713e343a326dbbd9"></a><!-- doxytag: member="BaseOverlay::drawOverlayTopology" ref="a79031cb868377512713e343a326dbbd9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a79031cb868377512713e343a326dbbd9">BaseOverlay::drawOverlayTopology</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00198">198</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab53aaadb5dfe6fea1ac6b90db356cc52"></a><!-- doxytag: member="BaseOverlay::dropFindNodeAttack" ref="ab53aaadb5dfe6fea1ac6b90db356cc52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#ab53aaadb5dfe6fea1ac6b90db356cc52">BaseOverlay::dropFindNodeAttack</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>if node is malicious, it tries a findNode attack </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00201">201</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3bcd2bdd704803d7ec8ae77633cf03fa"></a><!-- doxytag: member="BaseOverlay::dropRouteMessageAttack" ref="a3bcd2bdd704803d7ec8ae77633cf03fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a3bcd2bdd704803d7ec8ae77633cf03fa">BaseOverlay::dropRouteMessageAttack</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>if node is malicious, it drops all received BaseRouteMessages </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00204">204</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a933e505ea77cae4ab0c8edcb77ade2c7"></a><!-- doxytag: member="BaseOverlay::globalNodeList" ref="a933e505ea77cae4ab0c8edcb77ade2c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGlobalNodeList.html">GlobalNodeList</a>* <a class="el" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7">BaseOverlay::globalNodeList</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to <a class="el" href="classGlobalNodeList.html" title="Global module (formerly known as BootstrapList) that supports the node bootstrap process and contains...">GlobalNodeList</a> in this node </p>

<p>Reimplemented from <a class="el" href="classTopologyVis.html#a9ce2dafb76f2ffcc94369ee2eaabee52">TopologyVis</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00183">183</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Quon_8cc_source.html#l00121">Quon::changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00106">Vast::changeState()</a>, <a class="el" href="Vast_8cc_source.html#l01157">Vast::finishOverlay()</a>, and <a class="el" href="Gia_8cc_source.html#l00261">Gia::handleTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a59bde2858b8537864fbad3eb487dbc55"></a><!-- doxytag: member="BaseOverlay::globalParameters" ref="a59bde2858b8537864fbad3eb487dbc55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGlobalParameters.html">GlobalParameters</a>* <a class="el" href="classBaseOverlay.html#a59bde2858b8537864fbad3eb487dbc55">BaseOverlay::globalParameters</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to the <a class="el" href="classGlobalParameters.html" title="Modul for storing global simulation parameters.">GlobalParameters</a> module </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00187">187</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="abffe6fbd25963bc2b7542f22ba6455b9"></a><!-- doxytag: member="BaseOverlay::hopCountMax" ref="abffe6fbd25963bc2b7542f22ba6455b9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9">BaseOverlay::hopCountMax</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>maximum hop count </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00206">206</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Kademlia_8cc_source.html#l01323">Kademlia::handleBucketRefreshTimerExpired()</a>, and <a class="el" href="Kademlia_8cc_source.html#l01183">Kademlia::handleRpcResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="aadc1c2714625c6d3c2d6d0cd96bf4491"></a><!-- doxytag: member="BaseOverlay::hopCountVector" ref="aadc1c2714625c6d3c2d6d0cd96bf4491" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="classBaseOverlay.html#aadc1c2714625c6d3c2d6d0cd96bf4491">BaseOverlay::hopCountVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>statistical output vector for hop-counts </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00214">214</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa484556ed4ff9e4e97394106d0c1d323"></a><!-- doxytag: member="BaseOverlay::internalReadyState" ref="aa484556ed4ff9e4e97394106d0c1d323" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323">BaseOverlay::internalReadyState</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>internal overlay state used for <a class="el" href="classBaseOverlay.html#a9da615809e832cbc4645cc732d510277" title="Sets the overlay ready icon and register/deregisters the node at the GlobalNodeList.">setOverlayReady()</a> </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00839">839</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a319a6b16e55af5e67fbbf65f6d07d5d9"></a><!-- doxytag: member="BaseOverlay::invalidNodesAttack" ref="a319a6b16e55af5e67fbbf65f6d07d5d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a319a6b16e55af5e67fbbf65f6d07d5d9">BaseOverlay::invalidNodesAttack</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>if node is malicious, it tries a invalidNode attack </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00203">203</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae70528858c70e2404e0d83824d6f5bbc"></a><!-- doxytag: member="BaseOverlay::isSiblingAttack" ref="ae70528858c70e2404e0d83824d6f5bbc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc">BaseOverlay::isSiblingAttack</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>if node is malicious, it tries a isSibling attack </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00202">202</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a32b8cfb47f3ef824dcf6ad882e6a6a9f"></a><!-- doxytag: member="BaseOverlay::iterativeLookupConfig" ref="a32b8cfb47f3ef824dcf6ad882e6a6a9f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classIterativeLookupConfiguration.html">IterativeLookupConfiguration</a> <a class="el" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">BaseOverlay::iterativeLookupConfig</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00563">563</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Kademlia_8cc_source.html#l01323">Kademlia::handleBucketRefreshTimerExpired()</a>, and <a class="el" href="Kademlia_8cc_source.html#l00095">Kademlia::initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="aee8e642813784a1f27a81756a4b93b9b"></a><!-- doxytag: member="BaseOverlay::joinRetries" ref="aee8e642813784a1f27a81756a4b93b9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b">BaseOverlay::joinRetries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of join retries </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00140">140</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a53389ea3326d2e8ad53f02b388487d0b"></a><!-- doxytag: member="BaseOverlay::kbr" ref="a53389ea3326d2e8ad53f02b388487d0b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b">BaseOverlay::kbr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>set this to true, if the overlay provides KBR services </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00763">763</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Pastry_8cc_source.html#l00091">Pastry::initializeOverlay()</a>, <a class="el" href="Bamboo_8cc_source.html#l00050">Bamboo::initializeOverlay()</a>, <a class="el" href="Kademlia_8cc_source.html#l00095">Kademlia::initializeOverlay()</a>, and <a class="el" href="BaseOverlay_8h_source.html#l00811">providesKbr()</a>.</p>

</div>
</div>
<a class="anchor" id="aef12c08638b508af44f257824f9391ef"></a><!-- doxytag: member="BaseOverlay::localPort" ref="aef12c08638b508af44f257824f9391ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#aef12c08638b508af44f257824f9391ef">BaseOverlay::localPort</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>used UDP-port </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00205">205</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad25b51c2d6c06dbe12c534307f43822e"></a><!-- doxytag: member="BaseOverlay::lookups" ref="ad25b51c2d6c06dbe12c534307f43822e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">LookupSet</a> <a class="el" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">BaseOverlay::lookups</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00582">582</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab0b0274a06e70c91e8bd8df0c23d435f"></a><!-- doxytag: member="BaseOverlay::measureAuthBlock" ref="ab0b0274a06e70c91e8bd8df0c23d435f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#ab0b0274a06e70c91e8bd8df0c23d435f">BaseOverlay::measureAuthBlock</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>if true, measure the overhead of signatures in rpc messages </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00207">207</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="BaseOverlay_8h_source.html#l00815">getMeasureAuthBlock()</a>.</p>

</div>
</div>
<a class="anchor" id="af0704186e295039c92666176b0b91dae"></a><!-- doxytag: member="BaseOverlay::notificationBoard" ref="af0704186e295039c92666176b0b91dae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NotificationBoard* <a class="el" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae">BaseOverlay::notificationBoard</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to NotificationBoard in this node </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00184">184</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a341a65ab7c50dfbc8222c1adf4f08a99"></a><!-- doxytag: member="BaseOverlay::numAppDataForwarded" ref="a341a65ab7c50dfbc8222c1adf4f08a99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99">BaseOverlay::numAppDataForwarded</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of forwarded app data packets </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00154">154</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Gia_8cc_source.html#l00872">Gia::forwardMessage()</a>, and <a class="el" href="Gia_8cc_source.html#l00828">Gia::forwardSearchResponseMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="aa83e680792f987f9f5f779e12c055898"></a><!-- doxytag: member="BaseOverlay::numAppDataReceived" ref="aa83e680792f987f9f5f779e12c055898" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898">BaseOverlay::numAppDataReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of received app data packets (incl. packets to be forwarded ) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00126">126</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa8c1469e21c59a08a84dec36218582b4"></a><!-- doxytag: member="BaseOverlay::numAppDataSent" ref="aa8c1469e21c59a08a84dec36218582b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4">BaseOverlay::numAppDataSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of sent app data packets (incl. forwarded packets) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00119">119</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8f5ff290e99ab78f3e0bd4a489bfcadd"></a><!-- doxytag: member="BaseOverlay::numAppLookupForwarded" ref="a8f5ff290e99ab78f3e0bd4a489bfcadd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd">BaseOverlay::numAppLookupForwarded</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of forwarded app lookup packets </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00156">156</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9298db97a2d651e02729ad197964bdca"></a><!-- doxytag: member="BaseOverlay::numAppLookupReceived" ref="a9298db97a2d651e02729ad197964bdca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca">BaseOverlay::numAppLookupReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of received app lookup packets (incl. packets to be forwarded) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00128">128</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5b42fe053fd79b9b62680cbfc740ec4f"></a><!-- doxytag: member="BaseOverlay::numAppLookupSent" ref="a5b42fe053fd79b9b62680cbfc740ec4f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f">BaseOverlay::numAppLookupSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of sent app loookup packets (incl. forwarded packets) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00121">121</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a82bd4b76a8d06a1d63bba98f1a34d7"></a><!-- doxytag: member="BaseOverlay::numDropped" ref="a4a82bd4b76a8d06a1d63bba98f1a34d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7">BaseOverlay::numDropped</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of dropped packets </p>

<p>Reimplemented in <a class="el" href="classMyOverlay.html#ac900d0d8bd93f7b17a6519d5ae1d8bc6">MyOverlay</a>.</p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00210">210</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Gia_8cc_source.html#l00872">Gia::forwardMessage()</a>, <a class="el" href="Gia_8cc_source.html#l00828">Gia::forwardSearchResponseMessage()</a>, <a class="el" href="Gia_8cc_source.html#l01006">Gia::getRoute()</a>, and <a class="el" href="Gia_8cc_source.html#l00351">Gia::handleUDPMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="acf40707599a177a1dd5cd9ec4e854dc8"></a><!-- doxytag: member="BaseOverlay::numFailedNodeResponseSent" ref="acf40707599a177a1dd5cd9ec4e854dc8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">BaseOverlay::numFailedNodeResponseSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00167">167</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2fef63e0e6d6d7c991c9cb2c95db5733"></a><!-- doxytag: member="BaseOverlay::numFailedNodeSent" ref="a2fef63e0e6d6d7c991c9cb2c95db5733" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">BaseOverlay::numFailedNodeSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00165">165</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a248581eed6fedf10b2c350cbedd69773"></a><!-- doxytag: member="BaseOverlay::numFindNodeResponseSent" ref="a248581eed6fedf10b2c350cbedd69773" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">BaseOverlay::numFindNodeResponseSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00163">163</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a210e4277548e47f2ec8e772ae5b6eb7f"></a><!-- doxytag: member="BaseOverlay::numFindNodeSent" ref="a210e4277548e47f2ec8e772ae5b6eb7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">BaseOverlay::numFindNodeSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00161">161</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7f185cb11a818d01dcc1a31553de16ef"></a><!-- doxytag: member="BaseOverlay::numInternalReceived" ref="a7f185cb11a818d01dcc1a31553de16ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef">BaseOverlay::numInternalReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of packets received from same host but different port (SimpleMultiOverlayHost) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00135">135</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae34cc8a058a4dae47a3815cba64ceba2"></a><!-- doxytag: member="BaseOverlay::numInternalSent" ref="ae34cc8a058a4dae47a3815cba64ceba2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#ae34cc8a058a4dae47a3815cba64ceba2">BaseOverlay::numInternalSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of packets sent to same host but different port (SimpleMultiOverlayHost) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00133">133</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a05fa895acb368180bbca74d92152d2f7"></a><!-- doxytag: member="BaseOverlay::numMaintenanceForwarded" ref="a05fa895acb368180bbca74d92152d2f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7">BaseOverlay::numMaintenanceForwarded</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of forwarded maintenance packets </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00158">158</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4e7abb41a2c8698bf530015378a13e46"></a><!-- doxytag: member="BaseOverlay::numMaintenanceReceived" ref="a4e7abb41a2c8698bf530015378a13e46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46">BaseOverlay::numMaintenanceReceived</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of received maintenance packets (incl. packets to be forwarded) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00130">130</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="af1077d5c646390fb11d4f646fc22eaaa"></a><!-- doxytag: member="BaseOverlay::numMaintenanceSent" ref="af1077d5c646390fb11d4f646fc22eaaa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa">BaseOverlay::numMaintenanceSent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>number of sent maintenance packets (incl. forwarded packets) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00123">123</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a58a2fa722396661f55eb490d989a6df6"></a><!-- doxytag: member="BaseOverlay::overlayId" ref="a58a2fa722396661f55eb490d989a6df6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBaseOverlay.html#a58a2fa722396661f55eb490d989a6df6">BaseOverlay::overlayId</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>identifies the overlay this node belongs to (used for multiple overlays) </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00190">190</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="HTopology_8cc_source.html#l00259">HTopology::changeState()</a>.</p>

</div>
</div>
<a class="anchor" id="ad0094285f9af244aec5e5fe600126243"></a><!-- doxytag: member="BaseOverlay::recNumRedundantNodes" ref="ad0094285f9af244aec5e5fe600126243" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classBaseOverlay.html#ad0094285f9af244aec5e5fe600126243">BaseOverlay::recNumRedundantNodes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>numRedundantNodes for recursive routing </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00196">196</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a61186fd8bd7368c8a91a63ecc9c62a89"></a><!-- doxytag: member="BaseOverlay::recordRoute" ref="a61186fd8bd7368c8a91a63ecc9c62a89" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a61186fd8bd7368c8a91a63ecc9c62a89">BaseOverlay::recordRoute</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>record visited hops on route </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00197">197</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="Kademlia_8cc_source.html#l00095">Kademlia::initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="af6573aac3c99626958737209309d7e99"></a><!-- doxytag: member="BaseOverlay::recursiveLookupConfig" ref="af6573aac3c99626958737209309d7e99" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRecursiveLookupConfiguration.html">RecursiveLookupConfiguration</a> <a class="el" href="classBaseOverlay.html#af6573aac3c99626958737209309d7e99">BaseOverlay::recursiveLookupConfig</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00564">564</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="aecfcf5743d274d9c17730f2aeccf1635"></a><!-- doxytag: member="BaseOverlay::rejoinOnFailure" ref="aecfcf5743d274d9c17730f2aeccf1635" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#aecfcf5743d274d9c17730f2aeccf1635">BaseOverlay::rejoinOnFailure</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00199">199</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7d0beff122a0b5c573dd8ae90c9372d5"></a><!-- doxytag: member="BaseOverlay::restoreContext" ref="a7d0beff122a0b5c573dd8ae90c9372d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a7d0beff122a0b5c573dd8ae90c9372d5">BaseOverlay::restoreContext</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>if true, a node rejoins with its old nodeId and malicious state </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00208">208</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6e9090bf68f45a31d727a6c7f0501d43"></a><!-- doxytag: member="BaseOverlay::routeMsgAcks" ref="a6e9090bf68f45a31d727a6c7f0501d43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a6e9090bf68f45a31d727a6c7f0501d43">BaseOverlay::routeMsgAcks</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>send ACK when receiving route message </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00195">195</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a84fe39074cd9dc69acf188abf3e2ea12"></a><!-- doxytag: member="BaseOverlay::sendRpcResponseToLastHop" ref="a84fe39074cd9dc69acf188abf3e2ea12" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#a84fe39074cd9dc69acf188abf3e2ea12">BaseOverlay::sendRpcResponseToLastHop</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>needed by KBR protocols for NAT support </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00200">200</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="a93d899c36b4b7b7b012413924c9fb4b5"></a><!-- doxytag: member="BaseOverlay::singleHopDelays" ref="a93d899c36b4b7b7b012413924c9fb4b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structBaseOverlay_1_1HopDelayRecord.html">HopDelayRecord</a>*&gt; <a class="el" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">BaseOverlay::singleHopDelays</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00169">169</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="af0cedb761015fad54f32a96963e8e88c"></a><!-- doxytag: member="BaseOverlay::socketId" ref="af0cedb761015fad54f32a96963e8e88c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseOverlay.html#af0cedb761015fad54f32a96963e8e88c">BaseOverlay::socketId</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00841">841</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab4be6d88417117fbf33a445d56af2655"></a><!-- doxytag: member="BaseOverlay::state" ref="ab4be6d88417117fbf33a445d56af2655" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a> <a class="el" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">BaseOverlay::state</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00216">216</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="BasePastry_8cc_source.html#l00187">BasePastry::baseChangeState()</a>, <a class="el" href="Gia_8cc_source.html#l00124">Gia::changeState()</a>, <a class="el" href="HTopology_8cc_source.html#l00259">HTopology::changeState()</a>, <a class="el" href="Nice_8cc_source.html#l00248">oversim::Nice::changeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00161">Pastry::changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00323">Bamboo::checkProxCache()</a>, <a class="el" href="Pastry_8cc_source.html#l00939">Pastry::checkProxCache()</a>, <a class="el" href="BasePastry_8cc_source.html#l00906">BasePastry::findNode()</a>, <a class="el" href="BasePastry_8cc_source.html#l00813">BasePastry::finishOverlay()</a>, <a class="el" href="Gia_8cc_source.html#l01006">Gia::getRoute()</a>, <a class="el" href="BaseOverlay_8h_source.html#l00102">getState()</a>, <a class="el" href="Vast_8cc_source.html#l00197">Vast::handleAppMessage()</a>, <a class="el" href="Gia_8cc_source.html#l01040">Gia::handleAppMessage()</a>, <a class="el" href="Kademlia_8cc_source.html#l01323">Kademlia::handleBucketRefreshTimerExpired()</a>, <a class="el" href="Bamboo_8cc_source.html#l00299">Bamboo::handleFailedNode()</a>, <a class="el" href="Pastry_8cc_source.html#l00886">Pastry::handleFailedNode()</a>, <a class="el" href="HTopology_8cc_source.html#l00476">HTopology::handleJoinTimerExpired()</a>, <a class="el" href="Vast_8cc_source.html#l00586">Vast::handleNodeGracefulLeaveNotification()</a>, <a class="el" href="Vast_8cc_source.html#l00568">Vast::handleNodeLeaveNotification()</a>, <a class="el" href="HTopology_8cc_source.html#l00455">HTopology::handlePacketGenerationTimer()</a>, <a class="el" href="Pastry_8cc_source.html#l00382">Pastry::handlePastryJoinCall()</a>, <a class="el" href="Pastry_8cc_source.html#l00594">Pastry::handlePastryJoinResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00543">BasePastry::handleRequestLeafSetCall()</a>, <a class="el" href="Bamboo_8cc_source.html#l00183">Bamboo::handleRequestLeafSetResponse()</a>, <a class="el" href="Pastry_8cc_source.html#l00623">Pastry::handleRequestLeafSetResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00634">BasePastry::handleRequestLeafSetResponse()</a>, <a class="el" href="Pastry_8cc_source.html#l00474">Pastry::handleRequestRepairCall()</a>, <a class="el" href="Pastry_8cc_source.html#l00504">Pastry::handleRequestRepairResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00591">BasePastry::handleRequestRoutingRowCall()</a>, <a class="el" href="Pastry_8cc_source.html#l00654">Pastry::handleRequestRoutingRowResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00649">BasePastry::handleRequestRoutingRowResponse()</a>, <a class="el" href="Pastry_8cc_source.html#l00444">Pastry::handleRequestStateCall()</a>, <a class="el" href="Pastry_8cc_source.html#l00608">Pastry::handleRequestStateResponse()</a>, <a class="el" href="Pastry_8cc_source.html#l00358">Pastry::handleRpcCall()</a>, <a class="el" href="BasePastry_8cc_source.html#l00476">BasePastry::handleRpcCall()</a>, <a class="el" href="Kademlia_8cc_source.html#l01183">Kademlia::handleRpcResponse()</a>, <a class="el" href="Pastry_8cc_source.html#l00575">Pastry::handleRpcTimeout()</a>, <a class="el" href="Kademlia_8cc_source.html#l01250">Kademlia::handleRpcTimeout()</a>, <a class="el" href="BasePastry_8cc_source.html#l00524">BasePastry::handleRpcTimeout()</a>, <a class="el" href="Pastry_8cc_source.html#l01193">Pastry::handleStateMessage()</a>, <a class="el" href="Bamboo_8cc_source.html#l00377">Bamboo::handleStateMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00232">Vast::handleUDPMessage()</a>, <a class="el" href="Gia_8cc_source.html#l00351">Gia::handleUDPMessage()</a>, <a class="el" href="Kademlia_8cc_source.html#l00755">Kademlia::isSiblingFor()</a>, <a class="el" href="Kademlia_8cc_source.html#l00204">Kademlia::joinOverlay()</a>, <a class="el" href="HTopology_8cc_source.html#l00510">HTopology::joinOverlay()</a>, <a class="el" href="Kademlia_8cc_source.html#l01302">Kademlia::lookupFinished()</a>, <a class="el" href="Pastry_8cc_source.html#l01101">Pastry::mergeState()</a>, <a class="el" href="Pastry_8cc_source.html#l00232">Pastry::pingResponse()</a>, <a class="el" href="BasePastry_8cc_source.html#l00273">BasePastry::proxCallback()</a>, <a class="el" href="Kademlia_8cc_source.html#l00239">Kademlia::routingInit()</a>, and <a class="el" href="Vast_8cc_source.html#l01139">Vast::setBootstrapedIcon()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e2f70aa82a9b4920877b3a13dd1e0ea"></a><!-- doxytag: member="BaseOverlay::udpGate" ref="a2e2f70aa82a9b4920877b3a13dd1e0ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const cGate* <a class="el" href="classBaseOverlay.html#a2e2f70aa82a9b4920877b3a13dd1e0ea">BaseOverlay::udpGate</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00769">769</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<a class="anchor" id="af2f7102d7cc6f5ecb1c3ecb3d9c93df3"></a><!-- doxytag: member="BaseOverlay::underlayConfigurator" ref="af2f7102d7cc6f5ecb1c3ecb3d9c93df3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classUnderlayConfigurator.html">UnderlayConfigurator</a>* <a class="el" href="classBaseOverlay.html#af2f7102d7cc6f5ecb1c3ecb3d9c93df3">BaseOverlay::underlayConfigurator</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to <a class="el" href="classUnderlayConfigurator.html" title="Base class for configurators of different underlay models.">UnderlayConfigurator</a> in this node </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00185">185</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

<p>Referenced by <a class="el" href="MyOverlay_8cc_source.html#l00086">MyOverlay::handleTimerEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9acbeb30646d54f620d87641d91b113"></a><!-- doxytag: member="BaseOverlay::useCommonAPIforward" ref="ac9acbeb30646d54f620d87641d91b113" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseOverlay.html#ac9acbeb30646d54f620d87641d91b113">BaseOverlay::useCommonAPIforward</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>forward messages to applications? </p>

<p>Definition at line <a class="el" href="BaseOverlay_8h_source.html#l00193">193</a> of file <a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BaseOverlay_8h_source.html">BaseOverlay.h</a></li>
<li><a class="el" href="BaseOverlay_8cc_source.html">BaseOverlay.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classBaseOverlay.html">BaseOverlay</a>      </li>

    <li class="footer">Generated on Thu Mar 6 2014 14:06:38 for OverSim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>

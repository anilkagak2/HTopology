<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: BaseOverlay.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OverSim
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('BaseOverlay_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">BaseOverlay.h</div>  </div>
</div>
<div class="contents">
<a href="BaseOverlay_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (C) 2006 Institut fuer Telematik, Universitaet Karlsruhe (TH)</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// This program is free software; you can redistribute it and/or</span>
<a name="l00004"></a>00004 <span class="comment">// modify it under the terms of the GNU General Public License</span>
<a name="l00005"></a>00005 <span class="comment">// as published by the Free Software Foundation; either version 2</span>
<a name="l00006"></a>00006 <span class="comment">// of the License, or (at your option) any later version.</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00009"></a>00009 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00010"></a>00010 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00011"></a>00011 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00014"></a>00014 <span class="comment">// along with this program; if not, write to the Free Software</span>
<a name="l00015"></a>00015 <span class="comment">// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 
<a name="l00024"></a>00024 <span class="preprocessor">#ifndef __BASEOVERLAY_H_</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#define __BASEOVERLAY_H_</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="oversim__mapset_8h.html">oversim_mapset.h</a>&gt;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;omnetpp.h&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="NodeVector_8h.html">NodeVector.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="TopologyVis_8h.html">TopologyVis.h</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;INotifiable.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="BaseRpc_8h.html">BaseRpc.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="BaseTcpSupport_8h.html">BaseTcpSupport.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="IterativeLookupConfiguration_8h.html">IterativeLookupConfiguration.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="RecursiveLookup_8h.html">RecursiveLookup.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="InitStages_8h.html">InitStages.h</a>&gt;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="keyword">class </span><a class="code" href="classGlobalNodeList.html" title="Global module (formerly known as BootstrapList) that supports the node bootstrap process and contains...">GlobalNodeList</a>;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classUnderlayConfigurator.html" title="Base class for configurators of different underlay models.">UnderlayConfigurator</a>;
<a name="l00042"></a>00042 <span class="keyword">class </span><a class="code" href="classBaseApp.html" title="Base class for applications.">BaseApp</a>;
<a name="l00043"></a>00043 <span class="keyword">class </span><a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>;
<a name="l00044"></a>00044 <span class="keyword">class </span><a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>;
<a name="l00045"></a>00045 <span class="keyword">class </span>NotificationBoard;
<a name="l00046"></a>00046 <span class="keyword">class </span><a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>;
<a name="l00047"></a>00047 <span class="keyword">class </span><a class="code" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a>;
<a name="l00048"></a>00048 
<a name="l00062"></a><a class="code" href="classBaseOverlay.html">00062</a> <span class="keyword">class </span><a class="code" href="classBaseOverlay.html" title="Base class for overlays.">BaseOverlay</a> : <span class="keyword">public</span> INotifiable,
<a name="l00063"></a>00063                     <span class="keyword">public</span> <a class="code" href="classBaseRpc.html" title="Base class for RPCs.">BaseRpc</a>,
<a name="l00064"></a>00064                     <span class="keyword">public</span> <a class="code" href="classBaseTcpSupport.html">BaseTcpSupport</a>,
<a name="l00065"></a>00065                     <span class="keyword">public</span> <a class="code" href="classTopologyVis.html">TopologyVis</a>
<a name="l00066"></a>00066 {
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="classBaseOverlay.html#af4b6fb17cb1da8f210d175cdba0c2c5a">00068</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classIterativeLookup.html" title="This class implements a basic greedy lookup strategy.">IterativeLookup</a>;
<a name="l00069"></a><a class="code" href="classBaseOverlay.html#aef42f314710869966a27962174cb1ca3">00069</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classIterativePathLookup.html" title="This class implements a path lookup.">IterativePathLookup</a>;
<a name="l00070"></a><a class="code" href="classBaseOverlay.html#a9d94a8362059c5c49b2cfffeb628f7cb">00070</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRecursiveLookup.html">RecursiveLookup</a>;
<a name="l00071"></a><a class="code" href="classBaseOverlay.html#ae2d97f842f0b5746d066b9de64dd23f2">00071</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a>;
<a name="l00072"></a><a class="code" href="classBaseOverlay.html#a4083c91b7d09ceaa7fd2768570814d77">00072</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSendToKeyListener.html">SendToKeyListener</a>;
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00075"></a>00075     <span class="comment">//--- Construction / Destruction -----------------------------------------</span>
<a name="l00076"></a>00076     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="keyword">public</span>:
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <a class="code" href="classBaseOverlay.html#a9d3fd0a833ef00d1a739ced007469505">BaseOverlay</a>();
<a name="l00081"></a>00081 
<a name="l00083"></a>00083     <span class="keyword">virtual</span> <a class="code" href="classBaseOverlay.html#a4fd9da1c26016b59e19ac0ca938ba312" title="Virtual destructor.">~BaseOverlay</a>();
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">00085</a>     <span class="keyword">enum</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a> {
<a name="l00086"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">00086</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>      = 0,
<a name="l00087"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab746fc2a119638665d6ac9d493146662">00087</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab746fc2a119638665d6ac9d493146662">BOOTSTRAP</a> = 1,
<a name="l00088"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa6f9e50300f12679850ddc29f15cdf37b">00088</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa6f9e50300f12679850ddc29f15cdf37b">DISCOVERY</a> = 2,
<a name="l00089"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faee36df62cd4384e95a4a735b8acbc1ea">00089</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faee36df62cd4384e95a4a735b8acbc1ea">PREJOIN</a>   = 3,
<a name="l00090"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">00090</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>      = 4,
<a name="l00091"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a">00091</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a">POSTJOIN</a>  = 5,
<a name="l00092"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">00092</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>     = 6,
<a name="l00093"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa844ef1f60e4f4efe32c7ba89315a7bf7">00093</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa844ef1f60e4f4efe32c7ba89315a7bf7">REFRESH</a>   = 7,
<a name="l00094"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faad4c4f4f3bddd311d8c11b20c1c6d00f">00094</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faad4c4f4f3bddd311d8c11b20c1c6d00f">SHUTDOWN</a>  = 8,
<a name="l00095"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1">00095</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa99c9df0220f7a63e3b548d19181dc2b1">FAILED</a>    = 9,
<a name="l00096"></a>00096 
<a name="l00097"></a>00097         <span class="comment">//some aliases for compatibility</span>
<a name="l00098"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faa17c975f477d6dd1f472e031d5bd6bc0">00098</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40faa17c975f477d6dd1f472e031d5bd6bc0">RSET</a>      = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>,
<a name="l00099"></a><a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa5eb3bb010076f581e3a98cddf2531686">00099</a>         <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa5eb3bb010076f581e3a98cddf2531686">BSET</a>      = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fad74d9b561a828ca8b85ad8cd7689b54a">POSTJOIN</a>
<a name="l00100"></a>00100     };
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="classBaseOverlay.html#adff10d8324516c75347fe67f11897435">00102</a>     <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a> <a class="code" href="classBaseOverlay.html#adff10d8324516c75347fe67f11897435">getState</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a>; };
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html">00104</a>     <span class="keyword">class </span><a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html">BaseOverlayContext</a> : <span class="keyword">public</span> cObject
<a name="l00105"></a>00105     {
<a name="l00106"></a>00106     <span class="keyword">public</span>:
<a name="l00107"></a><a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html#a7cc31b97afeb437fbb239423c621ad18">00107</a>         <a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html#a6cd8594e36667eb173eee1081ed6ded5">BaseOverlayContext</a>(<span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; <a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html#a7cc31b97afeb437fbb239423c621ad18">key</a>, <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html#aedc767ab6f5852af04b18666d131da1d">malicious</a>) : key(key), malicious(malicious) {};
<a name="l00108"></a>00108         <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> <a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html#a7cc31b97afeb437fbb239423c621ad18">key</a>;
<a name="l00109"></a><a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html#aedc767ab6f5852af04b18666d131da1d">00109</a>         <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay_1_1BaseOverlayContext.html#aedc767ab6f5852af04b18666d131da1d">malicious</a>;
<a name="l00110"></a>00110     };
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00114"></a>00114     <span class="comment">//--- Statistics ---------------------------------------------------------</span>
<a name="l00115"></a>00115     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="keyword">private</span>:<span class="comment">//fields: statistics</span>
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4">00119</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#aa8c1469e21c59a08a84dec36218582b4" title="number of sent app data packets (incl. forwarded packets)">numAppDataSent</a>;   
<a name="l00120"></a><a class="code" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4">00120</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#ae6453766e7a58060722a6323ee3923e4" title="number of sent app data bytes (incl. forwarded bytes)">bytesAppDataSent</a>; 
<a name="l00121"></a><a class="code" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f">00121</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a5b42fe053fd79b9b62680cbfc740ec4f" title="number of sent app loookup packets (incl. forwarded packets)">numAppLookupSent</a>;   
<a name="l00122"></a><a class="code" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4">00122</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a118e46bc3e194c63a70e28846480ffe4" title="number of sent app lookup bytes (incl. forwarded bytes)">bytesAppLookupSent</a>; 
<a name="l00123"></a><a class="code" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa">00123</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#af1077d5c646390fb11d4f646fc22eaaa" title="number of sent maintenance packets (incl. forwarded packets)">numMaintenanceSent</a>;   
<a name="l00124"></a><a class="code" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4">00124</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a27259327737ad8092c612756c0fe6fb4" title="number of sent maintenance bytes (incl. forwarded bytes)">bytesMaintenanceSent</a>; 
<a name="l00126"></a><a class="code" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898">00126</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#aa83e680792f987f9f5f779e12c055898" title="number of received app data packets (incl. packets to be forwarded )">numAppDataReceived</a>;   
<a name="l00127"></a><a class="code" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76">00127</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a82cd1df80e31e2a9148a9efaacc4bc76" title="number of received app data bytes (incl. bytes to be forwarded)">bytesAppDataReceived</a>; 
<a name="l00128"></a><a class="code" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca">00128</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a9298db97a2d651e02729ad197964bdca" title="number of received app lookup packets (incl. packets to be forwarded)">numAppLookupReceived</a>;   
<a name="l00129"></a><a class="code" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527">00129</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a8527c9038c62bf66e58c07d41b308527" title="number of received app lookup bytes (incl. bytes to be forwarded)">bytesAppLookupReceived</a>; 
<a name="l00130"></a><a class="code" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46">00130</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a4e7abb41a2c8698bf530015378a13e46" title="number of received maintenance packets (incl. packets to be forwarded)">numMaintenanceReceived</a>;   
<a name="l00131"></a><a class="code" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb">00131</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#ad7bd70b69842cc4db485eafa942332fb" title="number of received maintenance bytes (incl. bytes to be forwarded)">bytesMaintenanceReceived</a>; 
<a name="l00133"></a><a class="code" href="classBaseOverlay.html#ae34cc8a058a4dae47a3815cba64ceba2">00133</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#ae34cc8a058a4dae47a3815cba64ceba2" title="number of packets sent to same host but different port (SimpleMultiOverlayHost)">numInternalSent</a>;  
<a name="l00134"></a><a class="code" href="classBaseOverlay.html#ad0af3d066a89ced910b082a980f68f25">00134</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#ad0af3d066a89ced910b082a980f68f25" title="number of bytes sent to same host but different port (SimpleMultiOverlayHost)">bytesInternalSent</a>;  
<a name="l00135"></a><a class="code" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef">00135</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a7f185cb11a818d01dcc1a31553de16ef" title="number of packets received from same host but different port (SimpleMultiOverlayHost)">numInternalReceived</a>;  
<a name="l00136"></a><a class="code" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae">00136</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a55ba3d595b6b23db700cb9f36f34f0ae" title="number of bytes received from same host but different port (SimpleMultiOverlayHost)">bytesInternalReceived</a>;  
<a name="l00138"></a><a class="code" href="classBaseOverlay.html#a30e11530c77c2164f0a5c98a489a9fab">00138</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a30e11530c77c2164f0a5c98a489a9fab" title="number of bytes sent for rpc message signatures">bytesAuthBlockSent</a>; 
<a name="l00140"></a><a class="code" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b">00140</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#aee8e642813784a1f27a81756a4b93b9b" title="number of join retries">joinRetries</a>; 
<a name="l00142"></a>00142 <span class="keyword">protected</span>:
<a name="l00143"></a>00143 
<a name="l00147"></a><a class="code" href="structBaseOverlay_1_1HopDelayRecord.html">00147</a>     <span class="keyword">struct </span><a class="code" href="structBaseOverlay_1_1HopDelayRecord.html" title="Structure for computing the average delay in one specific hop.">HopDelayRecord</a>
<a name="l00148"></a>00148     {
<a name="l00149"></a><a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#a83f056780cd6b9b68f8eb999d5b45482">00149</a>         <span class="keywordtype">int</span> <a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#a83f056780cd6b9b68f8eb999d5b45482">count</a>;
<a name="l00150"></a><a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#abcc398fdefba9230fcafb94e701f3071">00150</a>         simtime_t <a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#abcc398fdefba9230fcafb94e701f3071">val</a>;
<a name="l00151"></a><a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#a12dcfc0c11ca7ff44302500b4c4b06e3">00151</a>         <a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#a12dcfc0c11ca7ff44302500b4c4b06e3">HopDelayRecord</a>() : <a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#a83f056780cd6b9b68f8eb999d5b45482">count</a>(0), <a class="code" href="structBaseOverlay_1_1HopDelayRecord.html#abcc398fdefba9230fcafb94e701f3071">val</a>(0) {};
<a name="l00152"></a>00152     };
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99">00154</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a341a65ab7c50dfbc8222c1adf4f08a99" title="number of forwarded app data packets">numAppDataForwarded</a>;   
<a name="l00155"></a><a class="code" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6">00155</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a1c90204205e7e5b8f0f12fe4056914e6" title="number of forwarded app data bytes at out-gate">bytesAppDataForwarded</a>; 
<a name="l00156"></a><a class="code" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd">00156</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a8f5ff290e99ab78f3e0bd4a489bfcadd" title="number of forwarded app lookup packets">numAppLookupForwarded</a>;   
<a name="l00157"></a><a class="code" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7">00157</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#adeff8c454760c6eb4ca847e8dda252a7" title="number of forwarded app lookup bytes at out-gate">bytesAppLookupForwarded</a>; 
<a name="l00158"></a><a class="code" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7">00158</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a05fa895acb368180bbca74d92152d2f7" title="number of forwarded maintenance packets">numMaintenanceForwarded</a>;   
<a name="l00159"></a><a class="code" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b">00159</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a8dbb1ce4eee057f23bea55e5e4a7d13b" title="number of forwarded maintenance bytes at out-gate">bytesMaintenanceForwarded</a>; 
<a name="l00161"></a><a class="code" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">00161</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a210e4277548e47f2ec8e772ae5b6eb7f">numFindNodeSent</a>; 
<a name="l00162"></a><a class="code" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">00162</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a99971f360cdde2d41d239418dfad7281">bytesFindNodeSent</a>; 
<a name="l00163"></a><a class="code" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">00163</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a248581eed6fedf10b2c350cbedd69773">numFindNodeResponseSent</a>; 
<a name="l00164"></a><a class="code" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">00164</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a4b2293e58a3bf5a7ddc0d28cb0669f2f">bytesFindNodeResponseSent</a>; 
<a name="l00165"></a><a class="code" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">00165</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a2fef63e0e6d6d7c991c9cb2c95db5733">numFailedNodeSent</a>; 
<a name="l00166"></a><a class="code" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">00166</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#aca6ed5880fa17a3bfe432deff8d10e7c">bytesFailedNodeSent</a>; 
<a name="l00167"></a><a class="code" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">00167</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#acf40707599a177a1dd5cd9ec4e854dc8">numFailedNodeResponseSent</a>; 
<a name="l00168"></a><a class="code" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">00168</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#aa62ca9476d42c748e40dd0f287823445">bytesFailedNodeResponseSent</a>; 
<a name="l00169"></a><a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">00169</a>     std::vector&lt;HopDelayRecord*&gt; <a class="code" href="classBaseOverlay.html#a93d899c36b4b7b7b012413924c9fb4b5">singleHopDelays</a>; 
<a name="l00171"></a><a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd">00171</a>     simtime_t <a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>; 
<a name="l00174"></a>00174     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00175"></a>00175     <span class="comment">//--- Common Overlay Attributes &amp; Global Module References ---------------</span>
<a name="l00176"></a>00176     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="keyword">protected</span>:<span class="comment">//fields: overlay attributes</span>
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 
<a name="l00182"></a>00182     <span class="comment">// references to global modules</span>
<a name="l00183"></a><a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7">00183</a>     <a class="code" href="classGlobalNodeList.html" title="Global module (formerly known as BootstrapList) that supports the node bootstrap process and contains...">GlobalNodeList</a>* <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>;           
<a name="l00184"></a><a class="code" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae">00184</a>     NotificationBoard* <a class="code" href="classBaseOverlay.html#af0704186e295039c92666176b0b91dae" title="pointer to NotificationBoard in this node">notificationBoard</a>;       
<a name="l00185"></a><a class="code" href="classBaseOverlay.html#af2f7102d7cc6f5ecb1c3ecb3d9c93df3">00185</a>     <a class="code" href="classUnderlayConfigurator.html" title="Base class for configurators of different underlay models.">UnderlayConfigurator</a>* <a class="code" href="classBaseOverlay.html#af2f7102d7cc6f5ecb1c3ecb3d9c93df3" title="pointer to UnderlayConfigurator in this node">underlayConfigurator</a>; 
<a name="l00186"></a><a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504">00186</a>     <a class="code" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a>* <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>; 
<a name="l00187"></a><a class="code" href="classBaseOverlay.html#a59bde2858b8537864fbad3eb487dbc55">00187</a>     <a class="code" href="classGlobalParameters.html" title="Modul for storing global simulation parameters.">GlobalParameters</a>* <a class="code" href="classBaseOverlay.html#a59bde2858b8537864fbad3eb487dbc55" title="pointer to the GlobalParameters module">globalParameters</a>; 
<a name="l00189"></a>00189     <span class="comment">// overlay common parameters</span>
<a name="l00190"></a><a class="code" href="classBaseOverlay.html#a58a2fa722396661f55eb490d989a6df6">00190</a>     uint32_t <a class="code" href="classBaseOverlay.html#a58a2fa722396661f55eb490d989a6df6" title="identifies the overlay this node belongs to (used for multiple overlays)">overlayId</a>;              
<a name="l00191"></a><a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd">00191</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>;           
<a name="l00192"></a><a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">00192</a>     <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> <a class="code" href="classBaseOverlay.html#a9e13844ea8090b84a90286f048cdcbf9">defaultRoutingType</a>;
<a name="l00193"></a><a class="code" href="classBaseOverlay.html#ac9acbeb30646d54f620d87641d91b113">00193</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#ac9acbeb30646d54f620d87641d91b113" title="forward messages to applications?">useCommonAPIforward</a>;   
<a name="l00194"></a><a class="code" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9">00194</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a2694627a0082c456367bfa472fff56b9" title="collect delay for single hops">collectPerHopDelay</a>;    
<a name="l00195"></a><a class="code" href="classBaseOverlay.html#a6e9090bf68f45a31d727a6c7f0501d43">00195</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a6e9090bf68f45a31d727a6c7f0501d43" title="send ACK when receiving route message">routeMsgAcks</a>;          
<a name="l00196"></a><a class="code" href="classBaseOverlay.html#ad0094285f9af244aec5e5fe600126243">00196</a>     uint32_t <a class="code" href="classBaseOverlay.html#ad0094285f9af244aec5e5fe600126243" title="numRedundantNodes for recursive routing">recNumRedundantNodes</a>;  
<a name="l00197"></a><a class="code" href="classBaseOverlay.html#a61186fd8bd7368c8a91a63ecc9c62a89">00197</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a61186fd8bd7368c8a91a63ecc9c62a89" title="record visited hops on route">recordRoute</a>;   
<a name="l00198"></a><a class="code" href="classBaseOverlay.html#a79031cb868377512713e343a326dbbd9">00198</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a79031cb868377512713e343a326dbbd9">drawOverlayTopology</a>;
<a name="l00199"></a><a class="code" href="classBaseOverlay.html#aecfcf5743d274d9c17730f2aeccf1635">00199</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#aecfcf5743d274d9c17730f2aeccf1635">rejoinOnFailure</a>;
<a name="l00200"></a><a class="code" href="classBaseOverlay.html#a84fe39074cd9dc69acf188abf3e2ea12">00200</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a84fe39074cd9dc69acf188abf3e2ea12" title="needed by KBR protocols for NAT support">sendRpcResponseToLastHop</a>; 
<a name="l00201"></a><a class="code" href="classBaseOverlay.html#ab53aaadb5dfe6fea1ac6b90db356cc52">00201</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#ab53aaadb5dfe6fea1ac6b90db356cc52" title="if node is malicious, it tries a findNode attack">dropFindNodeAttack</a>; 
<a name="l00202"></a><a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc">00202</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#ae70528858c70e2404e0d83824d6f5bbc" title="if node is malicious, it tries a isSibling attack">isSiblingAttack</a>; 
<a name="l00203"></a><a class="code" href="classBaseOverlay.html#a319a6b16e55af5e67fbbf65f6d07d5d9">00203</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a319a6b16e55af5e67fbbf65f6d07d5d9" title="if node is malicious, it tries a invalidNode attack">invalidNodesAttack</a>; 
<a name="l00204"></a><a class="code" href="classBaseOverlay.html#a3bcd2bdd704803d7ec8ae77633cf03fa">00204</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a3bcd2bdd704803d7ec8ae77633cf03fa" title="if node is malicious, it drops all received BaseRouteMessages">dropRouteMessageAttack</a>; 
<a name="l00205"></a><a class="code" href="classBaseOverlay.html#aef12c08638b508af44f257824f9391ef">00205</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#aef12c08638b508af44f257824f9391ef" title="used UDP-port">localPort</a>;              
<a name="l00206"></a><a class="code" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9">00206</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#abffe6fbd25963bc2b7542f22ba6455b9" title="maximum hop count">hopCountMax</a>;            
<a name="l00207"></a><a class="code" href="classBaseOverlay.html#ab0b0274a06e70c91e8bd8df0c23d435f">00207</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#ab0b0274a06e70c91e8bd8df0c23d435f" title="if true, measure the overhead of signatures in rpc messages">measureAuthBlock</a>; 
<a name="l00208"></a><a class="code" href="classBaseOverlay.html#a7d0beff122a0b5c573dd8ae90c9372d5">00208</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a7d0beff122a0b5c573dd8ae90c9372d5" title="if true, a node rejoins with its old nodeId and malicious state">restoreContext</a>; 
<a name="l00210"></a><a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7">00210</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a4a82bd4b76a8d06a1d63bba98f1a34d7" title="number of dropped packets">numDropped</a>;             
<a name="l00211"></a><a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6">00211</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a9e09857b97f52d340e4710580f25f7a6" title="number of dropped bytes">bytesDropped</a>;           
<a name="l00213"></a><a class="code" href="classBaseOverlay.html#ae035d51942a35ec780eb6f5bad6fe179">00213</a>     cOutVector <a class="code" href="classBaseOverlay.html#ae035d51942a35ec780eb6f5bad6fe179" title="statistical output vector for packet-delays">delayVector</a>;     
<a name="l00214"></a><a class="code" href="classBaseOverlay.html#aadc1c2714625c6d3c2d6d0cd96bf4491">00214</a>     cOutVector <a class="code" href="classBaseOverlay.html#aadc1c2714625c6d3c2d6d0cd96bf4491" title="statistical output vector for hop-counts">hopCountVector</a>;  
<a name="l00216"></a><a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">00216</a>     <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40f">States</a> <a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a>;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00219"></a>00219     <span class="comment">//--- Initialization &amp; finishing -----------------------------------------</span>
<a name="l00220"></a>00220     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="keyword">private</span>:<span class="comment">//methods: cSimpleModule initialization</span>
<a name="l00223"></a>00223 
<a name="l00229"></a>00229     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a9738ba6065b0f699f1921bbe82ab97be" title="initializes base-class-attributes">initialize</a>(<span class="keywordtype">int</span> stage);
<a name="l00230"></a>00230 
<a name="l00234"></a>00234     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#aed7e3f36b2c70cbdb0e6daa32925917c" title="collects statistical data">finish</a>();
<a name="l00235"></a>00235 
<a name="l00236"></a>00236 <span class="keyword">protected</span>:<span class="comment">//methods: overlay initialization</span>
<a name="l00237"></a>00237 
<a name="l00243"></a>00243     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#a3234dfcf81463984e88a42432734a615" title="Sets init stage.">numInitStages</a>() <span class="keyword">const</span>;
<a name="l00244"></a>00244 
<a name="l00255"></a>00255     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a41f88dfbea856a2b38319ff52c758c96" title="Initializes derived-class-attributes.">initializeOverlay</a>( <span class="keywordtype">int</span> stage );
<a name="l00256"></a>00256 
<a name="l00260"></a>00260     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a8db85b9c706d04007154761d5a0cec16" title="collects statistical data in derived class">finishOverlay</a>();
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 <span class="keyword">private</span>:
<a name="l00268"></a>00268     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a31e60de81d77afdeb0e68f781ded0f9e" title="Overlay implementations can overwrite this virtual method to set a specific nodeID.">setOwnNodeID</a>();
<a name="l00269"></a>00269 
<a name="l00270"></a>00270     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00271"></a>00271     <span class="comment">//--- General Overlay Parameters (getter and setters) --------------------</span>
<a name="l00272"></a>00272     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="keyword">public</span>:<span class="comment">//methods: getters and setters</span>
<a name="l00275"></a>00275 
<a name="l00281"></a>00281     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a234b046348574d37d811638f0b27a89e" title="Returns true, if node is malicious.">isMalicious</a>();
<a name="l00282"></a>00282 
<a name="l00288"></a>00288     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#abef37828b7f070044154f53bcd2a765b" title="Returns true if overlay is one in an array, inside a SimpleMultiOverlayHost.">isInSimpleMultiOverlayHost</a>();
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="classBaseOverlay.html#a018f1d79a4f2aa314c2c68f9bface3c6">00290</a>     <span class="keyword">const</span> simtime_t&amp; <a class="code" href="classBaseOverlay.html#a018f1d79a4f2aa314c2c68f9bface3c6">getCreationTime</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>; };
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00294"></a>00294     <span class="comment">//--- UDP functions copied from the INET framework .----------------------</span>
<a name="l00295"></a>00295     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 <span class="keyword">protected</span>:
<a name="l00301"></a>00301     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a512084e3a224f0a3f284e5e240652a26" title="Tells UDP we want to get all packets arriving on the given port.">bindToPort</a>(<span class="keywordtype">int</span> port);
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00305"></a>00305     <span class="comment">//--- Overlay Common API: Key-based Routing ------------------------------</span>
<a name="l00306"></a>00306     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="keyword">protected</span>:<span class="comment">//methods: KBR</span>
<a name="l00309"></a>00309 
<a name="l00326"></a>00326     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#ad62efdef2b674f46e5368354efb6104f" title="Routes message through overlay.">route</a>(<span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; key, <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00327"></a>00327                        <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> srcComp, cPacket* msg,
<a name="l00328"></a>00328                        <span class="keyword">const</span> std::vector&lt;TransportAddress&gt;&amp; sourceRoute
<a name="l00329"></a>00329                            = <a class="code" href="classTransportAddress.html#ac4c193ddadf638fa3f1bf0de04fbaaab">TransportAddress::UNSPECIFIED_NODES</a>,
<a name="l00330"></a>00330                        <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>);
<a name="l00331"></a>00331 
<a name="l00341"></a>00341     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a432f79071b87baece93311300cfda0c3" title="Calls deliver function in application.">callDeliver</a>( <a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* msg,
<a name="l00342"></a>00342                       <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey);
<a name="l00343"></a>00343 
<a name="l00355"></a>00355     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a71bcb54aa4fc66bdf97cc9c87fffc318" title="Calls forward function in application.">callForward</a>( <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; key, <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* msg,
<a name="l00356"></a>00356                       <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp; nextHopNode);
<a name="l00357"></a>00357 
<a name="l00366"></a>00366     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a1422696a8eb138dde850390152ff88c7" title="Informs application about state changes of nodes or newly joined nodes.">callUpdate</a>(<span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp; node, <span class="keywordtype">bool</span> joined);
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="keyword">public</span>:
<a name="l00369"></a>00369 
<a name="l00379"></a>00379     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#acb8855faa86247ae37ab894891d9f4dd" title="Join the overlay with a given nodeID.">join</a>(<span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; nodeID = <a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>);
<a name="l00380"></a>00380 
<a name="l00392"></a>00392     <span class="keyword">virtual</span> <a class="code" href="classBaseKeySortedVector.html" title="A STL-vector that supports inserts sorted by an OverlayKey found somewhere in the type...">NodeVector</a>* <a class="code" href="classBaseOverlay.html#a95851770a6ab3a176e1d7b5a7afba3f0" title="finds nodes closest to the given OverlayKey">local_lookup</a>(<span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; key, <span class="keywordtype">int</span> num, <span class="keywordtype">bool</span> safe);
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00397"></a>00397     <span class="keyword">virtual</span> <a class="code" href="classBaseKeySortedVector.html" title="A STL-vector that supports inserts sorted by an OverlayKey found somewhere in the type...">NodeVector</a>* <a class="code" href="classBaseOverlay.html#a08f453e70d8d295bdbabec4accbb9dad">neighborSet</a>(<span class="keywordtype">int</span> num);
<a name="l00398"></a>00398 
<a name="l00414"></a>00414     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#ab5887b89ba9da5973068e834feb69ce7" title="Query if a node is among the siblings for a given key.">isSiblingFor</a>(<span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp; node,
<a name="l00415"></a>00415                               <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; key, <span class="keywordtype">int</span> numSiblings, <span class="keywordtype">bool</span>* err);
<a name="l00416"></a>00416 
<a name="l00423"></a>00423     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#acd3058ad15b470e024500dd4872e2f09" title="Query the maximum number of siblings (nodes close to a key) that are maintained by this overlay proto...">getMaxNumSiblings</a>();
<a name="l00424"></a>00424 
<a name="l00431"></a>00431     <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#ab4dadd02486560de3a58773b3a90fb41" title="Query the maximum number of redundant next hop nodes that are returned by findNode().">getMaxNumRedundantNodes</a>();
<a name="l00432"></a>00432 
<a name="l00433"></a>00433     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00434"></a>00434     <span class="comment">//--- Message Handlers ---------------------------------------------------</span>
<a name="l00435"></a>00435     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="keyword">protected</span>:<span class="comment">//methods: message handling</span>
<a name="l00438"></a>00438 
<a name="l00449"></a>00449     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a870d24a243e4b0d1aeb31ea0861e53a7" title="Checks for message type and calls corresponding method.">handleMessage</a>(cMessage* msg);
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 
<a name="l00461"></a>00461     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#ac647b32e360b4db1f0eb53b096437fd8" title="Handles a BaseOverlayMessage ">handleBaseOverlayMessage</a>(<a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* msg,
<a name="l00462"></a>00462                                   <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey =
<a name="l00463"></a>00463                                       <a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>);
<a name="l00464"></a>00464 
<a name="l00465"></a>00465 <span class="keyword">protected</span>:<span class="comment">//methods: message handling</span>
<a name="l00466"></a>00466 
<a name="l00472"></a>00472     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a31d7dd39ddc9e62ad92f69f6d7210344" title="Processes messages from underlay.">handleUDPMessage</a>(<a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* msg);
<a name="l00473"></a>00473 
<a name="l00479"></a>00479     <span class="comment">//virtual void handleTimerEvent(cMessage* msg);</span>
<a name="l00480"></a>00480 
<a name="l00486"></a>00486     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#aef92d042c22b47c123e59a831acb7033" title="Processes &quot;timer&quot; self-messages.">handleAppMessage</a>(cMessage* msg);
<a name="l00487"></a>00487 
<a name="l00494"></a>00494     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#ac1cf471c2918271ed0244e4a9579c878" title="callback-method for events at the NotificationBoard">receiveChangeNotification</a>(<span class="keywordtype">int</span> category,
<a name="l00495"></a>00495                                            <span class="keyword">const</span> cPolymorphic* details);
<a name="l00496"></a>00496 
<a name="l00501"></a>00501     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a2a53481e2aaf78e6826ab72378bebf48" title="This method gets call if the node has a new TransportAddress (IP address) because he changed his acce...">handleTransportAddressChangedNotification</a>();
<a name="l00502"></a>00502 
<a name="l00506"></a>00506     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#af9ea0a59c26b70c50c63c2c1dc4c2ec3" title="This method gets call **.gracefulLeaveDelay seconds before it is killed.">handleNodeLeaveNotification</a>();
<a name="l00507"></a>00507 
<a name="l00512"></a>00512     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#aa2d70984acd164839ca92694a02e7a91" title="This method gets call **.gracefulLeaveDelay seconds before it is killed if this node is among the gra...">handleNodeGracefulLeaveNotification</a>();
<a name="l00513"></a>00513 
<a name="l00514"></a>00514 
<a name="l00525"></a>00525     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a921ac1fec5765f4099276800a82953ab" title="Collect overlay specific sent messages statistics.">recordOverlaySentStats</a>(<a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* msg);
<a name="l00526"></a>00526 
<a name="l00527"></a>00527 <span class="keyword">protected</span>:<span class="comment">//methods: icons and ui support</span>
<a name="l00528"></a>00528 
<a name="l00534"></a>00534     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a9da615809e832cbc4645cc732d510277" title="Sets the overlay ready icon and register/deregisters the node at the GlobalNodeList.">setOverlayReady</a>( <span class="keywordtype">bool</span> ready );
<a name="l00535"></a>00535 
<a name="l00536"></a>00536     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00537"></a>00537     <span class="comment">//--- Messages -----------------------------------------------------------</span>
<a name="l00538"></a>00538     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 <span class="keyword">private</span>:<span class="comment">//methods: sending packets over udp</span>
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#ac93829bc8095a76e6208cf0ec12188b0">sendRouteMessage</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00543"></a>00543                           <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* msg,
<a name="l00544"></a>00544                           <span class="keywordtype">bool</span> ack);
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a53ded56af8bba8e4caa9a9b29e01ab87">checkFindNode</a>(<a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* routeMsg);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 <span class="keyword">public</span>:
<a name="l00555"></a>00555     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a10189697bd95f3de66c27c1ecf07e323" title="Sends message to underlay.">sendMessageToUDP</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest, cPacket* msg,
<a name="l00556"></a>00556                           simtime_t delay = SIMTIME_ZERO);
<a name="l00557"></a>00557 
<a name="l00558"></a>00558     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00559"></a>00559     <span class="comment">//--- Basic Routing ------------------------------------------------------</span>
<a name="l00560"></a>00560     <span class="comment">//------------------------------------------------------------------------</span>
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 <span class="keyword">protected</span>:<span class="comment">//fields: config</span>
<a name="l00563"></a><a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">00563</a>     <a class="code" href="classIterativeLookupConfiguration.html" title="This class holds the lookup configuration.">IterativeLookupConfiguration</a> <a class="code" href="classBaseOverlay.html#a32b8cfb47f3ef824dcf6ad882e6a6a9f">iterativeLookupConfig</a>;
<a name="l00564"></a><a class="code" href="classBaseOverlay.html#af6573aac3c99626958737209309d7e99">00564</a>     <a class="code" href="classRecursiveLookupConfiguration.html" title="This class holds the lookup configuration.">RecursiveLookupConfiguration</a> <a class="code" href="classBaseOverlay.html#af6573aac3c99626958737209309d7e99">recursiveLookupConfig</a>;
<a name="l00565"></a>00565 
<a name="l00566"></a><a class="code" href="classBaseOverlay_1_1lookupHashFcn.html">00566</a>     <span class="keyword">class </span><a class="code" href="classBaseOverlay_1_1lookupHashFcn.html">lookupHashFcn</a>
<a name="l00567"></a>00567     {
<a name="l00568"></a>00568     <span class="keyword">public</span>:
<a name="l00569"></a><a class="code" href="classBaseOverlay_1_1lookupHashFcn.html#a8c1a75437eaac6c893aec183efd3b109">00569</a>         <span class="keywordtype">size_t</span> <a class="code" href="classBaseOverlay_1_1lookupHashFcn.html#a8c1a75437eaac6c893aec183efd3b109">operator()</a>( <span class="keyword">const</span> <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* l1 )<span class="keyword"> const</span>
<a name="l00570"></a>00570 <span class="keyword">        </span>{
<a name="l00571"></a>00571             <span class="keywordflow">return</span> (<span class="keywordtype">size_t</span>)l1;
<a name="l00572"></a>00572         }
<a name="l00573"></a><a class="code" href="classBaseOverlay_1_1lookupHashFcn.html#ace1254e194cd9c32dd5bcb3ba48894d9">00573</a>         <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay_1_1lookupHashFcn.html#a8c1a75437eaac6c893aec183efd3b109">operator()</a>(<span class="keyword">const</span> <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* l1,
<a name="l00574"></a>00574                         <span class="keyword">const</span> <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* l2)<span class="keyword"> const</span>
<a name="l00575"></a>00575 <span class="keyword">        </span>{
<a name="l00576"></a>00576             <span class="keywordflow">return</span> (l1 == l2);
<a name="l00577"></a>00577         }
<a name="l00578"></a>00578     };
<a name="l00579"></a>00579 
<a name="l00580"></a><a class="code" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">00580</a>     <span class="keyword">typedef</span> UNORDERED_SET&lt;AbstractLookup*, lookupHashFcn, lookupHashFcn&gt; <a class="code" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">LookupSet</a>;
<a name="l00581"></a>00581 
<a name="l00582"></a><a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">00582</a>     <a class="code" href="classBaseOverlay.html#a65cc359d4db3de08cde7ff0b3794f0c8">LookupSet</a> <a class="code" href="classBaseOverlay.html#ad25b51c2d6c06dbe12c534307f43822e">lookups</a>;
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 <span class="keyword">private</span>:<span class="comment">//methods: internal routing</span>
<a name="l00585"></a>00585 
<a name="l00589"></a>00589     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#af2c8b2108703c4df49217a719f280bb8" title="creates a LookupSet">initLookups</a>();
<a name="l00590"></a>00590 
<a name="l00594"></a>00594     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#abaaca6fe44d8e317d56c90a14e0fcada" title="deletes entries in lookups">finishLookups</a>();
<a name="l00595"></a>00595 
<a name="l00611"></a>00611     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a42f4c08f6408d155a9907957ecf12d79" title="Hook for forwarded message in recursive lookup mode.">recursiveRoutingHook</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00612"></a>00612                                       <a class="code" href="classBaseRouteMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRouteMessage</a>* msg);
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="keyword">public</span>:<span class="comment">//methods: basic message routing</span>
<a name="l00615"></a>00615 
<a name="l00629"></a>00629     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a6f2c598f5d3989a63a8cc7220f1aaf76" title="Sends a message to an overlay node, with the generic routing algorithm.">sendToKey</a>(<span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; key, <a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* message,
<a name="l00630"></a>00630                    <span class="keywordtype">int</span> numSiblings = 1,
<a name="l00631"></a>00631                    <span class="keyword">const</span> std::vector&lt;TransportAddress&gt;&amp; sourceRoute
<a name="l00632"></a>00632                              = <a class="code" href="classTransportAddress.html#ac4c193ddadf638fa3f1bf0de04fbaaab">TransportAddress::UNSPECIFIED_NODES</a>,
<a name="l00633"></a>00633                    <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>);
<a name="l00634"></a>00634 
<a name="l00645"></a>00645     <span class="keyword">virtual</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> <a class="code" href="classBaseOverlay.html#aa12314947ef42726ec6c7066dde8d0f9" title="This method should implement the distance between two keys.">distance</a>(<span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; x,
<a name="l00646"></a>00646                                 <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; y,
<a name="l00647"></a>00647                                 <span class="keywordtype">bool</span> useAlternative = <span class="keyword">false</span>) <span class="keyword">const</span>;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649 <span class="keyword">protected</span>:<span class="comment">//methods: routing class factory</span>
<a name="l00650"></a>00650 
<a name="l00663"></a>00663     <span class="keyword">virtual</span> <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* <a class="code" href="classBaseOverlay.html#a205a7d44401fb3d77b146e23b2904b6f" title="Creates an abstract iterative lookup instance.">createLookup</a>(<a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>,
<a name="l00664"></a>00664                                          <span class="keyword">const</span> <a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* msg = NULL,
<a name="l00665"></a>00665                                          <span class="keyword">const</span> cPacket* findNodeExt = NULL,
<a name="l00666"></a>00666                                          <span class="keywordtype">bool</span> appLookup = <span class="keyword">false</span>);
<a name="l00667"></a>00667 
<a name="l00673"></a>00673     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a0bfca744a28f47cae8c99243de04b005" title="Removes the abstract lookup instance.">removeLookup</a>( <a class="code" href="classAbstractLookup.html" title="This class declares an abstract iterative lookup.">AbstractLookup</a>* lookup );
<a name="l00674"></a>00674 
<a name="l00691"></a>00691     <span class="keyword">virtual</span> <a class="code" href="classBaseKeySortedVector.html">NodeVector</a>* <a class="code" href="classBaseOverlay.html#a7cbdce336237331b67a3c69c4e43d489" title="Implements the find node call.">findNode</a>( <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; key,
<a name="l00692"></a>00692                                   <span class="keywordtype">int</span> numRedundantNodes,
<a name="l00693"></a>00693                                   <span class="keywordtype">int</span> numSiblings,
<a name="l00694"></a>00694                                   <a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* msg = NULL);
<a name="l00695"></a>00695 
<a name="l00696"></a>00696 
<a name="l00706"></a>00706     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a3eefb56c2396601373c89d21b5b58110" title="Join the overlay with a given nodeID in thisNode.key.">joinOverlay</a>();
<a name="l00707"></a>00707 
<a name="l00717"></a>00717     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#ad032eda7f8a65884cf8c6d141224331e" title="Join another overlay partition with the given node as bootstrap node.">joinForeignPartition</a>(<span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp; node);
<a name="l00718"></a>00718 
<a name="l00728"></a>00728     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7" title="Handles a failed node.">handleFailedNode</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; failed);
<a name="l00729"></a>00729 
<a name="l00730"></a>00730     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#aa9d874edfd1b52822e1693695420d5a7">lookupRpc</a>(<a class="code" href="classLookupCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">LookupCall</a>* call);
<a name="l00731"></a>00731 
<a name="l00732"></a>00732     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a3eef9db326747d930a455db3b884dac4">nextHopRpc</a>(<a class="code" href="classNextHopCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">NextHopCall</a>* call);
<a name="l00733"></a>00733 
<a name="l00734"></a>00734 <span class="keyword">protected</span>:<span class="comment">//methods: statistic helpers for IterativeLookup</span>
<a name="l00735"></a>00735 
<a name="l00736"></a>00736     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#aee7b3e4129a3a624b9112c3b7ae2b6a3">countFindNodeCall</a>(<span class="keyword">const</span> <a class="code" href="classFindNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeCall</a>* call);
<a name="l00737"></a>00737     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a189d4d1410399ecd264b5bfe6fc85e0f">countFailedNodeCall</a>(<span class="keyword">const</span> <a class="code" href="classFailedNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FailedNodeCall</a>* call);
<a name="l00738"></a>00738 
<a name="l00739"></a>00739 
<a name="l00740"></a>00740     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a03a24a5876504b36177a0ee041d5822e" title="Handles internal rpc requests.">internalHandleRpcCall</a>( <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg );
<a name="l00741"></a>00741     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#adc50f1e153d88a20ca921e84a0dbf3b2" title="Handles rpc responses internal in base classes ">internalHandleRpcResponse</a>(<a class="code" href="classBaseResponseMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseResponseMessage</a>* msg,
<a name="l00742"></a>00742                                    cPolymorphic* context, <span class="keywordtype">int</span> rpcId,
<a name="l00743"></a>00743                                    simtime_t rtt);
<a name="l00744"></a>00744     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#ac89854c2f011597f3421d414851f4407" title="Handles rpc timeouts internal in base classes ">internalHandleRpcTimeout</a>(<a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00745"></a>00745                                   <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00746"></a>00746                                   cPolymorphic* context,
<a name="l00747"></a>00747                                   <span class="keywordtype">int</span> rpcId, <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey);
<a name="l00748"></a>00748 
<a name="l00749"></a>00749     <span class="comment">// TODO rename to internalSendRouteRpcMessage()</span>
<a name="l00750"></a>00750     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#afe4a27831cec5ad68f1ddca071461808">internalSendRouteRpc</a>(<a class="code" href="classBaseRpcMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRpcMessage</a>* message,
<a name="l00751"></a>00751                               <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey,
<a name="l00752"></a>00752                               <span class="keyword">const</span> std::vector&lt;TransportAddress&gt;&amp;
<a name="l00753"></a>00753                               sourceRoute,
<a name="l00754"></a>00754                               <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType);
<a name="l00755"></a>00755 
<a name="l00756"></a>00756     <span class="comment">/*</span>
<a name="l00757"></a>00757 <span class="comment">     * Returns the component type of this module</span>
<a name="l00758"></a>00758 <span class="comment">     *</span>
<a name="l00759"></a>00759 <span class="comment">     * @return the component type</span>
<a name="l00760"></a>00760 <span class="comment">     */</span>
<a name="l00761"></a>00761     <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> <a class="code" href="classBaseOverlay.html#a92e0d3f96a5716245465e05da60ef487" title="Return the component type of this module.">getThisCompType</a>();
<a name="l00762"></a>00762 
<a name="l00763"></a><a class="code" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b">00763</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b" title="set this to true, if the overlay provides KBR services">kbr</a>; 
<a name="l00765"></a>00765 <span class="keyword">private</span>:
<a name="l00766"></a>00766     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a3b7e4eeca10c3052e0bb51762fe1ce71">internalSendRpcResponse</a>(<a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* call,
<a name="l00767"></a>00767                                  <a class="code" href="classBaseResponseMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseResponseMessage</a>* response);
<a name="l00768"></a>00768 
<a name="l00769"></a><a class="code" href="classBaseOverlay.html#a2e2f70aa82a9b4920877b3a13dd1e0ea">00769</a>     <span class="keyword">const</span> cGate* <a class="code" href="classBaseOverlay.html#a2e2f70aa82a9b4920877b3a13dd1e0ea">udpGate</a>;
<a name="l00770"></a><a class="code" href="classBaseOverlay.html#a6523faf8f52af34c73643dc7f3e083eb">00770</a>     <span class="keyword">const</span> cGate* <a class="code" href="classBaseOverlay.html#a6523faf8f52af34c73643dc7f3e083eb">appGate</a>;
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 <span class="keyword">public</span>:
<a name="l00773"></a>00773     <span class="comment">/*</span>
<a name="l00774"></a>00774 <span class="comment">     * Register a new component at the overlay</span>
<a name="l00775"></a>00775 <span class="comment">     *</span>
<a name="l00776"></a>00776 <span class="comment">     * @param compType The compoment type (defined in CommonMessages.msg)</span>
<a name="l00777"></a>00777 <span class="comment">     * @param module The module pointer of the component</span>
<a name="l00778"></a>00778 <span class="comment">     */</span>
<a name="l00779"></a>00779     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a2096f89814b5740257cee106b60dda15">registerComp</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> compType, cModule *module);
<a name="l00780"></a>00780 
<a name="l00781"></a>00781     <span class="comment">/*</span>
<a name="l00782"></a>00782 <span class="comment">     * Get the module pointer of a registered component</span>
<a name="l00783"></a>00783 <span class="comment">     *</span>
<a name="l00784"></a>00784 <span class="comment">     * @param compType The compoment type (defined in CommonMessages.msg)</span>
<a name="l00785"></a>00785 <span class="comment">     * @return The module pointer of the component</span>
<a name="l00786"></a>00786 <span class="comment">     */</span>
<a name="l00787"></a>00787     cModule* <a class="code" href="classBaseOverlay.html#a3aba2b6e93094d3cc8107d33db4b5244">getCompModule</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> compType);
<a name="l00788"></a>00788 
<a name="l00789"></a>00789     <span class="comment">/*</span>
<a name="l00790"></a>00790 <span class="comment">     * Get the direct_in gate of a registered component</span>
<a name="l00791"></a>00791 <span class="comment">     *</span>
<a name="l00792"></a>00792 <span class="comment">     * @param compType The compoment type (defined in CommonMessages.msg)</span>
<a name="l00793"></a>00793 <span class="comment">     * @return The pointer to the direct_in gate of the component</span>
<a name="l00794"></a>00794 <span class="comment">     */</span>
<a name="l00795"></a>00795     cGate* <a class="code" href="classBaseOverlay.html#a5fc03fda227c0cca828109842af1b320">getCompRpcGate</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> compType);
<a name="l00796"></a>00796 
<a name="l00797"></a>00797     <span class="comment">/*</span>
<a name="l00798"></a>00798 <span class="comment">     * Sends a message to all currently registered components, but the</span>
<a name="l00799"></a>00799 <span class="comment">     * source component</span>
<a name="l00800"></a>00800 <span class="comment">     *</span>
<a name="l00801"></a>00801 <span class="comment">     * @param msg The pointer to the message to send</span>
<a name="l00802"></a>00802 <span class="comment">     * @param srcComp The type of the originating component</span>
<a name="l00803"></a>00803 <span class="comment">     *</span>
<a name="l00804"></a>00804 <span class="comment">     */</span>
<a name="l00805"></a>00805     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a19c2c01f99a19bb7de0b30cdd866a2e0">sendMessageToAllComp</a>(cMessage* msg, <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> srcComp);
<a name="l00806"></a>00806 
<a name="l00807"></a>00807     <span class="comment">/*</span>
<a name="l00808"></a>00808 <span class="comment">     * Returns true, if the overlay is a structured overlay and</span>
<a name="l00809"></a>00809 <span class="comment">     * provides KBR services (e.g. route, lookup, ...).</span>
<a name="l00810"></a>00810 <span class="comment">     */</span>
<a name="l00811"></a><a class="code" href="classBaseOverlay.html#a269ddf1a8caa1efd25ebf0593cf5b671">00811</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a269ddf1a8caa1efd25ebf0593cf5b671">providesKbr</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b" title="set this to true, if the overlay provides KBR services">kbr</a>; };
<a name="l00812"></a>00812 
<a name="l00813"></a><a class="code" href="classBaseOverlay.html#afcab85a6c5a4f8aa70a65ecabaa78180">00813</a>     <span class="keyword">virtual</span> uint8_t <a class="code" href="classBaseOverlay.html#afcab85a6c5a4f8aa70a65ecabaa78180">getBitsPerDigit</a>() { <span class="keywordflow">return</span> 1; };
<a name="l00814"></a>00814 
<a name="l00815"></a><a class="code" href="classBaseOverlay.html#a077a698fb5f760290bc67e4a50dfed9e">00815</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#a077a698fb5f760290bc67e4a50dfed9e">getMeasureAuthBlock</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseOverlay.html#ab0b0274a06e70c91e8bd8df0c23d435f" title="if true, measure the overhead of signatures in rpc messages">measureAuthBlock</a>; }
<a name="l00816"></a>00816 
<a name="l00817"></a><a class="code" href="classBaseOverlay.html#aab1198e37993729eaf87350d5b83f9a0">00817</a>     <a class="code" href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates.">BootstrapList</a>&amp; <a class="code" href="classBaseOverlay.html#aab1198e37993729eaf87350d5b83f9a0">getBootstrapList</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *<a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>;}
<a name="l00818"></a>00818 
<a name="l00824"></a>00824     <span class="keyword">virtual</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> <a class="code" href="classBaseOverlay.html#a17e5d70377d7441e3c379818688892c2" title="returns mean distance between OverlayKeys in the network">estimateMeanDistance</a>();
<a name="l00825"></a>00825 
<a name="l00831"></a>00831     <span class="keyword">virtual</span> uint32_t <a class="code" href="classBaseOverlay.html#abbe44e3f7df7e0f33b05508023899f94" title="estimates the current number of nodes online">estimateOverlaySize</a>();
<a name="l00832"></a>00832 
<a name="l00833"></a>00833 <span class="keyword">private</span>:
<a name="l00834"></a>00834     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a50680d9b44a779f314baeab200da61dc">findNodeRpc</a>( <a class="code" href="classFindNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FindNodeCall</a>* call );
<a name="l00835"></a>00835     <span class="keywordtype">void</span> <a class="code" href="classBaseOverlay.html#a1655dc0cb4ebb2f22de1d1ee29030433">failedNodeRpc</a>( <a class="code" href="classFailedNodeCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">FailedNodeCall</a>* call );
<a name="l00836"></a>00836 
<a name="l00837"></a><a class="code" href="classBaseOverlay.html#a70450830625412821e38ba9820f4eb16">00837</a>     <span class="keyword">typedef</span> std::map&lt;CompType, std::pair&lt;cModule*, cGate*&gt; &gt; <a class="code" href="classBaseOverlay.html#a70450830625412821e38ba9820f4eb16">CompModuleList</a>;
<a name="l00838"></a><a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">00838</a>     <a class="code" href="classBaseOverlay.html#a70450830625412821e38ba9820f4eb16">CompModuleList</a> <a class="code" href="classBaseOverlay.html#a572cbbdedbbc386f1d9c3851e9250be7">compModuleList</a>;
<a name="l00839"></a><a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323">00839</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseOverlay.html#aa484556ed4ff9e4e97394106d0c1d323" title="internal overlay state used for setOverlayReady()">internalReadyState</a>; 
<a name="l00841"></a><a class="code" href="classBaseOverlay.html#af0cedb761015fad54f32a96963e8e88c">00841</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseOverlay.html#af0cedb761015fad54f32a96963e8e88c">socketId</a>;
<a name="l00842"></a>00842 };
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="BaseOverlay_8h.html">BaseOverlay.h</a>      </li>

    <li class="footer">Generated on Thu Mar 6 2014 14:06:26 for OverSim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>

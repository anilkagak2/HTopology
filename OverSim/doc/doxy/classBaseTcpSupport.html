<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: BaseTcpSupport Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OverSim
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classBaseTcpSupport.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">BaseTcpSupport Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="BaseTcpSupport" -->
<p><code>#include &lt;<a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BaseTcpSupport:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBaseTcpSupport.png" usemap="#BaseTcpSupport_map" alt=""/>
  <map id="BaseTcpSupport_map" name="BaseTcpSupport_map">
<area href="classBaseApp.html" title="Base class for applications." alt="BaseApp" shape="rect" coords="0,56,116,80"/>
<area href="classBaseOverlay.html" title="Base class for overlays." alt="BaseOverlay" shape="rect" coords="252,56,368,80"/>
<area href="classALMTest.html" alt="ALMTest" shape="rect" coords="126,112,242,136"/>
<area href="classBootstrapList.html" title="The BootstrapList module maintains a list of bootstrap node candidates." alt="BootstrapList" shape="rect" coords="126,168,242,192"/>
<area href="classCBRDHT.html" title="A Distributed Hash Table (DHT) for KBR protocols." alt="CBRDHT" shape="rect" coords="126,224,242,248"/>
<area href="classDHT.html" title="A Distributed Hash Table (DHT) for KBR protocols." alt="DHT" shape="rect" coords="126,280,242,304"/>
<area href="classDHTTestApp.html" title="A simple test application for the DHT layer." alt="DHTTestApp" shape="rect" coords="126,336,242,360"/>
<area href="classGIASearchApp.html" title="Gia search test application." alt="GIASearchApp" shape="rect" coords="126,392,242,416"/>
<area href="classHStreaming.html" title="Streaming Application: uses HTopology as the overlay." alt="HStreaming" shape="rect" coords="126,448,242,472"/>
<area href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure." alt="I3" shape="rect" coords="126,504,242,528"/>
<area href="classKBRTestApp.html" title="Test application for KBR interface." alt="KBRTestApp" shape="rect" coords="126,560,242,584"/>
<area href="classLandmark.html" alt="Landmark" shape="rect" coords="126,616,242,640"/>
<area href="classMyApplication.html" alt="MyApplication" shape="rect" coords="126,672,242,696"/>
<area href="classNeighborCache.html" alt="NeighborCache" shape="rect" coords="126,728,242,752"/>
<area href="classP2pns.html" title="Implementation of &quot;P2PNS: A distributed name service for P2PSIP&quot;." alt="P2pns" shape="rect" coords="126,784,242,808"/>
<area href="classRealWorldTestApp.html" alt="RealWorldTestApp" shape="rect" coords="126,840,242,864"/>
<area href="classScribe.html" alt="Scribe" shape="rect" coords="126,896,242,920"/>
<area href="classSimMud.html" alt="SimMud" shape="rect" coords="126,952,242,976"/>
<area href="classSimpleGameClient.html" title="SimpleGameClient class." alt="SimpleGameClient" shape="rect" coords="126,1008,242,1032"/>
<area href="classTCPExampleApp.html" title="A simple TCP example application." alt="TCPExampleApp" shape="rect" coords="126,1064,242,1088"/>
<area href="classTierDummy.html" alt="TierDummy" shape="rect" coords="126,1120,242,1144"/>
<area href="classXmlRpcInterface.html" title="Applicaton that communicates with a realword application via a socket." alt="XmlRpcInterface" shape="rect" coords="126,1176,242,1200"/>
<area href="classBasePastry.html" alt="BasePastry" shape="rect" coords="378,112,494,136"/>
<area href="classBroose.html" title="Broose overlay module." alt="Broose" shape="rect" coords="378,168,494,192"/>
<area href="classGia.html" title="Gia overlay module." alt="Gia" shape="rect" coords="378,224,494,248"/>
<area href="classHTopology.html" title="TODO - Generated class." alt="HTopology" shape="rect" coords="378,280,494,304"/>
<area href="classKademlia.html" title="Kademlia overlay module." alt="Kademlia" shape="rect" coords="378,336,494,360"/>
<area href="classMyOverlay.html" alt="MyOverlay" shape="rect" coords="378,392,494,416"/>
<area href="classNTree.html" title="A p2p protocol for MMOGs and virtual worlds." alt="NTree" shape="rect" coords="378,448,494,472"/>
<area href="classOverlayDummy.html" alt="OverlayDummy" shape="rect" coords="378,504,494,528"/>
<area href="classoversim_1_1Chord.html" title="Chord overlay module." alt="oversim::Chord" shape="rect" coords="378,560,494,584"/>
<area href="classoversim_1_1Nice.html" title="NICE overlay module." alt="oversim::Nice" shape="rect" coords="378,616,494,640"/>
<area href="classPubSubLobby.html" alt="PubSubLobby" shape="rect" coords="378,672,494,696"/>
<area href="classPubSubMMOG.html" alt="PubSubMMOG" shape="rect" coords="378,728,494,752"/>
<area href="classQuon.html" title="QuON: An overlay network based on quadtrees." alt="Quon" shape="rect" coords="378,784,494,808"/>
<area href="classVast.html" title="Voronoi class." alt="Vast" shape="rect" coords="378,840,494,864"/>
</map>
 </div></div>

<p><a href="classBaseTcpSupport-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0c">EvCode</a> { <br/>
&#160;&#160;<a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0cabb18399b98b1840fd4a22723532ba4ff">NO_EST_CONNECTION</a>, 
<a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca1e54b254708d5926f4dc33aafba7690f">PEER_CLOSED</a>, 
<a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0caf97c65f1e15e6d5fcff01b5d1a163d8d">PEER_TIMEDOUT</a>, 
<a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0cad633154e9b853f5d9673fddfe7895ab0">PEER_REFUSED</a>, 
<br/>
&#160;&#160;<a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca9b57d3b18b5be8f346bcc39c15cb11b3">CONNECTION_RESET</a>, 
<a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca20d037742683e3b4836ea29a0fbd9069">CONNECTION_SUCC_ClOSED</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a7bb5197716d6ff8b1c5710dec5e311d0">socketDataArrived</a> (int connId, void *yourPtr, cPacket *msg, bool urgent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a0ed2162dcfac0efb997ebdb326f0dac2">socketEstablished</a> (int connId, void *yourPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a7d969ec0a0ed92ebe9cc5ff5ce0f424c">socketPeerClosed</a> (int connId, void *yourPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a3c9868297cff55088744c61ae044afec">socketFailure</a> (int connId, void *yourPtr, int code)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#acddc6342e5d7571f4fe51ba7541c942b">socketStatusArrived</a> (int connId, void *yourPtr, TCPStatusInfo *status)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#ac991906514dbe20b4546de49fad67756">handleTCPMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to handle incoming TCP messages.  <a href="#ac991906514dbe20b4546de49fad67756"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#abe1b30dc9b4c5518693bf40f16ef0da9">bindAndListenTcp</a> (int port)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to bind service to the specified port and listen afterwards.  <a href="#abe1b30dc9b4c5518693bf40f16ef0da9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#aea2baeeb4ed02a2357fb48b86e701acd">isAlreadyConnected</a> (<a class="el" href="classTransportAddress.html">TransportAddress</a> address)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to check if the service is already connected.  <a href="#aea2baeeb4ed02a2357fb48b86e701acd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#acac86998e57a8180b0aefacadca5e423">establishTcpConnection</a> (<a class="el" href="classTransportAddress.html">TransportAddress</a> address)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to establish a connection to the specified node.  <a href="#acac86998e57a8180b0aefacadca5e423"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a31897349261520bb2486208a6cf55bb4">sendTcpData</a> (cPacket *msg, <a class="el" href="classTransportAddress.html">TransportAddress</a> address)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to send TCP data to the specified node.  <a href="#a31897349261520bb2486208a6cf55bb4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#abbdca6fbc9e072b221c60de8ad405b3e">handleConnectionEvent</a> (<a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0c">EvCode</a> code, <a class="el" href="classTransportAddress.html">TransportAddress</a> address)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to handle passive connection events.  <a href="#abbdca6fbc9e072b221c60de8ad405b3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#aaf90d587df42ea3f9b2d8d83eb021a59">handleDataReceived</a> (<a class="el" href="classTransportAddress.html">TransportAddress</a> address, cPacket *msg, bool urgent)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to handle incoming data.  <a href="#aaf90d587df42ea3f9b2d8d83eb021a59"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a925455a09c501c10c4d2fd091b41c5cd">handleIncomingConnection</a> (<a class="el" href="classTransportAddress.html">TransportAddress</a> address)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to handle newly opened connections.  <a href="#a925455a09c501c10c4d2fd091b41c5cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#ac42b80ae7c06bc38db7570f84ad84770">closeTcpConnection</a> (<a class="el" href="classTransportAddress.html">TransportAddress</a> address)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to close an established connection.  <a href="#ac42b80ae7c06bc38db7570f84ad84770"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a3de2e8b022586f387fdba1ca42dbdfd1">setTcpOut</a> (cGate *gate)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to set local gate towards the TCP module during init phase.  <a href="#a3de2e8b022586f387fdba1ca42dbdfd1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cGate *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a320cb92d402a4154dbcd58df6dd4a2da">getTcpOut</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Member function to get local gate towards the TCP module.  <a href="#a320cb92d402a4154dbcd58df6dd4a2da"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; cMessage * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#aed5957ca5acb1df42dbe7837027d2409">msgQueue</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map<br class="typebreak"/>
&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a>, <a class="el" href="classBaseTcpSupport.html#aed5957ca5acb1df42dbe7837027d2409">msgQueue</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a7009dd7f97f7942e7527770f7f15fa22">transQueue</a></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classExtTCPSocketMap.html">ExtTCPSocketMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289">sockets</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Socket map with extended functionality to find sockets.  <a href="#aa19d228a41b2952cbfc2ae3e8d6dd289"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseTcpSupport.html#a7009dd7f97f7942e7527770f7f15fa22">transQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573">queuedTx</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">msg queue partitioned by destination  <a href="#a08363ee64ea0ec549ebd9e02656b2573"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cGate *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseTcpSupport.html#a055a6e24f9adb205647f49acd79b5673">tcpOut</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">local gate towards the TCP module  <a href="#a055a6e24f9adb205647f49acd79b5673"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00033">33</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>
</div><hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="aed5957ca5acb1df42dbe7837027d2409"></a><!-- doxytag: member="BaseTcpSupport::msgQueue" ref="aed5957ca5acb1df42dbe7837027d2409" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;cMessage*&gt; <a class="el" href="classBaseTcpSupport.html#aed5957ca5acb1df42dbe7837027d2409">BaseTcpSupport::msgQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00132">132</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7009dd7f97f7942e7527770f7f15fa22"></a><!-- doxytag: member="BaseTcpSupport::transQueue" ref="a7009dd7f97f7942e7527770f7f15fa22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="classTransportAddress.html">TransportAddress</a>, <a class="el" href="classBaseTcpSupport.html#aed5957ca5acb1df42dbe7837027d2409">msgQueue</a>*&gt; <a class="el" href="classBaseTcpSupport.html#a7009dd7f97f7942e7527770f7f15fa22">BaseTcpSupport::transQueue</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00133">133</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>

</div>
</div>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a310b5ae009665464d964b1d1384eac0c"></a><!-- doxytag: member="BaseTcpSupport::EvCode" ref="a310b5ae009665464d964b1d1384eac0c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0c">BaseTcpSupport::EvCode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a310b5ae009665464d964b1d1384eac0cabb18399b98b1840fd4a22723532ba4ff"></a><!-- doxytag: member="NO_EST_CONNECTION" ref="a310b5ae009665464d964b1d1384eac0cabb18399b98b1840fd4a22723532ba4ff" args="" -->NO_EST_CONNECTION</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a310b5ae009665464d964b1d1384eac0ca1e54b254708d5926f4dc33aafba7690f"></a><!-- doxytag: member="PEER_CLOSED" ref="a310b5ae009665464d964b1d1384eac0ca1e54b254708d5926f4dc33aafba7690f" args="" -->PEER_CLOSED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a310b5ae009665464d964b1d1384eac0caf97c65f1e15e6d5fcff01b5d1a163d8d"></a><!-- doxytag: member="PEER_TIMEDOUT" ref="a310b5ae009665464d964b1d1384eac0caf97c65f1e15e6d5fcff01b5d1a163d8d" args="" -->PEER_TIMEDOUT</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a310b5ae009665464d964b1d1384eac0cad633154e9b853f5d9673fddfe7895ab0"></a><!-- doxytag: member="PEER_REFUSED" ref="a310b5ae009665464d964b1d1384eac0cad633154e9b853f5d9673fddfe7895ab0" args="" -->PEER_REFUSED</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a310b5ae009665464d964b1d1384eac0ca9b57d3b18b5be8f346bcc39c15cb11b3"></a><!-- doxytag: member="CONNECTION_RESET" ref="a310b5ae009665464d964b1d1384eac0ca9b57d3b18b5be8f346bcc39c15cb11b3" args="" -->CONNECTION_RESET</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a310b5ae009665464d964b1d1384eac0ca20d037742683e3b4836ea29a0fbd9069"></a><!-- doxytag: member="CONNECTION_SUCC_ClOSED" ref="a310b5ae009665464d964b1d1384eac0ca20d037742683e3b4836ea29a0fbd9069" args="" -->CONNECTION_SUCC_ClOSED</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00038">38</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>
<div class="fragment"><pre class="fragment">{<a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0cabb18399b98b1840fd4a22723532ba4ff">NO_EST_CONNECTION</a>, <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca1e54b254708d5926f4dc33aafba7690f">PEER_CLOSED</a>, <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0caf97c65f1e15e6d5fcff01b5d1a163d8d">PEER_TIMEDOUT</a>, <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0cad633154e9b853f5d9673fddfe7895ab0">PEER_REFUSED</a>, <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca9b57d3b18b5be8f346bcc39c15cb11b3">CONNECTION_RESET</a>, <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca20d037742683e3b4836ea29a0fbd9069">CONNECTION_SUCC_ClOSED</a>};
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="abe1b30dc9b4c5518693bf40f16ef0da9"></a><!-- doxytag: member="BaseTcpSupport::bindAndListenTcp" ref="abe1b30dc9b4c5518693bf40f16ef0da9" args="(int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::bindAndListenTcp </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to bind service to the specified port and listen afterwards. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>local portnumber to bind on </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00050">50</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.size() != 0) {
        <span class="keywordflow">return</span>;
    }

    TCPSocket* newSocket = <span class="keyword">new</span> TCPSocket();
    newSocket-&gt;bind(port);
    newSocket-&gt;setOutputGate(<a class="code" href="classBaseTcpSupport.html#a320cb92d402a4154dbcd58df6dd4a2da" title="Member function to get local gate towards the TCP module.">getTcpOut</a>());
    newSocket-&gt;setCallbackObject(<span class="keyword">this</span>);
    newSocket-&gt;listen();
    <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.addSocket(newSocket);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac42b80ae7c06bc38db7570f84ad84770"></a><!-- doxytag: member="BaseTcpSupport::closeTcpConnection" ref="ac42b80ae7c06bc38db7570f84ad84770" args="(TransportAddress address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::closeTcpConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to close an established connection. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>transport address of the remote host </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00196">196</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="classBaseTcpSupport.html#aea2baeeb4ed02a2357fb48b86e701acd" title="Member function to check if the service is already connected.">isAlreadyConnected</a>(address)) {
        <span class="keywordflow">return</span>;
    }

    TCPSocket* oldSocket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(address.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>(),
                                                 address.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());

    oldSocket-&gt;close();
}
</pre></div>
</div>
</div>
<a class="anchor" id="acac86998e57a8180b0aefacadca5e423"></a><!-- doxytag: member="BaseTcpSupport::establishTcpConnection" ref="acac86998e57a8180b0aefacadca5e423" args="(TransportAddress address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::establishTcpConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to establish a connection to the specified node. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>transport address of the remote host </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00075">75</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8cc_source.html#l00114">handleConnectionEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classBaseTcpSupport.html#aea2baeeb4ed02a2357fb48b86e701acd" title="Member function to check if the service is already connected.">isAlreadyConnected</a>(address)) {
        <span class="keywordflow">return</span>;
    }

    TCPSocket* newSocket = <span class="keyword">new</span> TCPSocket();
    newSocket-&gt;setOutputGate(<a class="code" href="classBaseTcpSupport.html#a320cb92d402a4154dbcd58df6dd4a2da" title="Member function to get local gate towards the TCP module.">getTcpOut</a>());
    newSocket-&gt;setCallbackObject(<span class="keyword">this</span>);
    newSocket-&gt;connect(address.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>(), address.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());

    <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.addSocket(newSocket);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a320cb92d402a4154dbcd58df6dd4a2da"></a><!-- doxytag: member="BaseTcpSupport::getTcpOut" ref="a320cb92d402a4154dbcd58df6dd4a2da" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cGate* BaseTcpSupport::getTcpOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to get local gate towards the TCP module. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The local gate towards the TCP module </dd></dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00127">127</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8cc_source.html#l00050">bindAndListenTcp()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00075">establishTcpConnection()</a>, and <a class="el" href="BaseTcpSupport_8cc_source.html#l00030">handleTCPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keywordflow">return</span> <a class="code" href="classBaseTcpSupport.html#a055a6e24f9adb205647f49acd79b5673" title="local gate towards the TCP module">tcpOut</a>;}
</pre></div>
</div>
</div>
<a class="anchor" id="abbdca6fbc9e072b221c60de8ad405b3e"></a><!-- doxytag: member="BaseTcpSupport::handleConnectionEvent" ref="abbdca6fbc9e072b221c60de8ad405b3e" args="(EvCode code, TransportAddress address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::handleConnectionEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0c">EvCode</a>&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a>&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to handle passive connection events. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>event code of the current event </td></tr>
    <tr><td class="paramname">address</td><td>transport address of the remote host </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classTCPExampleApp.html#a8d000ee96b21e583beba60f71b77ffa4">TCPExampleApp</a>.</p>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00114">114</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>

<p>Referenced by <a class="el" href="TCPExampleApp_8cc_source.html#l00167">TCPExampleApp::handleConnectionEvent()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00089">sendTcpData()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00179">socketFailure()</a>, and <a class="el" href="BaseTcpSupport_8cc_source.html#l00164">socketPeerClosed()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (code == <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0cabb18399b98b1840fd4a22723532ba4ff">NO_EST_CONNECTION</a>) {
        <a class="code" href="classBaseTcpSupport.html#acac86998e57a8180b0aefacadca5e423" title="Member function to establish a connection to the specified node.">establishTcpConnection</a>(address);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aaf90d587df42ea3f9b2d8d83eb021a59"></a><!-- doxytag: member="BaseTcpSupport::handleDataReceived" ref="aaf90d587df42ea3f9b2d8d83eb021a59" args="(TransportAddress address, cPacket *msg, bool urgent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::handleDataReceived </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>urgent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to handle incoming data. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>transport address of the remote host </td></tr>
    <tr><td class="paramname">msg</td><td>incoming data message </td></tr>
    <tr><td class="paramname">urgent</td><td>message urgency </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classTCPExampleApp.html#a0b8351e36dcb18ab37943c1b4bfb1c5b">TCPExampleApp</a>.</p>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00121">121</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8cc_source.html#l00130">socketDataArrived()</a>.</p>
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="a925455a09c501c10c4d2fd091b41c5cd"></a><!-- doxytag: member="BaseTcpSupport::handleIncomingConnection" ref="a925455a09c501c10c4d2fd091b41c5cd" args="(TransportAddress address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::handleIncomingConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to handle newly opened connections. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>transport address of the remote host </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00126">126</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8cc_source.html#l00030">handleTCPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac991906514dbe20b4546de49fad67756"></a><!-- doxytag: member="BaseTcpSupport::handleTCPMessage" ref="ac991906514dbe20b4546de49fad67756" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::handleTCPMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to handle incoming TCP messages. </p>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00030">30</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    TCPSocket* socket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(msg);

    <span class="keywordflow">if</span> (socket == NULL) {
        socket = <span class="keyword">new</span> TCPSocket(msg);
        socket-&gt;setCallbackObject(<span class="keyword">this</span>);
        socket-&gt;setOutputGate(<a class="code" href="classBaseTcpSupport.html#a320cb92d402a4154dbcd58df6dd4a2da" title="Member function to get local gate towards the TCP module.">getTcpOut</a>());
        <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.addSocket(socket);
        <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> newAddress =
                <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>(socket-&gt;getRemoteAddress(),
                                 socket-&gt;getRemotePort());

        socket-&gt;processMessage(msg);
        <a class="code" href="classBaseTcpSupport.html#a925455a09c501c10c4d2fd091b41c5cd" title="Member function to handle newly opened connections.">handleIncomingConnection</a>(newAddress);
    } <span class="keywordflow">else</span> {
        socket-&gt;processMessage(msg);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aea2baeeb4ed02a2357fb48b86e701acd"></a><!-- doxytag: member="BaseTcpSupport::isAlreadyConnected" ref="aea2baeeb4ed02a2357fb48b86e701acd" args="(TransportAddress address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseTcpSupport::isAlreadyConnected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to check if the service is already connected. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>transport address of the remote host </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00064">64</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8cc_source.html#l00196">closeTcpConnection()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00075">establishTcpConnection()</a>, and <a class="el" href="BaseTcpSupport_8cc_source.html#l00089">sendTcpData()</a>.</p>
<div class="fragment"><pre class="fragment">{
    TCPSocket* newSocket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(address.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>(),
                                                 address.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());
    <span class="keywordflow">if</span> (newSocket == NULL) {
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (newSocket-&gt;getState() &gt;= <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca1e54b254708d5926f4dc33aafba7690f">TCPSocket::PEER_CLOSED</a>) {
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31897349261520bb2486208a6cf55bb4"></a><!-- doxytag: member="BaseTcpSupport::sendTcpData" ref="a31897349261520bb2486208a6cf55bb4" args="(cPacket *msg, TransportAddress address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::sendTcpData </td>
          <td>(</td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a>&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to send TCP data to the specified node. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>data message </td></tr>
    <tr><td class="paramname">address</td><td>transport address of the remote host </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00089">89</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="classBaseTcpSupport.html#aea2baeeb4ed02a2357fb48b86e701acd" title="Member function to check if the service is already connected.">isAlreadyConnected</a>(address)) {
        <a class="code" href="classBaseTcpSupport.html#abbdca6fbc9e072b221c60de8ad405b3e" title="Member function to handle passive connection events.">handleConnectionEvent</a>(<a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0cabb18399b98b1840fd4a22723532ba4ff">NO_EST_CONNECTION</a>, address);
        <span class="keywordflow">return</span>;
    }

    TCPSocket* socket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(address.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>(),
                                              address.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());

    <span class="keywordflow">if</span> (socket-&gt;getState() == TCPSocket::CONNECTED) {
        socket-&gt;send(msg);
    }

    transQueue::iterator tx = <a class="code" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573" title="msg queue partitioned by destination">queuedTx</a>.find(address);

    <span class="keywordflow">if</span> (tx != <a class="code" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573" title="msg queue partitioned by destination">queuedTx</a>.end()) {
        tx-&gt;second-&gt;push_back(msg);
    } <span class="keywordflow">else</span> {
        <a class="code" href="classBaseTcpSupport.html#aed5957ca5acb1df42dbe7837027d2409">msgQueue</a>* newQueue = <span class="keyword">new</span> <a class="code" href="classBaseTcpSupport.html#aed5957ca5acb1df42dbe7837027d2409">msgQueue</a>();
        newQueue-&gt;push_back(msg);
        <a class="code" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573" title="msg queue partitioned by destination">queuedTx</a>[address] = newQueue;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3de2e8b022586f387fdba1ca42dbdfd1"></a><!-- doxytag: member="BaseTcpSupport::setTcpOut" ref="a3de2e8b022586f387fdba1ca42dbdfd1" args="(cGate *gate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::setTcpOut </td>
          <td>(</td>
          <td class="paramtype">cGate *&#160;</td>
          <td class="paramname"><em>gate</em></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Member function to set local gate towards the TCP module during init phase. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">gate</td><td>local gate towards the TCP module </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00120">120</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>
<div class="fragment"><pre class="fragment">{<a class="code" href="classBaseTcpSupport.html#a055a6e24f9adb205647f49acd79b5673" title="local gate towards the TCP module">tcpOut</a> = gate;}
</pre></div>
</div>
</div>
<a class="anchor" id="a7bb5197716d6ff8b1c5710dec5e311d0"></a><!-- doxytag: member="BaseTcpSupport::socketDataArrived" ref="a7bb5197716d6ff8b1c5710dec5e311d0" args="(int connId, void *yourPtr, cPacket *msg, bool urgent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::socketDataArrived </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>urgent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00130">130</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    TCPSocket* socket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(connId);
    <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> remoteAddress(socket-&gt;getRemoteAddress(),
                                   socket-&gt;getRemotePort());

    <a class="code" href="classBaseTcpSupport.html#aaf90d587df42ea3f9b2d8d83eb021a59" title="Member function to handle incoming data.">handleDataReceived</a>(remoteAddress, msg, urgent);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0ed2162dcfac0efb997ebdb326f0dac2"></a><!-- doxytag: member="BaseTcpSupport::socketEstablished" ref="a0ed2162dcfac0efb997ebdb326f0dac2" args="(int connId, void *yourPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::socketEstablished </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00140">140</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    TCPSocket* socket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(connId);

    <span class="keywordflow">if</span> (socket == NULL) {
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> remoteAddress(socket-&gt;getRemoteAddress(),
                                   socket-&gt;getRemotePort());

    transQueue::iterator tx = <a class="code" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573" title="msg queue partitioned by destination">queuedTx</a>.find(remoteAddress);

    <span class="keywordflow">if</span> (tx != <a class="code" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573" title="msg queue partitioned by destination">queuedTx</a>.end()) {
        <span class="keywordflow">for</span> (uint32 i = 0 ; i &lt; tx-&gt;second-&gt;size(); i++) {
            socket-&gt;send(tx-&gt;second-&gt;at(i));
        }

        tx-&gt;second-&gt;clear();
        <span class="keyword">delete</span> tx-&gt;second;
        <a class="code" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573" title="msg queue partitioned by destination">queuedTx</a>.erase(remoteAddress);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3c9868297cff55088744c61ae044afec"></a><!-- doxytag: member="BaseTcpSupport::socketFailure" ref="a3c9868297cff55088744c61ae044afec" args="(int connId, void *yourPtr, int code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::socketFailure </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00179">179</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    TCPSocket* socket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(connId);
    <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> remoteAddress(socket-&gt;getRemoteAddress(),
                                   socket-&gt;getRemotePort());

    <span class="keywordflow">if</span> (code == TCP_I_CONNECTION_REFUSED) {
        <a class="code" href="classBaseTcpSupport.html#abbdca6fbc9e072b221c60de8ad405b3e" title="Member function to handle passive connection events.">handleConnectionEvent</a>(<a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0cad633154e9b853f5d9673fddfe7895ab0">PEER_REFUSED</a>, remoteAddress);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (code == TCP_I_TIMED_OUT) {
        <a class="code" href="classBaseTcpSupport.html#abbdca6fbc9e072b221c60de8ad405b3e" title="Member function to handle passive connection events.">handleConnectionEvent</a>(<a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0caf97c65f1e15e6d5fcff01b5d1a163d8d">PEER_TIMEDOUT</a>, remoteAddress);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (code == TCP_I_CONNECTION_RESET) {
        <a class="code" href="classBaseTcpSupport.html#abbdca6fbc9e072b221c60de8ad405b3e" title="Member function to handle passive connection events.">handleConnectionEvent</a>(<a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca9b57d3b18b5be8f346bcc39c15cb11b3">CONNECTION_RESET</a>, remoteAddress);
    } <span class="keywordflow">else</span> {
        <span class="keywordflow">throw</span> <span class="keyword">new</span> cRuntimeError(<span class="stringliteral">&quot;Invalid error code on socketFailure.&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7d969ec0a0ed92ebe9cc5ff5ce0f424c"></a><!-- doxytag: member="BaseTcpSupport::socketPeerClosed" ref="a7d969ec0a0ed92ebe9cc5ff5ce0f424c" args="(int connId, void *yourPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseTcpSupport::socketPeerClosed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseTcpSupport_8cc_source.html#l00164">164</a> of file <a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    TCPSocket* socket = <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.<a class="code" href="classExtTCPSocketMap.html#a547a83df231ec53d66757a0b79956876" title="Member function to find the TCPSocket by the remote address and port.">findSocketFor</a>(connId);
    <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> remoteAddress(socket-&gt;getRemoteAddress(),
                                   socket-&gt;getRemotePort());

    <span class="keywordflow">if</span> (socket-&gt;getState() == <a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca1e54b254708d5926f4dc33aafba7690f">TCPSocket::PEER_CLOSED</a>) {
        socket-&gt;close();
        <a class="code" href="classBaseTcpSupport.html#abbdca6fbc9e072b221c60de8ad405b3e" title="Member function to handle passive connection events.">handleConnectionEvent</a>(<a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca1e54b254708d5926f4dc33aafba7690f">PEER_CLOSED</a>, remoteAddress);
    }  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (socket-&gt;getState() == TCPSocket::CLOSED) {
        <a class="code" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289" title="Socket map with extended functionality to find sockets.">sockets</a>.removeSocket(socket);
        <a class="code" href="classBaseTcpSupport.html#abbdca6fbc9e072b221c60de8ad405b3e" title="Member function to handle passive connection events.">handleConnectionEvent</a>(<a class="code" href="classBaseTcpSupport.html#a310b5ae009665464d964b1d1384eac0ca20d037742683e3b4836ea29a0fbd9069">CONNECTION_SUCC_ClOSED</a>, remoteAddress);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acddc6342e5d7571f4fe51ba7541c942b"></a><!-- doxytag: member="BaseTcpSupport::socketStatusArrived" ref="acddc6342e5d7571f4fe51ba7541c942b" args="(int connId, void *yourPtr, TCPStatusInfo *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseTcpSupport::socketStatusArrived </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>connId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>yourPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TCPStatusInfo *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00046">46</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>
<div class="fragment"><pre class="fragment">{<span class="keyword">delete</span> status;}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a08363ee64ea0ec549ebd9e02656b2573"></a><!-- doxytag: member="BaseTcpSupport::queuedTx" ref="a08363ee64ea0ec549ebd9e02656b2573" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseTcpSupport.html#a7009dd7f97f7942e7527770f7f15fa22">transQueue</a> <a class="el" href="classBaseTcpSupport.html#a08363ee64ea0ec549ebd9e02656b2573">BaseTcpSupport::queuedTx</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>msg queue partitioned by destination </p>

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00134">134</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8cc_source.html#l00089">sendTcpData()</a>, and <a class="el" href="BaseTcpSupport_8cc_source.html#l00140">socketEstablished()</a>.</p>

</div>
</div>
<a class="anchor" id="aa19d228a41b2952cbfc2ae3e8d6dd289"></a><!-- doxytag: member="BaseTcpSupport::sockets" ref="aa19d228a41b2952cbfc2ae3e8d6dd289" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classExtTCPSocketMap.html">ExtTCPSocketMap</a> <a class="el" href="classBaseTcpSupport.html#aa19d228a41b2952cbfc2ae3e8d6dd289">BaseTcpSupport::sockets</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Socket map with extended functionality to find sockets. </p>

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00131">131</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8cc_source.html#l00050">bindAndListenTcp()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00196">closeTcpConnection()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00075">establishTcpConnection()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00030">handleTCPMessage()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00064">isAlreadyConnected()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00089">sendTcpData()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00130">socketDataArrived()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00140">socketEstablished()</a>, <a class="el" href="BaseTcpSupport_8cc_source.html#l00179">socketFailure()</a>, and <a class="el" href="BaseTcpSupport_8cc_source.html#l00164">socketPeerClosed()</a>.</p>

</div>
</div>
<a class="anchor" id="a055a6e24f9adb205647f49acd79b5673"></a><!-- doxytag: member="BaseTcpSupport::tcpOut" ref="a055a6e24f9adb205647f49acd79b5673" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cGate* <a class="el" href="classBaseTcpSupport.html#a055a6e24f9adb205647f49acd79b5673">BaseTcpSupport::tcpOut</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>local gate towards the TCP module </p>

<p>Definition at line <a class="el" href="BaseTcpSupport_8h_source.html#l00136">136</a> of file <a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a>.</p>

<p>Referenced by <a class="el" href="BaseTcpSupport_8h_source.html#l00127">getTcpOut()</a>, and <a class="el" href="BaseTcpSupport_8h_source.html#l00120">setTcpOut()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="BaseTcpSupport_8h_source.html">BaseTcpSupport.h</a></li>
<li><a class="el" href="BaseTcpSupport_8cc_source.html">BaseTcpSupport.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classBaseTcpSupport.html">BaseTcpSupport</a>      </li>

    <li class="footer">Generated on Thu Mar 6 2014 14:06:41 for OverSim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>

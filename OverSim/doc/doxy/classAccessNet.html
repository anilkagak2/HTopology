<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: AccessNet Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OverSim
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classAccessNet.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">AccessNet Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="AccessNet" -->
<p>Configuration module for access networks.  
 <a href="classAccessNet.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>&gt;</code></p>

<p><a href="classAccessNet-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ae58b8e6d1f7031637a359255b977d224">size</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns number of nodes at this access router.  <a href="#ae58b8e6d1f7031637a359255b977d224"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cModule *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ae118b07d63cf48646f3764a621a214ee">getAccessNode</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for router module.  <a href="#ae118b07d63cf48646f3764a621a214ee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual IPvXAddress&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a0fbbc43fd47f107e7f769e2602f0fdad">addOverlayNode</a> (cModule *overlayNode, bool migrate=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gathers some information about the terminal and appends it to the overlay terminal vector.  <a href="#a0fbbc43fd47f107e7f769e2602f0fdad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#aa984db75d1ddb20ae64cee04e2682f5c">getRandomNodeId</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">returns a random ID  <a href="#aa984db75d1ddb20ae64cee04e2682f5c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cModule *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a24b138a835855095b3e4482e40c546bc">removeOverlayNode</a> (int ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a node from the access net.  <a href="#a24b138a835855095b3e4482e40c546bc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual cModule *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ae8fe2ceae197c110c0da3024082c3fcf">getOverlayNode</a> (int ID)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">searches overlayTerminal[] for a given node  <a href="#ae8fe2ceae197c110c0da3024082c3fcf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a4e5463be0cb8610d9ffca450ddbf9029">selectChannel</a> (const std::string &amp;typeRx, const std::string &amp;typeTx)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">set access types  <a href="#a4e5463be0cb8610d9ffca450ddbf9029"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IPvXAddress&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a5b634e5581b4a158e9ca7e23e0b9ef5a">getAssignedPrefix</a> (IInterfaceTable *ift)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#acd4d82fb803a2020773fef2572c40bf4">numInitStages</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">OMNeT number of init stages.  <a href="#acd4d82fb803a2020773fef2572c40bf4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ad716fd857208f5b5b8802d14d09a945e">initialize</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gather some information about the router node.  <a href="#ad716fd857208f5b5b8802d14d09a945e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a15f6234c7e8abe5145ce66bbe94d499f">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">OMNeT handleMessage method.  <a href="#a15f6234c7e8abe5145ce66bbe94d499f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ac7e78d72e60d4d64e9ee85a1ed678be1">updateDisplayString</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays the current number of terminals connected to this access net.  <a href="#ac7e78d72e60d4d64e9ee85a1ed678be1"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNodeInfo.html">NodeInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef">router</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">this access router  <a href="#a7ccb579bbc8d9a942b35c96658a036ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classTerminalInfo.html">TerminalInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46">overlayTerminal</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the terminals at this access router  <a href="#ad68c733a73390c69d1d4c3d3d0c91c46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; IPvXAddress &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a27940294cf0c5f250b35ff64e19ec357">returnedIPs</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">list of IP addresses wich are no longer in use  <a href="#a27940294cf0c5f250b35ff64e19ec357"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#abb5ed6bbefe4c7cfc886f3b43faff1e1">lastIP</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">last assigned IP address  <a href="#abb5ed6bbefe4c7cfc886f3b43faff1e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e">useIPv6</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">IPv6 address usage.  <a href="#ad010d8c5262a7b585d3f49e10ff59a8e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#afba3ef86ffdc7ec8af644a76558a7aed">channelTypesRx</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">vector of possible access channels (rx)  <a href="#afba3ef86ffdc7ec8af644a76558a7aed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#ac41b200a8e79b8f628c20c59e480bd5b">channelTypeRxStr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the current active channel type (rx)  <a href="#ac41b200a8e79b8f628c20c59e480bd5b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a79d1026a8d36994617345002d2509a1e">channelTypesTx</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">vector of possible access channels (tx)  <a href="#a79d1026a8d36994617345002d2509a1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a66599a3b2feac15cac9394f1223f64e6">channelTypeTxStr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the current active channel type (tx)  <a href="#a66599a3b2feac15cac9394f1223f64e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cOutVector&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAccessNet.html#a614e8b71ca1f07080f63ee94d4b4eacb">lifetimeVector</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">vector of node lifetimes  <a href="#a614e8b71ca1f07080f63ee94d4b4eacb"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Configuration module for access networks. </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00106">106</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0fbbc43fd47f107e7f769e2602f0fdad"></a><!-- doxytag: member="AccessNet::addOverlayNode" ref="a0fbbc43fd47f107e7f769e2602f0fdad" args="(cModule *overlayNode, bool migrate=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IPvXAddress AccessNet::addOverlayNode </td>
          <td>(</td>
          <td class="paramtype">cModule *&#160;</td>
          <td class="paramname"><em>overlayNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>migrate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gathers some information about the terminal and appends it to the overlay terminal vector. </p>
<p>Gathers some information about the terminal and appends it to the overlay terminal vector. (called by <a class="el" href="classInetUnderlayConfigurator.html" title="Configurator module for the InetUnderlay.">InetUnderlayConfigurator</a> in stage MAX_STAGE_UNDERLAY) </p>

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00088">88</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>

<p>Referenced by <a class="el" href="InetUnderlayConfigurator_8cc_source.html#l00225">InetUnderlayConfigurator::migrateNode()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;addOverlayNode()&quot;</span>);

    <a class="code" href="classTerminalInfo.html" title="Information about a terminal.">TerminalInfo</a> terminal;
    terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a> = node;
    terminal.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a> = IPAddressResolver().interfaceTableOf(node);
    terminal.<a class="code" href="classTerminalInfo.html#a42b91d88269991a6e94d1992de292e66" title="pointer to remote interface table">remoteInterfaceTable</a> = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a>;
    <span class="keywordflow">if</span> (<a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a>) {
        terminal.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a> = IPAddressResolver().routingTable6Of(node);
    }
    <span class="keywordflow">else</span> {
        terminal.<a class="code" href="classNodeInfo.html#a8ccd50235c18b483e14ad7e3b2358cf4" title="pointer to routing table of this node">routingTable</a> = IPAddressResolver().routingTableOf(node);
    }
    terminal.<a class="code" href="classTerminalInfo.html#aa7cb2290dd47461412cb334b33515bfc" title="pointer to PPP module">PPPInterface</a> = node-&gt;getSubmodule(<span class="stringliteral">&quot;ppp&quot;</span>, 0);
    terminal.<a class="code" href="classNodeInfo.html#a5ed47a1d8a21b910962dd8c67e2aacd4" title="creation timestamp">createdAt</a> = simTime();

    <span class="comment">// find unassigned ip address:</span>
    <span class="comment">// check list of returned IPs</span>
    <span class="comment">// TODO: check overlays for side effects of reused IP addresses</span>
<span class="comment">//    if (returnedIPs.size() != 0) {</span>
<span class="comment">//      terminal.IPAddress = returnedIPs.back();</span>
<span class="comment">//      returnedIPs.pop_back();</span>
<span class="comment">//    }</span>
<span class="comment">//    else {</span>
    <span class="keywordflow">if</span> (<a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a>) {
        <a class="code" href="structIPv6Words.html" title="Structure to manipulate IPv6 addresses easily.">IPv6Words</a> candidate(<a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>);
        <span class="comment">// we dont need to check for duplicates because of the giant address space and reuse of old IPs</span>
        candidate.d1 += ++<a class="code" href="classAccessNet.html#abb5ed6bbefe4c7cfc886f3b43faff1e1" title="last assigned IP address">lastIP</a>;
        terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a> = IPvXAddress(IPv6Address(candidate.d0, candidate.d1, candidate.d2, candidate.d3));
    } <span class="keywordflow">else</span> {
        uint32_t routerAddr = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get4().getInt();

        <span class="comment">// Start at last given address, check if next address is valid and free.</span>
        <span class="keywordtype">bool</span> ip_test = <span class="keyword">false</span>;
        <span class="keywordflow">for</span> (uint32 ipOffset = <a class="code" href="classAccessNet.html#abb5ed6bbefe4c7cfc886f3b43faff1e1" title="last assigned IP address">lastIP</a> + 1; ipOffset != <a class="code" href="classAccessNet.html#abb5ed6bbefe4c7cfc886f3b43faff1e1" title="last assigned IP address">lastIP</a>; ipOffset++) {
            <span class="keywordflow">if</span> ( ipOffset == 0x10000) {
                <span class="comment">// Netmask = 255.255.0.0, so roll over if offset = 2**16</span>
                ipOffset = 0;
                <span class="keywordflow">continue</span>;
            }

            uint32_t ip = routerAddr + ipOffset;

            <span class="comment">// Check if IP is valid:</span>
            <span class="comment">//   Reject x.y.z.0 or x.y.z.255 or x.y.255.z</span>
            <span class="keywordflow">if</span> ( ((ip &amp; 0xff) == 0) || ((ip &amp; 0xff) == 0xff)
                    || ((ip &amp; 0xff00) == 0xff00) ) {
                <span class="keywordflow">continue</span>;
            }

            <span class="comment">// Check if IP is free</span>
            ip_test = <span class="keyword">true</span>;
            <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.size(); i++) {
                <span class="keywordflow">if</span> (<a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>[i].IPAddress == ip) {
                    ip_test = <span class="keyword">false</span>;
                    <span class="keywordflow">break</span>;
                }
            }

            <span class="comment">// found valid IP</span>
            <span class="keywordflow">if</span> (ip_test) {
                terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a> = IPvXAddress(ip);
                <a class="code" href="classAccessNet.html#abb5ed6bbefe4c7cfc886f3b43faff1e1" title="last assigned IP address">lastIP</a> = ipOffset;
                <span class="keywordflow">break</span>;
            }
        }
        <span class="keywordflow">if</span> (!ip_test)
            opp_error (<span class="stringliteral">&quot;Error creating node: No available IP in access net!&quot;</span>);
    }
<span class="comment">//    }</span>

    <span class="comment">// update ip display string</span>
    <span class="keywordflow">if</span> (ev.isGUI()) {
        <span class="keyword">const</span> <span class="keywordtype">char</span>* ip_disp = <span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>
        (terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.str().c_str());
        terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getDisplayString().insertTag(<span class="stringliteral">&quot;t&quot;</span>, 0);
        terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>, 0, ip_disp);
        terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>, 1, <span class="stringliteral">&quot;l&quot;</span>);
    }


    <span class="comment">//</span>
    <span class="comment">// Create new remote ppp interface module for this terminal</span>
    <span class="comment">//</span>

    <span class="comment">// create ppp interface module</span>

    <span class="keywordtype">int</span> k = 1;
    <span class="keywordflow">while</span> ( <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;findSubmodule(<span class="stringliteral">&quot;ppp&quot;</span>, k) != -1 )
        k++;

    cModuleType* pppInterfaceModuleType = cModuleType::get(<span class="stringliteral">&quot;inet.linklayer.ppp.PPPInterface&quot;</span>);
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a> = pppInterfaceModuleType-&gt;
    create(<span class="stringliteral">&quot;ppp&quot;</span>, <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>, 0, k);


    <span class="comment">//</span>
    <span class="comment">// Connect all gates</span>
    <span class="comment">//</span>

    <span class="comment">// connect terminal to access router and vice versa</span>
    cGate* routerInGate = <a class="code" href="AccessNet_8cc.html#a15cec891c95d848dfc3900b508a58eaa" title="Returns a module&#39;s fist unconnected gate.">firstUnusedGate</a>(<a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>, <span class="stringliteral">&quot;pppg&quot;</span>, cGate::INPUT);
    cGate* routerOutGate = <a class="code" href="AccessNet_8cc.html#a15cec891c95d848dfc3900b508a58eaa" title="Returns a module&#39;s fist unconnected gate.">firstUnusedGate</a>(<a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>, <span class="stringliteral">&quot;pppg&quot;</span>, cGate::OUTPUT);

    cChannelType* channelTypeRx = cChannelType::find( <a class="code" href="classAccessNet.html#ac41b200a8e79b8f628c20c59e480bd5b" title="the current active channel type (rx)">channelTypeRxStr</a>.c_str() );
    cChannelType* channelTypeTx = cChannelType::find( <a class="code" href="classAccessNet.html#a66599a3b2feac15cac9394f1223f64e6" title="the current active channel type (tx)">channelTypeTxStr</a>.c_str() );
    <span class="keywordflow">if</span> (!channelTypeRx || !channelTypeTx) 
        opp_error(<span class="stringliteral">&quot;Could not find Channel or ChannelRx Type. Most likely &quot;</span>
            <span class="stringliteral">&quot;parameter channelTypes does not match the channels defined &quot;</span>
            <span class="stringliteral">&quot;in channels.ned&quot;</span>);

    terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;gate(<span class="stringliteral">&quot;pppg$o&quot;</span>, 0)-&gt;connectTo(routerInGate,
                channelTypeRx-&gt;create(<a class="code" href="classAccessNet.html#ac41b200a8e79b8f628c20c59e480bd5b" title="the current active channel type (rx)">channelTypeRxStr</a>.c_str()));
    routerOutGate-&gt;connectTo(terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;gate(<span class="stringliteral">&quot;pppg$i&quot;</span>, 0),
                 channelTypeTx-&gt;create(<a class="code" href="classAccessNet.html#a66599a3b2feac15cac9394f1223f64e6" title="the current active channel type (tx)">channelTypeTxStr</a>.c_str()));

    <span class="comment">// connect ppp interface module to router module and vice versa</span>
    routerInGate-&gt;connectTo(terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;gate(<span class="stringliteral">&quot;phys$i&quot;</span>));
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;gate(<span class="stringliteral">&quot;phys$o&quot;</span>)-&gt;connectTo(routerOutGate);

    <span class="comment">// connect ppp interface module to network layer module and vice versa</span>
    cModule* netwModule = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getSubmodule(<span class="stringliteral">&quot;networkLayer&quot;</span>);

    cGate* netwInGate = <a class="code" href="AccessNet_8cc.html#a15cec891c95d848dfc3900b508a58eaa" title="Returns a module&#39;s fist unconnected gate.">firstUnusedGate</a>(netwModule, <span class="stringliteral">&quot;ifIn&quot;</span>);
    cGate* netwOutGate = <a class="code" href="AccessNet_8cc.html#a15cec891c95d848dfc3900b508a58eaa" title="Returns a module&#39;s fist unconnected gate.">firstUnusedGate</a>(netwModule, <span class="stringliteral">&quot;ifOut&quot;</span>);

    netwOutGate-&gt;connectTo(terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;gate(<span class="stringliteral">&quot;netwIn&quot;</span>));
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;gate(<span class="stringliteral">&quot;netwOut&quot;</span>)-&gt;connectTo(netwInGate);

    <span class="comment">// connect network layer module to ip and arp modules</span>
    cModule* ipModule;
    <span class="keywordflow">if</span> (<a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a>) {
        ipModule = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getSubmodule(<span class="stringliteral">&quot;networkLayer&quot;</span>)-&gt;getSubmodule(<span class="stringliteral">&quot;ipv6&quot;</span>);
    }
    <span class="keywordflow">else</span> {
        ipModule = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getSubmodule(<span class="stringliteral">&quot;networkLayer&quot;</span>)-&gt;getSubmodule(<span class="stringliteral">&quot;ip&quot;</span>);
    }

    cGate* ipIn = <a class="code" href="AccessNet_8cc.html#a15cec891c95d848dfc3900b508a58eaa" title="Returns a module&#39;s fist unconnected gate.">firstUnusedGate</a>(ipModule, <span class="stringliteral">&quot;queueIn&quot;</span>);
    netwInGate-&gt;connectTo(ipIn);

    cModule* arpModule = NULL;

    <span class="keywordflow">if</span>(<a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a>) {
        arpModule = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getSubmodule(<span class="stringliteral">&quot;networkLayer&quot;</span>)-&gt;getSubmodule(<span class="stringliteral">&quot;neighbourDiscovery&quot;</span>); <span class="comment">//comment out for speed-hack</span>
    } <span class="keywordflow">else</span> {
        arpModule = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;getSubmodule(<span class="stringliteral">&quot;networkLayer&quot;</span>)-&gt;getSubmodule(<span class="stringliteral">&quot;arp&quot;</span>); <span class="comment">//comment out for speed-hack</span>
        cGate* arpOut = <a class="code" href="AccessNet_8cc.html#a15cec891c95d848dfc3900b508a58eaa" title="Returns a module&#39;s fist unconnected gate.">firstUnusedGate</a>(arpModule, <span class="stringliteral">&quot;nicOut&quot;</span>); <span class="comment">//comment out for speed-hack</span>
        arpOut-&gt;connectTo(netwOutGate);    <span class="comment">//comment out for speed-hack</span>

    }

    <span class="comment">//</span>
    <span class="comment">// Start ppp interface modules</span>
    <span class="comment">//</span>
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;finalizeParameters();
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;setDisplayString(<span class="stringliteral">&quot;i=block/ifcard&quot;</span>);
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;buildInside();
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;scheduleStart(simTime());
    terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>-&gt;callInitialize();

    <span class="keywordflow">if</span> (!migrate) {
        <span class="comment">// we are already in stage 4 and need to call initialize</span>
    <span class="comment">// for all previous stages manually</span>
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a51360a7e54ff555dc3d078d686500cb9" title="last stage for underlay configurators">MAX_STAGE_UNDERLAY</a> + 1; i++) {
            terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>-&gt;callInitialize(i);
        }
    }

    terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a> = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a>-&gt;getInterface(
            <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a>-&gt;getNumInterfaces() - 1);
    terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a> = terminal.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a>-&gt;getInterfaceByName(<span class="stringliteral">&quot;ppp0&quot;</span>);


    <span class="comment">//</span>
    <span class="comment">// Fill in interface table and routing table.</span>
    <span class="comment">//</span>

    <span class="keywordflow">if</span> (<a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a>) {
        <span class="comment">//</span>
        <span class="comment">// Fill in interface table.</span>

        <span class="comment">// router</span>
        IPv6InterfaceData* interfaceData = <span class="keyword">new</span> IPv6InterfaceData;
        interfaceData-&gt;setAdvSendAdvertisements(<span class="keyword">true</span>); <span class="comment">// router</span>
        interfaceData-&gt;assignAddress(IPv6Address::formLinkLocalAddress(terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;getInterfaceToken()), <span class="keyword">false</span>, 0, 0);
        terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;setIPv6Data(interfaceData);
        terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;setMACAddress(MACAddress::generateAutoAddress());

        <span class="comment">// terminal</span>
        terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;ipv6Data()-&gt;setAdvSendAdvertisements(<span class="keyword">false</span>); <span class="comment">// host</span>
        terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;ipv6Data()-&gt;assignAddress(terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get6(), <span class="keyword">false</span>, 0, 0);
        terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;ipv6Data()-&gt;assignAddress(IPv6Address::formLinkLocalAddress(terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;getInterfaceToken()), <span class="keyword">false</span>, 0, 0);
        terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;setMACAddress(MACAddress::generateAutoAddress());

        <span class="comment">//</span>
        <span class="comment">// Fill in routing table.</span>
        <span class="comment">//</span>

        <span class="comment">// router</span>
        <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;addStaticRoute(terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get6(),64, terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;getInterfaceId(), terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;ipv6Data()-&gt;getLinkLocalAddress());

        <span class="comment">// terminal</span>
        terminal.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;addDefaultRoute(terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;ipv6Data()-&gt;getLinkLocalAddress(), terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;getInterfaceId(), 0);

    } <span class="keywordflow">else</span> {

        <span class="comment">//</span>
        <span class="comment">// Fill in interface table.</span>
        <span class="comment">//</span>

        <span class="comment">// router</span>
        IPv4InterfaceData* interfaceData = <span class="keyword">new</span> IPv4InterfaceData;
        interfaceData-&gt;setIPAddress(<a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get4());
        interfaceData-&gt;setNetmask(IPAddress::ALLONES_ADDRESS);
        terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;setIPv4Data(interfaceData);

        <span class="comment">// terminal</span>
        terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;ipv4Data()-&gt;setIPAddress(terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get4());
        terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;ipv4Data()-&gt;setNetmask(IPAddress::ALLONES_ADDRESS);

        <span class="comment">//</span>
        <span class="comment">// Fill in routing table.</span>
        <span class="comment">//</span>

        <span class="comment">// router</span>
        IPRoute* <a class="code" href="VastDefs_8h.html#a51f63d24f02be00251e895721eae51b0">re</a> = <span class="keyword">new</span> IPRoute();
        re-&gt;setHost(terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get4());
        re-&gt;setNetmask(IPAddress(IPAddress::ALLONES_ADDRESS));
        re-&gt;setInterface(terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>);
        re-&gt;setType(IPRoute::DIRECT);
        re-&gt;setSource(IPRoute::MANUAL);
        <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a8ccd50235c18b483e14ad7e3b2358cf4" title="pointer to routing table of this node">routingTable</a>-&gt;addRoute(re);
        terminal.<a class="code" href="classTerminalInfo.html#a121e0d4da175dc4c0494ae34fe684130" title="pointer to remote routing table">remoteRoutingEntry</a> = <a class="code" href="VastDefs_8h.html#a51f63d24f02be00251e895721eae51b0">re</a>;

        <span class="comment">// terminal</span>
        IPRoute* te = <span class="keyword">new</span> IPRoute();
        te-&gt;setHost(IPAddress::UNSPECIFIED_ADDRESS);
        te-&gt;setNetmask(IPAddress::UNSPECIFIED_ADDRESS);
        te-&gt;setGateway(<a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get4());
        te-&gt;setInterface(terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>);
        te-&gt;setType(IPRoute::REMOTE);
        te-&gt;setSource(IPRoute::MANUAL);
        terminal.<a class="code" href="classNodeInfo.html#a8ccd50235c18b483e14ad7e3b2358cf4" title="pointer to routing table of this node">routingTable</a>-&gt;addRoute(te);
        terminal.<a class="code" href="classTerminalInfo.html#a3b86b8bb778914b05fec401b5fcb79f1" title="pointer to routing entry">routingEntry</a> = te;

    }


    <span class="comment">// append module to overlay terminal vector</span>
    <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.push_back(terminal);
    <span class="comment">//int ID = terminal.module-&gt;getId();</span>

    <a class="code" href="classAccessNet.html#ac7e78d72e60d4d64e9ee85a1ed678be1" title="Displays the current number of terminals connected to this access net.">updateDisplayString</a>();

    <span class="keywordflow">return</span> terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae118b07d63cf48646f3764a621a214ee"></a><!-- doxytag: member="AccessNet::getAccessNode" ref="ae118b07d63cf48646f3764a621a214ee" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual cModule* AccessNet::getAccessNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for router module. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to router module </dd></dl>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00125">125</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5b634e5581b4a158e9ca7e23e0b9ef5a"></a><!-- doxytag: member="AccessNet::getAssignedPrefix" ref="a5b634e5581b4a158e9ca7e23e0b9ef5a" args="(IInterfaceTable *ift)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IPvXAddress AccessNet::getAssignedPrefix </td>
          <td>(</td>
          <td class="paramtype">IInterfaceTable *&#160;</td>
          <td class="paramname"><em>ift</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00467">467</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//FIXME: support multiple prefixes</span>
    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt; ift-&gt;getNumInterfaces(); i++) {
        <span class="keywordflow">if</span> (!ift-&gt;getInterface(i)-&gt;isLoopback()) {
            <span class="keywordflow">if</span> (ift-&gt;getInterface(i)-&gt;ipv6Data()-&gt;getNumAdvPrefixes() == 1)
                <span class="keywordflow">return</span> ift-&gt;getInterface(i)-&gt;ipv6Data()-&gt;getAdvPrefix(0).prefix;
            <span class="keywordflow">else</span>
                opp_error(<span class="stringliteral">&quot;Prefix is not unique.&quot;</span>);
        }
    }
    <span class="keywordflow">return</span> IPvXAddress();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae8fe2ceae197c110c0da3024082c3fcf"></a><!-- doxytag: member="AccessNet::getOverlayNode" ref="ae8fe2ceae197c110c0da3024082c3fcf" args="(int ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cModule * AccessNet::getOverlayNode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>searches overlayTerminal[] for a given node </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ID</td><td>position of the node in overlayTerminal </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the nodeId if found, -1 else </dd></dl>

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00426">426</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>

<p>Referenced by <a class="el" href="InetUnderlayConfigurator_8cc_source.html#l00158">InetUnderlayConfigurator::preKillNode()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;getOverlayNode()&quot;</span>);

    cModule* node = NULL;

    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.size(); i++) {
        <span class="keywordflow">if</span>(<a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>[i].module-&gt;getId() == ID)
            node = <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>[i].module;
    }
    <span class="keywordflow">return</span> node;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa984db75d1ddb20ae64cee04e2682f5c"></a><!-- doxytag: member="AccessNet::getRandomNodeId" ref="aa984db75d1ddb20ae64cee04e2682f5c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AccessNet::getRandomNodeId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns a random ID </p>

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00347">347</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;getRandomNodeId()&quot;</span>);

    <span class="keywordflow">return</span> <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>[intuniform(0, <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.size() - 1)].module-&gt;getId();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a15f6234c7e8abe5145ce66bbe94d499f"></a><!-- doxytag: member="AccessNet::handleMessage" ref="a15f6234c7e8abe5145ce66bbe94d499f" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AccessNet::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>OMNeT handleMessage method. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>the message to handle </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00083">83</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">error</a>(<span class="stringliteral">&quot;this module doesn&#39;t handle messages, it runs only in initialize()&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad716fd857208f5b5b8802d14d09a945e"></a><!-- doxytag: member="AccessNet::initialize" ref="ad716fd857208f5b5b8802d14d09a945e" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AccessNet::initialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gather some information about the router node. </p>

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00046">46</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532ac691a73094515eb9c580b1cac99f416c" title="first stage for underlay configurators">MIN_STAGE_UNDERLAY</a> + 1)
        <span class="keywordflow">return</span>;

    <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a> = getParentModule();
    <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a> = IPAddressResolver().interfaceTableOf(getParentModule());
    <a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a> = par(<span class="stringliteral">&quot;useIPv6Addresses&quot;</span>).boolValue();
    <span class="keywordflow">if</span> (<a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a>){
        <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a> = IPAddressResolver().routingTable6Of(getParentModule());
        <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a> = <a class="code" href="classAccessNet.html#a5b634e5581b4a158e9ca7e23e0b9ef5a">getAssignedPrefix</a>(<a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a>);
    } <span class="keywordflow">else</span> {
        <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a8ccd50235c18b483e14ad7e3b2358cf4" title="pointer to routing table of this node">routingTable</a> = IPAddressResolver().routingTableOf(getParentModule());
        <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a> = IPAddressResolver().addressOf(getParentModule());
    }

    <a class="code" href="classAccessNet.html#a79d1026a8d36994617345002d2509a1e" title="vector of possible access channels (tx)">channelTypesTx</a> = cStringTokenizer(par(<span class="stringliteral">&quot;channelTypes&quot;</span>), <span class="stringliteral">&quot; &quot;</span>).asVector();
    <a class="code" href="classAccessNet.html#afba3ef86ffdc7ec8af644a76558a7aed" title="vector of possible access channels (rx)">channelTypesRx</a> = cStringTokenizer(par(<span class="stringliteral">&quot;channelTypesRx&quot;</span>), <span class="stringliteral">&quot; &quot;</span>).asVector();
    
    <span class="keywordflow">if</span> (<a class="code" href="classAccessNet.html#afba3ef86ffdc7ec8af644a76558a7aed" title="vector of possible access channels (rx)">channelTypesRx</a>.size() != <a class="code" href="classAccessNet.html#a79d1026a8d36994617345002d2509a1e" title="vector of possible access channels (tx)">channelTypesTx</a>.size()) {
        <a class="code" href="classAccessNet.html#afba3ef86ffdc7ec8af644a76558a7aed" title="vector of possible access channels (rx)">channelTypesRx</a> = <a class="code" href="classAccessNet.html#a79d1026a8d36994617345002d2509a1e" title="vector of possible access channels (tx)">channelTypesTx</a>;
    }
    
    <span class="keywordtype">int</span> chanIndex = intuniform(0, <a class="code" href="classAccessNet.html#a79d1026a8d36994617345002d2509a1e" title="vector of possible access channels (tx)">channelTypesTx</a>.size()-1);

    <a class="code" href="classAccessNet.html#a4e5463be0cb8610d9ffca450ddbf9029" title="set access types">selectChannel</a>(<a class="code" href="classAccessNet.html#afba3ef86ffdc7ec8af644a76558a7aed" title="vector of possible access channels (rx)">channelTypesRx</a>[chanIndex], <a class="code" href="classAccessNet.html#a79d1026a8d36994617345002d2509a1e" title="vector of possible access channels (tx)">channelTypesTx</a>[chanIndex]);

    <span class="comment">// statistics</span>
    <a class="code" href="classAccessNet.html#a614e8b71ca1f07080f63ee94d4b4eacb" title="vector of node lifetimes">lifetimeVector</a>.setName(<span class="stringliteral">&quot;Terminal Lifetime&quot;</span>);

    WATCH_VECTOR(<a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>);

    <a class="code" href="classAccessNet.html#abb5ed6bbefe4c7cfc886f3b43faff1e1" title="last assigned IP address">lastIP</a> = 0;

    <a class="code" href="classAccessNet.html#ac7e78d72e60d4d64e9ee85a1ed678be1" title="Displays the current number of terminals connected to this access net.">updateDisplayString</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="acd4d82fb803a2020773fef2572c40bf4"></a><!-- doxytag: member="AccessNet::numInitStages" ref="acd4d82fb803a2020773fef2572c40bf4" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int AccessNet::numInitStages </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>OMNeT number of init stages. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>neede number of init stages </dd></dl>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00182">182</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a51360a7e54ff555dc3d078d686500cb9" title="last stage for underlay configurators">MAX_STAGE_UNDERLAY</a> + 1;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a24b138a835855095b3e4482e40c546bc"></a><!-- doxytag: member="AccessNet::removeOverlayNode" ref="a24b138a835855095b3e4482e40c546bc" args="(int ID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cModule * AccessNet::removeOverlayNode </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ID</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes a node from the access net. </p>

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00354">354</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>

<p>Referenced by <a class="el" href="InetUnderlayConfigurator_8cc_source.html#l00283">InetUnderlayConfigurator::handleTimerEvent()</a>, and <a class="el" href="InetUnderlayConfigurator_8cc_source.html#l00225">InetUnderlayConfigurator::migrateNode()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method(<span class="stringliteral">&quot;removeOverlayNode()&quot;</span>);

    cModule* node = NULL;
    <a class="code" href="classTerminalInfo.html" title="Information about a terminal.">TerminalInfo</a> terminal;
    <span class="keywordtype">int</span> index;

    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.size(); i++) {
        <span class="keywordflow">if</span>(<a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>[i].module-&gt;getId() == ID) {
            terminal = <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>[i];
            node = terminal.<a class="code" href="classNodeInfo.html#a656c57d0798151f122b886b9cee0878f" title="pointer to node getModule(not this module)">module</a>;
            index = i;
        }
    }

    <span class="keywordflow">if</span>(node == NULL) <span class="keywordflow">return</span> NULL;

    cModule* ppp = terminal.<a class="code" href="classTerminalInfo.html#adbc8cc0fe3f0c085e877bd21baf803d0" title="pointer to remote PPP module">remotePPPInterface</a>;

    <span class="comment">// disconnect terminal</span>
    node-&gt;gate(<span class="stringliteral">&quot;pppg$o&quot;</span>, 0)-&gt;disconnect();
    node-&gt;gate(<span class="stringliteral">&quot;pppg$i&quot;</span>, 0)-&gt;getPreviousGate()-&gt;disconnect();

    <span class="comment">// disconnect ip and arp modules</span>
    ppp-&gt;gate(<span class="stringliteral">&quot;netwIn&quot;</span>)-&gt;getPathStartGate()-&gt;disconnect();
    ppp-&gt;gate(<span class="stringliteral">&quot;netwOut&quot;</span>)-&gt;getNextGate()-&gt;disconnect();

    <span class="comment">// remove associated ppp interface module</span>
    ppp-&gt;callFinish();
    ppp-&gt;deleteModule();

    <span class="comment">// remove associated interface table entry</span>
    <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a4dc393bd94676a4c4bbdb9c29e9ab444" title="pointer to interface table of this node">interfaceTable</a>-&gt;deleteInterface(terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>);

    <span class="comment">// remove routing entries //TODO: IPv6</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e" title="IPv6 address usage.">useIPv6</a>) {
        terminal.<a class="code" href="classNodeInfo.html#a8ccd50235c18b483e14ad7e3b2358cf4" title="pointer to routing table of this node">routingTable</a>-&gt;deleteRoute(terminal.<a class="code" href="classTerminalInfo.html#a3b86b8bb778914b05fec401b5fcb79f1" title="pointer to routing entry">routingEntry</a>);
        <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#a8ccd50235c18b483e14ad7e3b2358cf4" title="pointer to routing table of this node">routingTable</a>-&gt;deleteRoute(terminal.<a class="code" href="classTerminalInfo.html#a121e0d4da175dc4c0494ae34fe684130" title="pointer to remote routing table">remoteRoutingEntry</a>);
    } <span class="keywordflow">else</span> {
<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; terminal.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;getNumRoutes(); i++) {
            IPv6Route* route = terminal.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;getRoute(i);
            <span class="keywordflow">if</span> (route-&gt;getDestPrefix() == terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;
                    ipv6Data()-&gt;getLinkLocalAddress()) {
                terminal.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;purgeDestCacheEntriesToNeighbour(terminal.<a class="code" href="classTerminalInfo.html#acb031535d53f763288849a88ab4d1c43" title="pointer to remote interface entry">remoteInterfaceEntry</a>-&gt;ipv6Data()-&gt;getLinkLocalAddress(), route-&gt;getInterfaceId());
                terminal.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;removeRoute(route);
            }
        }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;getNumRoutes(); i++) {
            IPv6Route* route = <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;getRoute(i);
            <span class="keywordflow">if</span> (route-&gt;getDestPrefix() == terminal.<a class="code" href="classNodeInfo.html#afce95dc66ed824aa9907258cdc61bf7e" title="the IP Address">IPAddress</a>.get6()) {
                <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;purgeDestCacheEntriesToNeighbour(terminal.<a class="code" href="classTerminalInfo.html#a6b3525e21c90955280e2ecad4c160302" title="pointer to interface entry">interfaceEntry</a>-&gt;ipv6Data()-&gt;getLinkLocalAddress(), route-&gt;getInterfaceId());
                <a class="code" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef" title="this access router">router</a>.<a class="code" href="classNodeInfo.html#ae52fa675b9f7429ad9092c408359b818">routingTable6</a>-&gt;removeRoute(route);
                <span class="keywordflow">break</span>;
            }
        }
    }

    <span class="comment">// statistics</span>
    <a class="code" href="classAccessNet.html#a614e8b71ca1f07080f63ee94d4b4eacb" title="vector of node lifetimes">lifetimeVector</a>.record(simTime() - <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>[index].createdAt);

    <span class="comment">// remove terminal from overlay terminal vector</span>
    <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.erase(<a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.begin() + index);

    <a class="code" href="classAccessNet.html#ac7e78d72e60d4d64e9ee85a1ed678be1" title="Displays the current number of terminals connected to this access net.">updateDisplayString</a>();

    <span class="keywordflow">return</span> node;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4e5463be0cb8610d9ffca450ddbf9029"></a><!-- doxytag: member="AccessNet::selectChannel" ref="a4e5463be0cb8610d9ffca450ddbf9029" args="(const std::string &amp;typeRx, const std::string &amp;typeTx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AccessNet::selectChannel </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>typeRx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>typeTx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>set access types </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">typeRx</td><td>access receive type </td></tr>
    <tr><td class="paramname">typeTx</td><td>access transmit type </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00164">164</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="classAccessNet.html#ac41b200a8e79b8f628c20c59e480bd5b" title="the current active channel type (rx)">channelTypeRxStr</a> = typeRx;
        <a class="code" href="classAccessNet.html#a66599a3b2feac15cac9394f1223f64e6" title="the current active channel type (tx)">channelTypeTxStr</a> = typeTx;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ae58b8e6d1f7031637a359255b977d224"></a><!-- doxytag: member="AccessNet::size" ref="ae58b8e6d1f7031637a359255b977d224" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int AccessNet::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns number of nodes at this access router. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of nodes </dd></dl>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00115">115</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.size();
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ac7e78d72e60d4d64e9ee85a1ed678be1"></a><!-- doxytag: member="AccessNet::updateDisplayString" ref="ac7e78d72e60d4d64e9ee85a1ed678be1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AccessNet::updateDisplayString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Displays the current number of terminals connected to this access net. </p>

<p>Definition at line <a class="el" href="AccessNet_8cc_source.html#l00439">439</a> of file <a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00088">addOverlayNode()</a>, <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>, and <a class="el" href="AccessNet_8cc_source.html#l00354">removeOverlayNode()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ev.isGUI()) {
        <span class="keywordtype">char</span> buf[80];
        <span class="keywordflow">if</span> ( <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.size() == 1 ) {
            sprintf(buf, <span class="stringliteral">&quot;1 terminal connected&quot;</span>);
        } <span class="keywordflow">else</span> {
            sprintf(buf, <span class="stringliteral">&quot;%zi terminals connected&quot;</span>, <a class="code" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46" title="the terminals at this access router">overlayTerminal</a>.size());
        }
        getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>, 0, buf);
        getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>, 2, <span class="stringliteral">&quot;blue&quot;</span>);
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ac41b200a8e79b8f628c20c59e480bd5b"></a><!-- doxytag: member="AccessNet::channelTypeRxStr" ref="ac41b200a8e79b8f628c20c59e480bd5b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classAccessNet.html#ac41b200a8e79b8f628c20c59e480bd5b">AccessNet::channelTypeRxStr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the current active channel type (rx) </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00208">208</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00088">addOverlayNode()</a>, and <a class="el" href="AccessNet_8h_source.html#l00164">selectChannel()</a>.</p>

</div>
</div>
<a class="anchor" id="afba3ef86ffdc7ec8af644a76558a7aed"></a><!-- doxytag: member="AccessNet::channelTypesRx" ref="afba3ef86ffdc7ec8af644a76558a7aed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; <a class="el" href="classAccessNet.html#afba3ef86ffdc7ec8af644a76558a7aed">AccessNet::channelTypesRx</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>vector of possible access channels (rx) </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00207">207</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a79d1026a8d36994617345002d2509a1e"></a><!-- doxytag: member="AccessNet::channelTypesTx" ref="a79d1026a8d36994617345002d2509a1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; <a class="el" href="classAccessNet.html#a79d1026a8d36994617345002d2509a1e">AccessNet::channelTypesTx</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>vector of possible access channels (tx) </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00209">209</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a66599a3b2feac15cac9394f1223f64e6"></a><!-- doxytag: member="AccessNet::channelTypeTxStr" ref="a66599a3b2feac15cac9394f1223f64e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classAccessNet.html#a66599a3b2feac15cac9394f1223f64e6">AccessNet::channelTypeTxStr</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the current active channel type (tx) </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00210">210</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00088">addOverlayNode()</a>, and <a class="el" href="AccessNet_8h_source.html#l00164">selectChannel()</a>.</p>

</div>
</div>
<a class="anchor" id="abb5ed6bbefe4c7cfc886f3b43faff1e1"></a><!-- doxytag: member="AccessNet::lastIP" ref="abb5ed6bbefe4c7cfc886f3b43faff1e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classAccessNet.html#abb5ed6bbefe4c7cfc886f3b43faff1e1">AccessNet::lastIP</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>last assigned IP address </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00204">204</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00088">addOverlayNode()</a>, and <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a614e8b71ca1f07080f63ee94d4b4eacb"></a><!-- doxytag: member="AccessNet::lifetimeVector" ref="a614e8b71ca1f07080f63ee94d4b4eacb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cOutVector <a class="el" href="classAccessNet.html#a614e8b71ca1f07080f63ee94d4b4eacb">AccessNet::lifetimeVector</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>vector of node lifetimes </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00213">213</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>, and <a class="el" href="AccessNet_8cc_source.html#l00354">removeOverlayNode()</a>.</p>

</div>
</div>
<a class="anchor" id="ad68c733a73390c69d1d4c3d3d0c91c46"></a><!-- doxytag: member="AccessNet::overlayTerminal" ref="ad68c733a73390c69d1d4c3d3d0c91c46" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classTerminalInfo.html">TerminalInfo</a>&gt; <a class="el" href="classAccessNet.html#ad68c733a73390c69d1d4c3d3d0c91c46">AccessNet::overlayTerminal</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the terminals at this access router </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00173">173</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00088">addOverlayNode()</a>, <a class="el" href="AccessNet_8cc_source.html#l00426">getOverlayNode()</a>, <a class="el" href="AccessNet_8cc_source.html#l00347">getRandomNodeId()</a>, <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>, <a class="el" href="AccessNet_8cc_source.html#l00354">removeOverlayNode()</a>, <a class="el" href="AccessNet_8h_source.html#l00115">size()</a>, and <a class="el" href="AccessNet_8cc_source.html#l00439">updateDisplayString()</a>.</p>

</div>
</div>
<a class="anchor" id="a27940294cf0c5f250b35ff64e19ec357"></a><!-- doxytag: member="AccessNet::returnedIPs" ref="a27940294cf0c5f250b35ff64e19ec357" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;IPvXAddress&gt; <a class="el" href="classAccessNet.html#a27940294cf0c5f250b35ff64e19ec357">AccessNet::returnedIPs</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>list of IP addresses wich are no longer in use </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00174">174</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7ccb579bbc8d9a942b35c96658a036ef"></a><!-- doxytag: member="AccessNet::router" ref="a7ccb579bbc8d9a942b35c96658a036ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNodeInfo.html">NodeInfo</a> <a class="el" href="classAccessNet.html#a7ccb579bbc8d9a942b35c96658a036ef">AccessNet::router</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>this access router </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00172">172</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00088">addOverlayNode()</a>, <a class="el" href="AccessNet_8h_source.html#l00125">getAccessNode()</a>, <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>, and <a class="el" href="AccessNet_8cc_source.html#l00354">removeOverlayNode()</a>.</p>

</div>
</div>
<a class="anchor" id="ad010d8c5262a7b585d3f49e10ff59a8e"></a><!-- doxytag: member="AccessNet::useIPv6" ref="ad010d8c5262a7b585d3f49e10ff59a8e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classAccessNet.html#ad010d8c5262a7b585d3f49e10ff59a8e">AccessNet::useIPv6</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>IPv6 address usage. </p>

<p>Definition at line <a class="el" href="AccessNet_8h_source.html#l00205">205</a> of file <a class="el" href="AccessNet_8h_source.html">AccessNet.h</a>.</p>

<p>Referenced by <a class="el" href="AccessNet_8cc_source.html#l00088">addOverlayNode()</a>, <a class="el" href="AccessNet_8cc_source.html#l00046">initialize()</a>, and <a class="el" href="AccessNet_8cc_source.html#l00354">removeOverlayNode()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="AccessNet_8h_source.html">AccessNet.h</a></li>
<li><a class="el" href="AccessNet_8cc_source.html">AccessNet.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classAccessNet.html">AccessNet</a>      </li>

    <li class="footer">Generated on Thu Mar 6 2014 14:06:36 for OverSim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>

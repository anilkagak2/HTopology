<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: Vast Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OverSim
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classVast.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">Vast Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Vast" --><!-- doxytag: inherits="BaseOverlay" -->
<p>Voronoi class.  
 <a href="classVast.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Vast_8h_source.html">Vast.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Vast:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classVast.png" usemap="#Vast_map" alt=""/>
  <map id="Vast_map" name="Vast_map">
<area href="classBaseOverlay.html" title="Base class for overlays." alt="BaseOverlay" shape="rect" coords="115,112,220,136"/>
<area href="classBaseRpc.html" title="Base class for RPCs." alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classTopologyVis.html" alt="TopologyVis" shape="rect" coords="230,56,335,80"/>
<area href="classRpcListener.html" title="A Remote-Procedure-Call listener class." alt="RpcListener" shape="rect" coords="0,0,105,24"/>
</map>
 </div></div>

<p><a href="classVast-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aba314a4b9ab92fe4b19126fae47a0501">~Vast</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a9146368d63151277c8442a17afe8d1d6">initializeOverlay</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes derived-class-attributes.  <a href="#a9146368d63151277c8442a17afe8d1d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a5ebb4aad5fd0a309cae1d09762b6c270">finishOverlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">collects statistical data in derived class  <a href="#a5ebb4aad5fd0a309cae1d09762b6c270"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a5a12a3e1f34fbad6a2f6bb3231fce048">handleUDPMessage</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes messages from underlay.  <a href="#a5a12a3e1f34fbad6a2f6bb3231fce048"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a8b0fcea2fc373e49bb5b496fe8049f10">handleTimerEvent</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a9bfca7e546baa11222621b528659efa7">handleAppMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes "timer" self-messages.  <a href="#a9bfca7e546baa11222621b528659efa7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#abe5f7fe27677c21cb0421ace877ff368">handleNodeLeaveNotification</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method gets call **.gracefulLeaveDelay seconds before it is killed.  <a href="#abe5f7fe27677c21cb0421ace877ff368"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a927d7255a4ffb6ab2ef1f46c5cba8fb4">handleNodeGracefulLeaveNotification</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method gets call **.gracefulLeaveDelay seconds before it is killed if this node is among the gracefulLeaveProbability nodes.  <a href="#a927d7255a4ffb6ab2ef1f46c5cba8fb4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ac3b579a608533fc6f2cf91e0fd79842a">getAOI</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVector2D.html">Vector2D</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aa285352a2262c1a67208cd98659616a3">getPosition</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNodeHandle.html">NodeHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a48cf3c577c61f00217c6e3e62a90fc9a">getHandle</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a4861053794596d6f2b7c5c24e44fc345">getAreaDimension</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="VastDefs_8h.html#ad41236870dd150736adba869c442c2c5">SiteMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSite.html">Site</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a> (<a class="el" href="classVector2D.html">Vector2D</a> p, <a class="el" href="classNodeHandle.html">NodeHandle</a> node, int NeighborCount=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a35d59294c560dd21f9ac30729eddfdb2">addNodeToStock</a> (<a class="el" href="classNodeHandle.html">NodeHandle</a> node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a3e7c0afd3098cc61ede525a6a59fb71f">removeNode</a> (<a class="el" href="classNodeHandle.html">NodeHandle</a> node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aac593b11c556c63cbdb49984bc6e9b34">buildVoronoi</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a191518eda5a0f2d8639521c9102d43b1">buildVoronoi</a> (<a class="el" href="classVector2D.html">Vector2D</a> old_pos, <a class="el" href="classVector2D.html">Vector2D</a> new_pos, <a class="el" href="classNodeHandle.html">NodeHandle</a> enclosingCheck=<a class="el" href="classNodeHandle.html#a79bf2c5e29c969cbd0b2581cb188d8a6">NodeHandle::UNSPECIFIED_NODE</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ac0eb8a31568b3fbec02f6251e7d05e46">removeNeighbors</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a> (<a class="el" href="classVastMessage.html">VastMessage</a> *vastMsg, <a class="el" href="classNodeHandle.html">NodeHandle</a> destAddr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a1bfee43b8a5cde362b7ff137f3597c78">setBootstrapedIcon</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a9f49980680ed52219a6ef0a1bcff412b">changeState</a> (int <a class="el" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aa54887a2c280267a9a401e50c240f6d5">processJoinTimer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#af30893315b517cde6403ebf5a0aca8af">processPingTimer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a0eadb10fa255a3a2b89b1296d87be07d">processSecTimer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a1297368d6e59e3d9528b082f5ec043f4">processCheckCriticalTimer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a3e41736afd958b63b754c0bcc425cbfe">processDiscoveryTimer</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a25469658017340ae776e74d966ba5f54">handleJoin</a> (<a class="el" href="classGameAPIPositionMessage.html">GameAPIPositionMessage</a> *sgcMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a092f27883a3661a5b1ffe905e68df738">handleMove</a> (<a class="el" href="classGameAPIPositionMessage.html">GameAPIPositionMessage</a> *sgcMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a645e007e0427c40f13eadf6f914f9881">handleEvent</a> (<a class="el" href="classGameAPIMessage.html">GameAPIMessage</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a3b1ec50a85c2e2e6c7c3e081acd1dcd2">handleJoinRequest</a> (<a class="el" href="classVastMessage.html">VastMessage</a> *vastMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ae3f2d9c26130a6986478513bc281e080">handleJoinAcknowledge</a> (<a class="el" href="classVastListMessage.html">VastListMessage</a> *vastListMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a9a1ea2b26ce93b38b226fd0eeb494998">handleNodeMove</a> (<a class="el" href="classVastMoveMessage.html">VastMoveMessage</a> *vastMoveMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a50d7f96259000a44b65ee3951cb75ef5">handleNewNeighbors</a> (<a class="el" href="classVastListMessage.html">VastListMessage</a> *vastListMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aa5b06ce84e80dfe3f274327a8cebf3d9">handleNodeLeave</a> (<a class="el" href="classVastListMessage.html">VastListMessage</a> *vastListMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#adde7e0c8aab03277a63461d134fc6daa">handleEnclosingNeighborsRequest</a> (<a class="el" href="classVastMessage.html">VastMessage</a> *vastMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a7183562b322a046e2f23f8f8f668fdca">handleBackupNeighbors</a> (<a class="el" href="classVastListMessage.html">VastListMessage</a> *vastListMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a1361682de85c7ecc63476b0a9db712f0">handlePing</a> (<a class="el" href="classVastMessage.html">VastMessage</a> *vastMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a183cca07bd6ddceb33eebfba75bf1b80">handlePong</a> (<a class="el" href="classVastMessage.html">VastMessage</a> *vastMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ac8599f81539fdaee6cd4cfd5cca2b8f4">handleDiscardNode</a> (<a class="el" href="classVastDiscardMessage.html">VastDiscardMessage</a> *vastMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a23e724cfc93976442b57ed98c60b585d">sendDiscardNode</a> (<a class="el" href="classVastMessage.html">VastMessage</a> *vastMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#afe368cd0468509b32f40acfc196a1856">synchronizeApp</a> (<a class="el" href="classVastMoveMessage.html">VastMoveMessage</a> *vastMoveMsg=NULL)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a4720ff97b3ca3a6f53b9533f57a4fb56">AOI_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#afdc6b6327442ee54b2a92c930966aae6">areaDimension</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="VastDefs_8h.html#aba713d0046c49fb23c12ac880a9eb8e8">PositionSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="VastDefs_8h.html#aad88cf774ac0f22b8d7d61dc28589662">StockList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a8cae35144fc3d3615ca900f4a5d016f5">joinRequestBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#af1b66db4acda86bc53121f530ad3305f">joinAcknowledgeBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ae7e6d853f952734f8e1c41d5c3f82dd3">nodeMoveBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a0bb1c36ab41d09526a7b54433b2a1f54">newNeighborsBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aec8877ef5725ece7aa4f1e7dc6ec47c6">nodeLeaveBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a42fa22094150446e8b0d2e2e2c58ef02">enclosingNeighborsRequestBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#afea7ca8faed771a898b0daa3cffafeeb">pingBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#af8a09f477664314710211ec69de5944f">pongBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a53543eccb1be540b3d7875cf0cdd0b52">discardNodeBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a44a0e59077adea2a2c3d09a39ce6597e">backupBytesSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aea94419d8d7589930d1b2e1b4de0468d">maxBytesPerSecondSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a90f9ed7d27fee143970e838e2a7bea15">averageBytesPerSecondSent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a120c3c82cafcab0a237fe080e71a4862">secTimerCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a9a5f4a33b22c8d78fef399b1041cb333">debugVoronoiOutput</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a2218f4c5c055326aeb59640acaf3b91c">joinTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ad79f8a786033cb62653286f8cc5015e5">pingTimeout</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a9b5faa39bdba0cbc3da3a588173e3c1f">discoveryIntervall</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a7cf9fae4a48173e8e28a117f568027fb">checkCriticalIntervall</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#ab68ac286673ed0ae4e2e05215481d667">criticalThreshold</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a4d00a0a50dd92e3d223b4f4599bc82c3">stockListSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classGeometry.html">Geometry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classEdgeList.html">EdgeList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classHeapPQ.html">HeapPQ</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">join_timer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a34548c8fe764d86196e99f3bd8d5b793">ping_timer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a12f4439d33e9d3f8928c5cc81f36a141">discovery_timer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#a6da2c953a461445f77d16764f3545e6e">checkcritical_timer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVast.html#aff47bd08fb10c41ec16862934b098a4b">sec_timer</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Voronoi class. </p>
<p>An overlay network based on voronoi diagrams. </p>

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00041">41</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aba314a4b9ab92fe4b19126fae47a0501"></a><!-- doxytag: member="Vast::~Vast" ref="aba314a4b9ab92fe4b19126fae47a0501" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Vast::~Vast </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01205">1205</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size()) {
        <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
            <span class="keyword">delete</span> itSites-&gt;second;
        }
        <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.clear();
        <a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.clear();
    }
    <span class="comment">// destroy self timer messages</span>
    cancelAndDelete(<a class="code" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">join_timer</a>);
    cancelAndDelete(<a class="code" href="classVast.html#a34548c8fe764d86196e99f3bd8d5b793">ping_timer</a>);
    cancelAndDelete(<a class="code" href="classVast.html#aff47bd08fb10c41ec16862934b098a4b">sec_timer</a>);
    cancelAndDelete(<a class="code" href="classVast.html#a12f4439d33e9d3f8928c5cc81f36a141">discovery_timer</a>);
    cancelAndDelete(<a class="code" href="classVast.html#a6da2c953a461445f77d16764f3545e6e">checkcritical_timer</a>);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a27eff8db1664e9cd1e081c6dd3a64f42"></a><!-- doxytag: member="Vast::addNode" ref="a27eff8db1664e9cd1e081c6dd3a64f42" args="(Vector2D p, NodeHandle node, int NeighborCount=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::addNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVector2D.html">Vector2D</a>&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>NeighborCount</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00314">314</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00834">handleJoinAcknowledge()</a>, <a class="el" href="Vast_8cc_source.html#l00783">handleJoinRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00914">handleNewNeighbors()</a>, <a class="el" href="Vast_8cc_source.html#l00933">handleNodeLeave()</a>, <a class="el" href="Vast_8cc_source.html#l00859">handleNodeMove()</a>, and <a class="el" href="Vast_8cc_source.html#l00993">handlePong()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(node != <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>) {
        <span class="keywordflow">if</span>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(node) == <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end()) {
            <a class="code" href="classSite.html">Site</a>* temp_site = <span class="keyword">new</span> <a class="code" href="classSite.html">Site</a>();
            temp_site-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a> = p;
            temp_site-&gt;<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a> = node;
            temp_site-&gt;<a class="code" href="classSite.html#ad049b81de6bddc5f2b5c198ca391dff6">neighborCount</a> = NeighborCount;

            <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.insert(std::make_pair(temp_site-&gt;<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>, temp_site));
            <a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.insert(temp_site-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>);
        }
        <span class="keywordflow">else</span> {
            SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(node);
            <a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.erase(itSites-&gt;second-&gt;coord);
            itSites-&gt;second-&gt;coord = p;
            <a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.insert(itSites-&gt;second-&gt;coord);
            <span class="keywordflow">if</span>(NeighborCount != 0) {
                itSites-&gt;second-&gt;neighborCount = NeighborCount;
            }
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a35d59294c560dd21f9ac30729eddfdb2"></a><!-- doxytag: member="Vast::addNodeToStock" ref="a35d59294c560dd21f9ac30729eddfdb2" args="(NodeHandle node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::addNodeToStock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00338">338</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00975">handleBackupNeighbors()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(node != <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>) {
        <span class="keywordflow">for</span>(StockList::iterator itTemp = <a class="code" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a>.begin(); itTemp != <a class="code" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a>.end(); ++itTemp) {
            <span class="keywordflow">if</span>(*itTemp == node) {
                <span class="keywordflow">return</span>;
            }
        }
        <a class="code" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a>.push_front(node);
        <span class="keywordflow">if</span>(<a class="code" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a>.size() &gt; <a class="code" href="classVast.html#a4d00a0a50dd92e3d223b4f4599bc82c3">stockListSize</a>) {
            <a class="code" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a>.pop_back();
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aac593b11c556c63cbdb49984bc6e9b34"></a><!-- doxytag: member="Vast::buildVoronoi" ref="aac593b11c556c63cbdb49984bc6e9b34" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::buildVoronoi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00545">545</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00834">handleJoinAcknowledge()</a>, <a class="el" href="Vast_8cc_source.html#l00783">handleJoinRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>, and <a class="el" href="Vast_8cc_source.html#l00859">handleNodeMove()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classVast.html#aac593b11c556c63cbdb49984bc6e9b34">buildVoronoi</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>, <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a191518eda5a0f2d8639521c9102d43b1"></a><!-- doxytag: member="Vast::buildVoronoi" ref="a191518eda5a0f2d8639521c9102d43b1" args="(Vector2D old_pos, Vector2D new_pos, NodeHandle enclosingCheck=NodeHandle::UNSPECIFIED_NODE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::buildVoronoi </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVector2D.html">Vector2D</a>&#160;</td>
          <td class="paramname"><em>old_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVector2D.html">Vector2D</a>&#160;</td>
          <td class="paramname"><em>new_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&#160;</td>
          <td class="paramname"><em>enclosingCheck</em> = <code><a class="el" href="classNodeHandle.html#a79bf2c5e29c969cbd0b2581cb188d8a6">NodeHandle::UNSPECIFIED_NODE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00363">363</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> sqrt_nsites = 1;
    <span class="keywordtype">double</span> xmin, xmax, ymin, ymax;
    <span class="keywordtype">double</span> deltax, deltay;

    <span class="comment">// check wether there are any neighbors</span>
    <span class="keywordflow">if</span>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size() == 0) <span class="keywordflow">return</span>;

    xmin = xmax = <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a>;
    ymin = ymax = <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a>;

    std::map&lt;Vector2D, Site*&gt; sortedSites;
    sortedSites.insert(std::make_pair(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>, &amp;<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>));

    <span class="keywordflow">for</span>(SiteMap::iterator itTemp = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itTemp != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itTemp) {
        <span class="comment">// determine min/max site coordinates</span>
        <span class="keywordflow">if</span>(itTemp-&gt;second-&gt;coord.x &lt; xmin) xmin = itTemp-&gt;second-&gt;coord.x;
        <span class="keywordflow">if</span>(itTemp-&gt;second-&gt;coord.x &gt; xmax) xmax = itTemp-&gt;second-&gt;coord.x;
        <span class="keywordflow">if</span>(itTemp-&gt;second-&gt;coord.y &lt; ymin) ymin = itTemp-&gt;second-&gt;coord.y;
        <span class="keywordflow">if</span>(itTemp-&gt;second-&gt;coord.y &gt; ymax) ymax = itTemp-&gt;second-&gt;coord.y;
        <span class="comment">// reset all sites to UNDEF</span>
        itTemp-&gt;second-&gt;type = <a class="code" href="VastDefs_8h.html#abde25a67f4046530ae1c572cefeb5869">UNDEF</a>;
        <span class="comment">// reset enclosing neighbors set</span>
        itTemp-&gt;second-&gt;enclosingSet.clear();
        <span class="comment">// fill sorted List</span>
        sortedSites.insert(std::make_pair(itTemp-&gt;second-&gt;coord, itTemp-&gt;second));
        sqrt_nsites++;
    }

    <span class="comment">// needed to determine appropriate hashtable size</span>
    deltax = xmax - xmin;
    deltay = ymax - ymin;
    sqrt_nsites = (int)sqrt((<span class="keywordtype">double</span>)(sqrt_nsites+4));

    <span class="comment">// start to calculate the voronoi</span>
    <a class="code" href="classSite.html">Site</a> *newsite, *bot, *top, *temp, *p, *v, *bottomsite;
    <a class="code" href="classVector2D.html">Vector2D</a> newintstar;
    <span class="keywordtype">int</span> pm;
    <a class="code" href="classHalfedge.html">Halfedge</a> *lbnd, *rbnd, *llbnd, *rrbnd, *bisector;
    <a class="code" href="classEdge.html">Edge</a> *e;

    newintstar.<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a> = newintstar.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> = 0.0;

    std::map&lt;Vector2D, Site*&gt;::iterator itSortedSites = sortedSites.begin();

    <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#ac5eed947206dc7997ae6d90b65f33aeb">initialize</a>(deltax, deltay, <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>, old_pos, new_pos, <a class="code" href="classVast.html#a4720ff97b3ca3a6f53b9533f57a4fb56">AOI_size</a>);
    <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a9ec3f6bf08226399f077bc3e7af1e28e">PQinitialize</a>(sqrt_nsites, ymin, deltay);
    bottomsite = itSortedSites-&gt;second;
    ++itSortedSites;
    <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a4c5ec2361b648020d14b262d53f31415" title="Initializes the list before building the diagram.">initialize</a>(sqrt_nsites, xmin, deltax, bottomsite);

    newsite = itSortedSites-&gt;second;
    ++itSortedSites;
    <span class="keywordflow">while</span>(<span class="keyword">true</span>) {
        <span class="keywordflow">if</span>(!<a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a56f8454b1a800e74372df26289dc55f4">PQempty</a>()) newintstar = <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a32192681af8227de61ef123ab54e93cb">PQ_min</a>();

        <span class="keywordflow">if</span>(newsite != NULL &amp;&amp; (<a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a56f8454b1a800e74372df26289dc55f4">PQempty</a>() ||
           newsite-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> &lt; newintstar.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> ||
           (newsite-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> == newintstar.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> &amp;&amp; newsite-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a> &lt; newintstar.<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a>))) {
            lbnd = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a95f79b33a2be55987e3803560b6bcbe4" title="Get an entry from the list by point.">ELleftbnd</a>(&amp;(newsite-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>));
            rbnd = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a15477c20a6aa35a11a7adf1d66e2ce56" title="Get right neighbor of an edge.">ELright</a>(lbnd);
            bot = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#af6f9a1ad8f024c77a18327e88e848b2a" title="Get site right of an edge.">rightreg</a>(lbnd);
            e = <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a28161e9d30083f92b98751b413f5afef">bisect</a>(bot, newsite);
            bisector = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#aec23b6e42d883591e9a661566fdbfda5" title="Creates a halfedge from a given edge.">HEcreate</a>(e, <a class="code" href="VastDefs_8h.html#a3548ca9d636286bea86afc96a7a947d9">le</a>);
            <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a0634267aac794c64b40a70c93d2b2e92" title="Inserts a new halfedge to the list.">ELinsert</a>(lbnd, bisector);
            <span class="keywordflow">if</span> ((p = <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a50867d578fef5c4f88b643a1b9fd8a3f">intersect</a>(lbnd, bisector)) != NULL) {
                <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a361bdd8dffc528d6860d177b107cb3a0">PQdelete</a>(lbnd);
                <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a09b36d86656e377d262b1098bd03e17d">PQinsert</a>(lbnd, p, <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a90cb3b24a70e2183ca3e8b2051cad6af">dist</a>(p, newsite));
            }
            lbnd = bisector;
            bisector = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#aec23b6e42d883591e9a661566fdbfda5" title="Creates a halfedge from a given edge.">HEcreate</a>(e, <a class="code" href="VastDefs_8h.html#a51f63d24f02be00251e895721eae51b0">re</a>);
            <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a0634267aac794c64b40a70c93d2b2e92" title="Inserts a new halfedge to the list.">ELinsert</a>(lbnd, bisector);
            <span class="keywordflow">if</span> ((p = <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a50867d578fef5c4f88b643a1b9fd8a3f">intersect</a>(bisector, rbnd)) != NULL) <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a09b36d86656e377d262b1098bd03e17d">PQinsert</a>(bisector, p, <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a90cb3b24a70e2183ca3e8b2051cad6af">dist</a>(p, newsite));
            <span class="keywordflow">if</span>(itSortedSites != sortedSites.end()) {
                newsite = itSortedSites-&gt;second;
                ++itSortedSites;
            }
            <span class="keywordflow">else</span> newsite = NULL;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a56f8454b1a800e74372df26289dc55f4">PQempty</a>()) {
            lbnd = <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#ab2490259136b824faf5704885637cd24">PQextractmin</a>();
            llbnd = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a70afa1e1c28ac28245dde25b2efac6ee" title="Get left neighbor of an edge.">ELleft</a>(lbnd);
            rbnd = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a15477c20a6aa35a11a7adf1d66e2ce56" title="Get right neighbor of an edge.">ELright</a>(lbnd);
            rrbnd = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a15477c20a6aa35a11a7adf1d66e2ce56" title="Get right neighbor of an edge.">ELright</a>(rbnd);
            bot = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a153e9bac9b57716ff96206a19cf18543" title="Get site left of an edge.">leftreg</a>(lbnd);
            top = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#af6f9a1ad8f024c77a18327e88e848b2a" title="Get site right of an edge.">rightreg</a>(rbnd);
            v = lbnd-&gt;<a class="code" href="classHalfedge.html#a6ff7818fbec8e1adad2e970a5960aa6b">vertex</a>;
            <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#afa58eef6fdb8bc89290ba5a7f873d8a1">endpoint</a>(lbnd-&gt;<a class="code" href="classHalfedge.html#a0e7edfac3055d2a9faf8d8e9fa74c3d8">ELedge</a>, lbnd-&gt;<a class="code" href="classHalfedge.html#a36e688c7989974e7af28c3861e60085d">ELpm</a>, v);
            <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#afa58eef6fdb8bc89290ba5a7f873d8a1">endpoint</a>(rbnd-&gt;<a class="code" href="classHalfedge.html#a0e7edfac3055d2a9faf8d8e9fa74c3d8">ELedge</a>, rbnd-&gt;<a class="code" href="classHalfedge.html#a36e688c7989974e7af28c3861e60085d">ELpm</a>, v);
            <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#ad912ba344238f0c9e0f9c6f7a2fbc26b" title="Delete an entry from the list.">ELdelete</a>(lbnd);
            <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a361bdd8dffc528d6860d177b107cb3a0">PQdelete</a>(rbnd);
            <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#ad912ba344238f0c9e0f9c6f7a2fbc26b" title="Delete an entry from the list.">ELdelete</a>(rbnd);
            pm = <a class="code" href="VastDefs_8h.html#a3548ca9d636286bea86afc96a7a947d9">le</a>;
            <span class="keywordflow">if</span> (bot-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> &gt; top-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a>) {
                temp = bot;
                bot = top;
                top = temp;
                pm = <a class="code" href="VastDefs_8h.html#a51f63d24f02be00251e895721eae51b0">re</a>;
            }
            e = <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a28161e9d30083f92b98751b413f5afef">bisect</a>(bot, top);
            bisector = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#aec23b6e42d883591e9a661566fdbfda5" title="Creates a halfedge from a given edge.">HEcreate</a>(e, pm);
            <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a0634267aac794c64b40a70c93d2b2e92" title="Inserts a new halfedge to the list.">ELinsert</a>(llbnd, bisector);
            <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#afa58eef6fdb8bc89290ba5a7f873d8a1">endpoint</a>(e, <a class="code" href="VastDefs_8h.html#a51f63d24f02be00251e895721eae51b0">re</a>-pm, v);
            <span class="keywordflow">if</span>((p = <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a50867d578fef5c4f88b643a1b9fd8a3f">intersect</a>(llbnd, bisector)) != NULL) {
                <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a361bdd8dffc528d6860d177b107cb3a0">PQdelete</a>(llbnd);
                <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a09b36d86656e377d262b1098bd03e17d">PQinsert</a>(llbnd, p, <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a90cb3b24a70e2183ca3e8b2051cad6af">dist</a>(p, bot));
            }
            <span class="keywordflow">if</span> ((p = <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a50867d578fef5c4f88b643a1b9fd8a3f">intersect</a>(bisector, rrbnd)) != NULL) <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a09b36d86656e377d262b1098bd03e17d">PQinsert</a>(bisector, p, <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a90cb3b24a70e2183ca3e8b2051cad6af">dist</a>(p, bot));
        }
        <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
    }

    <span class="comment">// process the generated edgelist</span>
    <span class="keywordflow">for</span>(lbnd = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a15477c20a6aa35a11a7adf1d66e2ce56" title="Get right neighbor of an edge.">ELright</a>(<a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a95dd0de214e6c8b72f1aeadcbd9d5690">ELleftend</a>); lbnd != <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a9fb7f067c7a3baa17026e8bbc95d60de">ELrightend</a>; lbnd = <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#a15477c20a6aa35a11a7adf1d66e2ce56" title="Get right neighbor of an edge.">ELright</a>(lbnd)) {
        e = lbnd -&gt; ELedge;
        <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#a927ad687454613c583aa1864989ca436">processEdge</a>(e);
    }
    <span class="comment">// process sites in order to determine our neighbors</span>
    <span class="keywordflow">for</span>(SiteMap::iterator itTemp = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itTemp != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itTemp) {
        <span class="keywordflow">if</span>(itTemp-&gt;second-&gt;innerEdge[0]) {
            <span class="keywordflow">if</span>(itTemp-&gt;second-&gt;outerEdge) {
                itTemp-&gt;second-&gt;type |= <a class="code" href="VastDefs_8h.html#a985bae7b67bcb96c5565a24a5f6d4cba">BOUNDARY</a>;
                <span class="comment">// Debug output</span>
                <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>)
                    EV &lt;&lt; <span class="stringliteral">&quot;[NeighborsList::buildVoronoi()]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Site at [&quot;</span> &lt;&lt; itTemp-&gt;second-&gt;coord.x &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>
                       &lt;&lt; itTemp-&gt;second-&gt;coord.y &lt;&lt; <span class="stringliteral">&quot;] is a boundary neighbor.&quot;</span>
                       &lt;&lt; endl;
            }
            <span class="keywordflow">else</span> {
                itTemp-&gt;second-&gt;type |= <a class="code" href="VastDefs_8h.html#ac37458b05fa7ffc23c7d126c12990a7c">NEIGHBOR</a>;
                <span class="comment">// Debug output</span>
                <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>)
                    EV &lt;&lt; <span class="stringliteral">&quot;[NeighborsList::buildVoronoi()]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Site at [&quot;</span> &lt;&lt; itTemp-&gt;second-&gt;coord.x &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>
                       &lt;&lt; itTemp-&gt;second-&gt;coord.y &lt;&lt; <span class="stringliteral">&quot;] is a neighbor.&quot;</span>
                       &lt;&lt; endl;
            }
        }
        <span class="comment">// Treat enclosing neighbors whose voronoi region is outside our AOI as boundary neighbors</span>
        <span class="keywordflow">if</span>((!itTemp-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#ac37458b05fa7ffc23c7d126c12990a7c">NEIGHBOR</a>) &amp;&amp; (itTemp-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#a2aedfe59324ff558559ff9932c649443">ENCLOSING</a>)) {
            itTemp-&gt;second-&gt;type |= <a class="code" href="VastDefs_8h.html#a985bae7b67bcb96c5565a24a5f6d4cba">BOUNDARY</a>;
            <span class="comment">// Debug output</span>
            <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>)
                EV &lt;&lt; <span class="stringliteral">&quot;[NeighborsList::buildVoronoi()]\n&quot;</span>
                &lt;&lt; <span class="stringliteral">&quot;    Site at [&quot;</span> &lt;&lt; itTemp-&gt;second-&gt;coord.x &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>
                &lt;&lt; itTemp-&gt;second-&gt;coord.y &lt;&lt; <span class="stringliteral">&quot;] is a boundary neighbor.&quot;</span>
                &lt;&lt; endl;
        }
        <span class="keywordflow">if</span>(!itTemp-&gt;second-&gt;innerEdge[1] &amp;&amp; itTemp-&gt;second-&gt;innerEdge[2]) {
            itTemp-&gt;second-&gt;type |= <a class="code" href="VastDefs_8h.html#ab6bca16ed021b1e211fde8669758f199">NEW</a>;
            <span class="comment">// Debug output</span>
            <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>)
                EV &lt;&lt; <span class="stringliteral">&quot;[NeighborsList::buildVoronoi()]\n&quot;</span>
                   &lt;&lt; <span class="stringliteral">&quot;    Site at [&quot;</span> &lt;&lt; itTemp-&gt;second-&gt;coord.x &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>
                   &lt;&lt; itTemp-&gt;second-&gt;coord.y &lt;&lt; <span class="stringliteral">&quot;] is a new neighbor for site at &quot;</span> &lt;&lt; new_pos.<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a> &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; new_pos.<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>
                   &lt;&lt; endl;
        }
        <span class="comment">// enhanced enclosing check</span>
        <span class="keywordflow">if</span>(!enclosingCheck.<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>() &amp;&amp; (<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(enclosingCheck) != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end())) {
            <a class="code" href="classSite.html">Site</a>* tempSite = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(enclosingCheck)-&gt;second;
            <span class="keywordflow">for</span>(EnclosingSet::iterator itSet = tempSite-&gt;<a class="code" href="classSite.html#a0b03f30a81bb8c872570ca60d3bde3f3">enclosingSet</a>.begin(); itSet != tempSite-&gt;<a class="code" href="classSite.html#a0b03f30a81bb8c872570ca60d3bde3f3">enclosingSet</a>.end(); ++itSet) {
                <span class="keywordflow">if</span>(tempSite-&gt;<a class="code" href="classSite.html#a5f6d5fd56ae316f506bcb02590f1a24e">oldEnclosingSet</a>.find(*itSet) == tempSite-&gt;<a class="code" href="classSite.html#a5f6d5fd56ae316f506bcb02590f1a24e">oldEnclosingSet</a>.end()
                    &amp;&amp; <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(*itSet) != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end()) {
                    <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(*itSet)-&gt;second-&gt;type |= <a class="code" href="VastDefs_8h.html#ab6bca16ed021b1e211fde8669758f199">NEW</a>;
                }
            }
            tempSite-&gt;<a class="code" href="classSite.html#a0b03f30a81bb8c872570ca60d3bde3f3">enclosingSet</a>.swap(tempSite-&gt;<a class="code" href="classSite.html#a5f6d5fd56ae316f506bcb02590f1a24e">oldEnclosingSet</a>);
        }
        <span class="comment">// reset inner- and outeredge indicator</span>
        itTemp-&gt;second-&gt;innerEdge[0] = <span class="keyword">false</span>;
        itTemp-&gt;second-&gt;innerEdge[1] = <span class="keyword">false</span>;
        itTemp-&gt;second-&gt;innerEdge[2] = <span class="keyword">false</span>;
        itTemp-&gt;second-&gt;outerEdge = <span class="keyword">false</span>;
    }
    <span class="comment">// clean up</span>
    <a class="code" href="classVast.html#afa2c209389e2a7e721c238336501971b">edgelist</a>.<a class="code" href="classEdgeList.html#aeeb737f31a13a16c51a05d55b4dc3701" title="Resets the list for further use.">reset</a>();
    <a class="code" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">heap</a>.<a class="code" href="classHeapPQ.html#a9f68f6eeefb48d1767a6516d516eb2ed">PQreset</a>();
    <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#ae9a788d2d88a35f4bd8ae18817a6c897">reset</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f49980680ed52219a6ef0a1bcff412b"></a><!-- doxytag: member="Vast::changeState" ref="a9f49980680ed52219a6ef0a1bcff412b" args="(int state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::changeState </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00106">106</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00728">handleJoin()</a>, <a class="el" href="Vast_8cc_source.html#l00834">handleJoinAcknowledge()</a>, <a class="el" href="Vast_8cc_source.html#l00586">handleNodeGracefulLeaveNotification()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">switch</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a>) {
        <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>: {
            this-&gt;<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>;
            <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#ad71420e64d6f5466ecfd95d8ab56ca55" title="Debootstraps peers in the peer set.">removePeer</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>);
            cancelEvent(<a class="code" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">join_timer</a>);
            cancelEvent(<a class="code" href="classVast.html#a34548c8fe764d86196e99f3bd8d5b793">ping_timer</a>);
            cancelEvent(<a class="code" href="classVast.html#aff47bd08fb10c41ec16862934b098a4b">sec_timer</a>);
            cancelEvent(<a class="code" href="classVast.html#a12f4439d33e9d3f8928c5cc81f36a141">discovery_timer</a>);
            cancelEvent(<a class="code" href="classVast.html#a6da2c953a461445f77d16764f3545e6e">checkcritical_timer</a>);
        } <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>: {
            this-&gt;<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>;
            scheduleAt(simTime(), <a class="code" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">join_timer</a>);
            scheduleAt(simTime() + 1.0, <a class="code" href="classVast.html#aff47bd08fb10c41ec16862934b098a4b">sec_timer</a>);
        } <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>: {
            this-&gt;<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> = <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>;
            cancelEvent(<a class="code" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">join_timer</a>);
            <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a944218e1a3f9a3fcb029079db32eee03" title="Bootstraps peers in the peer set.">registerPeer</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>);
            scheduleAt(simTime() + <a class="code" href="classVast.html#ad79f8a786033cb62653286f8cc5015e5">pingTimeout</a>, <a class="code" href="classVast.html#a34548c8fe764d86196e99f3bd8d5b793">ping_timer</a>);
            <span class="keywordflow">if</span>(<a class="code" href="classVast.html#a7cf9fae4a48173e8e28a117f568027fb">checkCriticalIntervall</a> &gt; 0.0 &amp;&amp; <a class="code" href="classVast.html#a9b5faa39bdba0cbc3da3a588173e3c1f">discoveryIntervall</a> &gt; 0.0) {
                scheduleAt(simTime() + <a class="code" href="classVast.html#a7cf9fae4a48173e8e28a117f568027fb">checkCriticalIntervall</a>, <a class="code" href="classVast.html#a6da2c953a461445f77d16764f3545e6e">checkcritical_timer</a>);
                scheduleAt(simTime() + <a class="code" href="classVast.html#a9b5faa39bdba0cbc3da3a588173e3c1f">discoveryIntervall</a>, <a class="code" href="classVast.html#a12f4439d33e9d3f8928c5cc81f36a141">discovery_timer</a>);
            }
            <span class="comment">// tell the application we are ready</span>
            <a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>* readyMsg = <span class="keyword">new</span> <a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>(<span class="stringliteral">&quot;OVERLAY_READY&quot;</span>);
            readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#a07d2b2a15889728c23ed4d80730de2cf">setReady</a>(<span class="keyword">true</span>);
            readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#a77640d7f3566804064921b2520ed51b6">setComp</a>(<a class="code" href="classBaseOverlay.html#a92e0d3f96a5716245465e05da60ef487" title="Return the component type of this module.">getThisCompType</a>());
            <a class="code" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a>(readyMsg);
            <a class="code" href="classGameAPIResizeAOIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIResizeAOIMessage</a>* gameMsg = <span class="keyword">new</span> <a class="code" href="classGameAPIResizeAOIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIResizeAOIMessage</a>(<span class="stringliteral">&quot;RESIZE_AOI&quot;</span>);
            gameMsg-&gt;<a class="code" href="classGameAPIMessage.html#a3fe3071c66623191477b903527280ddc">setCommand</a>(<a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6ba04223e5523bbf330b2553e5ba3e320d1">RESIZE_AOI</a>);
            gameMsg-&gt;<a class="code" href="classGameAPIResizeAOIMessage.html#ae8df0a2a6adc664d2dc8a5c0291f9f49">setAOIsize</a>(<a class="code" href="classVast.html#a4720ff97b3ca3a6f53b9533f57a4fb56">AOI_size</a>);
            <a class="code" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a>(gameMsg);
        } <span class="keywordflow">break</span>;
    }
    <a class="code" href="classVast.html#a1bfee43b8a5cde362b7ff137f3597c78">setBootstrapedIcon</a>();
    <span class="comment">// debug output</span>
    <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Vast::changeState() @ &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;VAST: Node &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot; entered &quot;</span>;
        <span class="keywordflow">switch</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a>) {
            <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>: ev &lt;&lt; <span class="stringliteral">&quot;INIT&quot;</span>; <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>: ev &lt;&lt; <span class="stringliteral">&quot;JOIN&quot;</span>; <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>: ev &lt;&lt; <span class="stringliteral">&quot;READY&quot;</span>; <span class="keywordflow">break</span>;
        }
        ev &lt;&lt; <span class="stringliteral">&quot; state.&quot;</span> &lt;&lt; endl;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5ebb4aad5fd0a309cae1d09762b6c270"></a><!-- doxytag: member="Vast::finishOverlay" ref="a5ebb4aad5fd0a309cae1d09762b6c270" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::finishOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collects statistical data in derived class </p>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a8db85b9c706d04007154761d5a0cec16">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01157">1157</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBaseOverlay.html#a933e505ea77cae4ab0c8edcb77ade2c7" title="pointer to GlobalNodeList in this node">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#ad71420e64d6f5466ecfd95d8ab56ca55" title="Debootstraps peers in the peer set.">removePeer</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>);

<span class="comment">//    We use our own time count to avoid rounding errors</span>
<span class="comment">//    simtime_t time = globalStatistics-&gt;calcMeasuredLifetime(creationTime);</span>
<span class="comment">//    if(time == 0) return;</span>
    <span class="keywordflow">if</span>(<a class="code" href="classVast.html#a120c3c82cafcab0a237fe080e71a4862">secTimerCount</a> == 0) <span class="keywordflow">return</span>;

    <span class="comment">// collect statistics</span>
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: JOIN_REQUEST bytes sent/s&quot;</span>, <a class="code" href="classVast.html#a8cae35144fc3d3615ca900f4a5d016f5">joinRequestBytesSent</a>/(<span class="keywordtype">double</span>) <a class="code" href="classVast.html#a120c3c82cafcab0a237fe080e71a4862">secTimerCount</a>);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: JOIN_ACKNOWLEDGE bytes sent/s&quot;</span>, <a class="code" href="classVast.html#af1b66db4acda86bc53121f530ad3305f">joinAcknowledgeBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: NODE_MOVE bytes sent/s&quot;</span>, <a class="code" href="classVast.html#ae7e6d853f952734f8e1c41d5c3f82dd3">nodeMoveBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: NEW_NEIGHBORS bytes sent/s&quot;</span>, <a class="code" href="classVast.html#a0bb1c36ab41d09526a7b54433b2a1f54">newNeighborsBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: NODE_LEAVE bytes sent/s&quot;</span>, <a class="code" href="classVast.html#aec8877ef5725ece7aa4f1e7dc6ec47c6">nodeLeaveBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: ENCLOSING_NEIGHBORS_REQUEST bytes sent/s&quot;</span>, <a class="code" href="classVast.html#a42fa22094150446e8b0d2e2e2c58ef02">enclosingNeighborsRequestBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: PING bytes sent/s&quot;</span>, <a class="code" href="classVast.html#afea7ca8faed771a898b0daa3cffafeeb">pingBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: PONG bytes sent/s&quot;</span>, <a class="code" href="classVast.html#af8a09f477664314710211ec69de5944f">pongBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: DISCARD_NODE bytes sent/s&quot;</span>, <a class="code" href="classVast.html#a53543eccb1be540b3d7875cf0cdd0b52">discardNodeBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: BACKUP bytes sent/s&quot;</span>, <a class="code" href="classVast.html#a44a0e59077adea2a2c3d09a39ce6597e">backupBytesSent</a>/(<span class="keywordtype">double</span>) secTimerCount);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: max bytes/second sent&quot;</span>, <a class="code" href="classVast.html#aea94419d8d7589930d1b2e1b4de0468d">maxBytesPerSecondSent</a>);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;Vast: average bytes/second sent&quot;</span>, <a class="code" href="classVast.html#a90f9ed7d27fee143970e838e2a7bea15">averageBytesPerSecondSent</a> / (<span class="keywordtype">double</span>) secTimerCount);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac3b579a608533fc6f2cf91e0fd79842a"></a><!-- doxytag: member="Vast::getAOI" ref="ac3b579a608533fc6f2cf91e0fd79842a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Vast::getAOI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01181">1181</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    <span class="keywordflow">return</span> <a class="code" href="classVast.html#a4720ff97b3ca3a6f53b9533f57a4fb56">AOI_size</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4861053794596d6f2b7c5c24e44fc345"></a><!-- doxytag: member="Vast::getAreaDimension" ref="a4861053794596d6f2b7c5c24e44fc345" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double Vast::getAreaDimension </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01199">1199</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    <span class="keywordflow">return</span> <a class="code" href="classVast.html#afdc6b6327442ee54b2a92c930966aae6">areaDimension</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48cf3c577c61f00217c6e3e62a90fc9a"></a><!-- doxytag: member="Vast::getHandle" ref="a48cf3c577c61f00217c6e3e62a90fc9a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNodeHandle.html">NodeHandle</a> Vast::getHandle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01193">1193</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="ConnectivityProbe_8cc_source.html#l00257">ConnectivityProbe::extractTopology()</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    <span class="keywordflow">return</span> <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa285352a2262c1a67208cd98659616a3"></a><!-- doxytag: member="Vast::getPosition" ref="aa285352a2262c1a67208cd98659616a3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVector2D.html">Vector2D</a> Vast::getPosition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01187">1187</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    Enter_Method_Silent();
    <span class="keywordflow">return</span> <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9bfca7e546baa11222621b528659efa7"></a><!-- doxytag: member="Vast::handleAppMessage" ref="a9bfca7e546baa11222621b528659efa7" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleAppMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes "timer" self-messages. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A self-message Processes non-commonAPI messages</td></tr>
    <tr><td class="paramname">msg</td><td>non-commonAPIMessage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#aef92d042c22b47c123e59a831acb7033">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00197">197</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(dynamic_cast&lt;GameAPIMessage*&gt;(msg)) {
        <a class="code" href="classGameAPIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIMessage</a>* gameAPIMsg = check_and_cast&lt;<a class="code" href="classGameAPIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIMessage</a>*&gt;(msg);
        <span class="comment">// debug output</span>
        <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) EV &lt;&lt; <span class="stringliteral">&quot;[Vast::handleAppMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                           &lt;&lt; <span class="stringliteral">&quot;    Node &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot; received &quot;</span> &lt;&lt; gameAPIMsg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; from application.&quot;</span>
                           &lt;&lt; endl;
        <span class="keywordflow">switch</span>(gameAPIMsg-&gt;<a class="code" href="classGameAPIMessage.html#a310b7731f5d78aa25d103594d88d0edd">getCommand</a>()) {
            <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6ba7a7dbf862295be01b326c1d51e73d875">MOVEMENT_INDICATION</a>: {
                <a class="code" href="classGameAPIPositionMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIPositionMessage</a>* gameAPIPosMsg = check_and_cast&lt;<a class="code" href="classGameAPIPositionMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIPositionMessage</a>*&gt;(msg);
                <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>) {
                    <a class="code" href="classVast.html#a25469658017340ae776e74d966ba5f54">handleJoin</a>(gameAPIPosMsg);
                    <span class="keyword">delete</span> msg;
                }
                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
                    <a class="code" href="classVast.html#a092f27883a3661a5b1ffe905e68df738">handleMove</a>(gameAPIPosMsg);
                    <span class="keyword">delete</span> msg;
                }
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6ba2d637d8d63fd5cc1921d781389e7482c">GAMEEVENT_CHAT</a>:
            <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6ba94d7bea1985e12fde4c9b7ba389a59c7">GAMEEVENT_SNOW</a>:
            <span class="keywordflow">case</span> <a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6ba42bc017550219c838438200a3155c506">GAMEEVENT_FROZEN</a>:
                <a class="code" href="classVast.html#a645e007e0427c40f13eadf6f914f9881">handleEvent</a>( gameAPIMsg );
                <span class="keyword">delete</span> msg;
                <span class="keywordflow">break</span>;
            <span class="keywordflow">default</span>: {
                <span class="keyword">delete</span> msg;
            }
        }
    }
    <span class="keywordflow">else</span> <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7183562b322a046e2f23f8f8f668fdca"></a><!-- doxytag: member="Vast::handleBackupNeighbors" ref="a7183562b322a046e2f23f8f8f668fdca" args="(VastListMessage *vastListMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleBackupNeighbors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastListMessage.html">VastListMessage</a> *&#160;</td>
          <td class="paramname"><em>vastListMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00975">975</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// add new neighbors to stock list</span>
    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a284ee95a466d4e7c1b4f803acd47be2d">getNeighborNodeArraySize</a>(); i++) {
        <span class="keywordflow">if</span>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a4779058fdfb7630a9ac3658377e033d4">getNeighborNode</a>(i)) == <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end()) {
            <a class="code" href="classVast.html#a35d59294c560dd21f9ac30729eddfdb2">addNodeToStock</a>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a4779058fdfb7630a9ac3658377e033d4">getNeighborNode</a>(i));
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac8599f81539fdaee6cd4cfd5cca2b8f4"></a><!-- doxytag: member="Vast::handleDiscardNode" ref="ac8599f81539fdaee6cd4cfd5cca2b8f4" args="(VastDiscardMessage *vastMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleDiscardNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastDiscardMessage.html">VastDiscardMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01003">1003</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// discard outdated entry</span>
    <a class="code" href="classVast.html#a3e7c0afd3098cc61ede525a6a59fb71f">removeNode</a>(vastMsg-&gt;<a class="code" href="classVastDiscardMessage.html#ab1aafc5df134ef62c4af2ef06ca87b25">getDiscardNode</a>());
    <span class="comment">// update voronoi</span>
    <span class="comment">//buildVoronoi();</span>
    <span class="comment">//synchronizeApp();</span>
    <span class="comment">// removeNeighbors();</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="adde7e0c8aab03277a63461d134fc6daa"></a><!-- doxytag: member="Vast::handleEnclosingNeighborsRequest" ref="adde7e0c8aab03277a63461d134fc6daa" args="(VastMessage *vastMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleEnclosingNeighborsRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMessage.html">VastMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00946">946</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// send new neighbors</span>
    <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a> *vastListMsg = <span class="keyword">new</span> <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>(<span class="stringliteral">&quot;NEW_NEIGHBORS&quot;</span>);
    vastListMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fa3aafac4a63883acb0402e9a5dcae8110">NEW_NEIGHBORS</a>);

    vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
    vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());

    <span class="keywordtype">int</span> i = 0;
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <span class="keywordflow">if</span>((itSites-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#a2aedfe59324ff558559ff9932c649443">ENCLOSING</a>) &amp;&amp; itSites-&gt;second-&gt;addr != vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>()) {
            vastListMsg-&gt;<a class="code" href="classVastListMessage.html#af9ed6e564bae28c51b19cf3004a83325">setNeighborNode</a>(i, itSites-&gt;second-&gt;addr);
            vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ad6718fb26bb003fbf87c6be6c2ecfae5">setNeighborPos</a>(i, itSites-&gt;second-&gt;coord);
            ++i;
        }
    }
    vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(i);
    vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(i);

    vastListMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#afd61f02ed0c547b46d3376a4e4e7dc1c">VASTLIST_L</a>(vastListMsg));
    <span class="keywordflow">if</span>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a284ee95a466d4e7c1b4f803acd47be2d">getNeighborNodeArraySize</a>() &gt; 0) {
        <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastListMsg, vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());
    }
    <span class="keywordflow">else</span> {
        <span class="keyword">delete</span> vastListMsg;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a645e007e0427c40f13eadf6f914f9881"></a><!-- doxytag: member="Vast::handleEvent" ref="a645e007e0427c40f13eadf6f914f9881" args="(GameAPIMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classGameAPIMessage.html">GameAPIMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00771">771</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00197">handleAppMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// send event to neighbors</span>
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <a class="code" href="classVastEventMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastEventMessage</a> *vastMsg = <span class="keyword">new</span> <a class="code" href="classVastEventMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastEventMessage</a>(<span class="stringliteral">&quot;EVENT&quot;</span>);
        vastMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a0e3f3deef32a4742dc7a553c15c71f51">VAST_EVENT</a>);
        vastMsg-&gt;encapsulate((cPacket*)msg-&gt;<a class="code" href="classGameAPIMessage.html#a4efd0fa1b03d99fd4f063020d9250077">dup</a>());
        <span class="comment">// FIXME: Message length!</span>
        <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMsg, itSites-&gt;second-&gt;addr);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a25469658017340ae776e74d966ba5f54"></a><!-- doxytag: member="Vast::handleJoin" ref="a25469658017340ae776e74d966ba5f54" args="(GameAPIPositionMessage *sgcMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleJoin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classGameAPIPositionMessage.html">GameAPIPositionMessage</a> *&#160;</td>
          <td class="paramname"><em>sgcMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00728">728</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00197">handleAppMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> joinNode = <a class="code" href="classBaseOverlay.html#abe4dea93564123116c97d5c4721f0504" title="pointer to the BootstrapList module">bootstrapList</a>-&gt;<a class="code" href="classBootstrapList.html#ac351433be1d43bbf8cbb871e9f9e1f69" title="Get a bootstrap node from the bootstrap list.">getBootstrapNode</a>();
    <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a> = sgcMsg-&gt;<a class="code" href="classGameAPIPositionMessage.html#a62cb5e229193a2e0118e240de2494d53">getPosition</a>();
    <span class="comment">// check if this is the only node in the overlay</span>
    <span class="keywordflow">if</span>(joinNode.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) {
        <a class="code" href="classVast.html#a9f49980680ed52219a6ef0a1bcff412b">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>);
    }
    <span class="keywordflow">else</span> {
        <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a> *vastMsg = <span class="keyword">new</span> <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a>(<span class="stringliteral">&quot;JOIN_REQUEST&quot;</span>);
        vastMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="GiaMessage__m_8h.html#ac712f468e66678ffb5df03be6d6a8157a71fec090ff88ece51771bbbf434064ec">JOIN_REQUEST</a>);
        vastMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#ab6942347876cb4befb4da670eb90871f">VAST_L</a>(vastMsg));
        <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMsg, joinNode);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae3f2d9c26130a6986478513bc281e080"></a><!-- doxytag: member="Vast::handleJoinAcknowledge" ref="ae3f2d9c26130a6986478513bc281e080" args="(VastListMessage *vastListMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleJoinAcknowledge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastListMessage.html">VastListMessage</a> *&#160;</td>
          <td class="paramname"><em>vastListMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00834">834</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// add acceptor node</span>
    <a class="code" href="classVast.html#a9f49980680ed52219a6ef0a1bcff412b">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>);
    <a class="code" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a>(vastListMsg-&gt;<a class="code" href="classVastMessage.html#acd4b084b9e888caaaafa0872cd2cd640">getPos</a>(), vastListMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>(), vastListMsg-&gt;<a class="code" href="classVastMessage.html#a91722b2dc4522f9b533db87c9eb9c56e">getNeighborCount</a>());
    <span class="comment">// add new neighbors</span>
    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a284ee95a466d4e7c1b4f803acd47be2d">getNeighborNodeArraySize</a>(); i++) {
        <a class="code" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ab21fc36623f45fc11ef02f510b3dceee">getNeighborPos</a>(i), vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a4779058fdfb7630a9ac3658377e033d4">getNeighborNode</a>(i));
    }
    <span class="comment">// update voronoi with new neighbors</span>
    <a class="code" href="classVast.html#aac593b11c556c63cbdb49984bc6e9b34">buildVoronoi</a>();
    <a class="code" href="classVast.html#afe368cd0468509b32f40acfc196a1856">synchronizeApp</a>();
    <span class="comment">// removeNeighbors();</span>
    <span class="comment">// contact new neighbors</span>
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a> *vastMoveMsg = <span class="keyword">new</span> <a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a>(<span class="stringliteral">&quot;NODE_MOVE&quot;</span>);
        vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad9745223990da14f545a02e12e727b63">NODE_MOVE</a>);
        vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#ade518f3540a8184ae1a27b262c766ea2">setNewPos</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>);
        vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#a9aa1de91ccd0105b57c67d309ec4df67">setIs_boundary</a>(itSites-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#a985bae7b67bcb96c5565a24a5f6d4cba">BOUNDARY</a>);
        vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#a1c51279c4d9653e8753a61d4a67883f8">setRequest_list</a>(<span class="keyword">true</span>);
        vastMoveMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#a865e3b42837bb08abf934321cf8ea6a7">VASTMOVE_L</a>(vastMoveMsg));
        <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMoveMsg, itSites-&gt;second-&gt;addr);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3b1ec50a85c2e2e6c7c3e081acd1dcd2"></a><!-- doxytag: member="Vast::handleJoinRequest" ref="a3b1ec50a85c2e2e6c7c3e081acd1dcd2" args="(VastMessage *vastMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleJoinRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMessage.html">VastMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00783">783</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classSite.html">Site</a> *forwardSite = NULL;
    <span class="comment">// start with this node</span>
    <span class="keywordtype">double</span> min_dist = <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ae01a1f04ce4ee6f09f3fbc72893412cb">distanceSqr</a>(vastMsg-&gt;<a class="code" href="classVastMessage.html#acd4b084b9e888caaaafa0872cd2cd640">getPos</a>());
    forwardSite = &amp;<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>;
    <span class="comment">// iterate through all neighbors</span>
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <span class="comment">// dont forward to nodes which are still joining</span>
        <span class="keywordflow">if</span>(itSites-&gt;second-&gt;coord.distanceSqr(vastMsg-&gt;<a class="code" href="classVastMessage.html#acd4b084b9e888caaaafa0872cd2cd640">getPos</a>()) &lt; min_dist &amp;&amp; itSites-&gt;second-&gt;neighborCount &gt;= 0) {
            min_dist = itSites-&gt;second-&gt;<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>.<a class="code" href="classVector2D.html#ae01a1f04ce4ee6f09f3fbc72893412cb">distanceSqr</a>(vastMsg-&gt;<a class="code" href="classVastMessage.html#acd4b084b9e888caaaafa0872cd2cd640">getPos</a>());
            forwardSite = itSites-&gt;second;
        }
    }
    <span class="comment">// do nothing and let node retry with new position if current position is illegal</span>
    <span class="keywordflow">if</span>(min_dist == 0.0) {
        <span class="keyword">delete</span> vastMsg;
    }
    <span class="keywordflow">else</span> {
        <span class="comment">// send an acknowledge or forward request if any of our neighbors is closer to joining node</span>
        <span class="keywordflow">if</span>(forwardSite-&gt;<a class="code" href="classSite.html#a8285244e3eb082cd382c6971b56066a9">type</a> &amp; <a class="code" href="VastDefs_8h.html#ac048bf3907733b6148c78e7345a30525">THIS</a>) {
            <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a> *vastListMsg = <span class="keyword">new</span> <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>(<span class="stringliteral">&quot;JOIN_ACKNOWLEDGE&quot;</span>);
            vastListMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad2045a15ed8b82d3db379cc54ba0b7d4">JOIN_ACKNOWLEDGE</a>);
            <span class="comment">// fill neighbors list</span>
            vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
            vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
            <span class="keywordtype">int</span> i = 0;
            <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
                vastListMsg-&gt;<a class="code" href="classVastListMessage.html#af9ed6e564bae28c51b19cf3004a83325">setNeighborNode</a>(i, itSites-&gt;second-&gt;addr);
                vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ad6718fb26bb003fbf87c6be6c2ecfae5">setNeighborPos</a>(i, itSites-&gt;second-&gt;coord);
                ++i;
            }

            vastListMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#afd61f02ed0c547b46d3376a4e4e7dc1c">VASTLIST_L</a>(vastListMsg));
            <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastListMsg, vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());

            <span class="comment">// add node to list to propagte its position early</span>
            <span class="comment">// nieghborCount is set to -1 to indicate node is still joining</span>
            <a class="code" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a>(vastMsg-&gt;<a class="code" href="classVastMessage.html#acd4b084b9e888caaaafa0872cd2cd640">getPos</a>(), vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>(), -1);
            <span class="comment">// update voronoi with new neighbors</span>
            <a class="code" href="classVast.html#aac593b11c556c63cbdb49984bc6e9b34">buildVoronoi</a>();
            <a class="code" href="classVast.html#afe368cd0468509b32f40acfc196a1856">synchronizeApp</a>();
            <span class="comment">// removeNeighbors();</span>
            <span class="keyword">delete</span> vastMsg;
        }
        <span class="keywordflow">else</span> {
            <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMsg, forwardSite-&gt;<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a092f27883a3661a5b1ffe905e68df738"></a><!-- doxytag: member="Vast::handleMove" ref="a092f27883a3661a5b1ffe905e68df738" args="(GameAPIPositionMessage *sgcMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleMove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classGameAPIPositionMessage.html">GameAPIPositionMessage</a> *&#160;</td>
          <td class="paramname"><em>sgcMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00744">744</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00197">handleAppMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classVector2D.html">Vector2D</a> pos = sgcMsg-&gt;<a class="code" href="classGameAPIPositionMessage.html#a62cb5e229193a2e0118e240de2494d53">getPosition</a>();
    <span class="comment">// test if new position is legal</span>
    <span class="keywordflow">if</span>(<a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.find(pos) != <a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.end()) {
        <a class="code" href="classGameAPIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIMessage</a> *gameMsg = <span class="keyword">new</span> <a class="code" href="classGameAPIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIMessage</a>(<span class="stringliteral">&quot;MOVEMENT_REQUEST&quot;</span>);
        gameMsg-&gt;<a class="code" href="classGameAPIMessage.html#a3fe3071c66623191477b903527280ddc">setCommand</a>(<a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6baebd21087dd4fccf5bea6d56c351f76d1">MOVEMENT_REQUEST</a>);
        <a class="code" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a>(gameMsg);
        <span class="keywordflow">return</span>;
    }
    <span class="comment">// set new position</span>
    <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a> = pos;
    <span class="comment">// update voronoi</span>
    <a class="code" href="classVast.html#aac593b11c556c63cbdb49984bc6e9b34">buildVoronoi</a>();
    <a class="code" href="classVast.html#afe368cd0468509b32f40acfc196a1856">synchronizeApp</a>();
    <a class="code" href="classVast.html#ac0eb8a31568b3fbec02f6251e7d05e46">removeNeighbors</a>();
    <span class="comment">// send position update to neighbors</span>
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a> *vastMoveMsg = <span class="keyword">new</span> <a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a>(<span class="stringliteral">&quot;NODE_MOVE&quot;</span>);
        vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad9745223990da14f545a02e12e727b63">NODE_MOVE</a>);
        vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#ade518f3540a8184ae1a27b262c766ea2">setNewPos</a>(pos);
        vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#a9aa1de91ccd0105b57c67d309ec4df67">setIs_boundary</a>(itSites-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#a985bae7b67bcb96c5565a24a5f6d4cba">BOUNDARY</a>);
        vastMoveMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#a865e3b42837bb08abf934321cf8ea6a7">VASTMOVE_L</a>(vastMoveMsg));
        <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMoveMsg, itSites-&gt;second-&gt;addr);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a50d7f96259000a44b65ee3951cb75ef5"></a><!-- doxytag: member="Vast::handleNewNeighbors" ref="a50d7f96259000a44b65ee3951cb75ef5" args="(VastListMessage *vastListMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleNewNeighbors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastListMessage.html">VastListMessage</a> *&#160;</td>
          <td class="paramname"><em>vastListMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00914">914</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// add new neighbors</span>
    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a284ee95a466d4e7c1b4f803acd47be2d">getNeighborNodeArraySize</a>(); i++) {
        <a class="code" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ab21fc36623f45fc11ef02f510b3dceee">getNeighborPos</a>(i), vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a4779058fdfb7630a9ac3658377e033d4">getNeighborNode</a>(i));

        <span class="keywordflow">if</span>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a310301deb6e923737554b28876e39d13">getRequestEnclosingNeighbors</a>()) {
            <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a> *vastMsg = <span class="keyword">new</span> <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a>(<span class="stringliteral">&quot;ENCLOSING_NEIGHBORS_REQUEST&quot;</span>);
            vastMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a328174aefc34e2aa1577e73ca6e0eb70">ENCLOSING_NEIGHBORS_REQUEST</a>);
            vastMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#ab6942347876cb4befb4da670eb90871f">VAST_L</a>(vastMsg));
            <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMsg, vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a4779058fdfb7630a9ac3658377e033d4">getNeighborNode</a>(i));
        }
    }
    <span class="comment">// update voronoi with new neighbors</span>
<span class="comment">//    buildVoronoi();</span>
<span class="comment">//    synchronizeApp();</span>
    <span class="comment">// removeNeighbors();</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a927d7255a4ffb6ab2ef1f46c5cba8fb4"></a><!-- doxytag: member="Vast::handleNodeGracefulLeaveNotification" ref="a927d7255a4ffb6ab2ef1f46c5cba8fb4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleNodeGracefulLeaveNotification </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method gets call **.gracefulLeaveDelay seconds before it is killed if this node is among the gracefulLeaveProbability nodes. </p>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#aa2d70984acd164839ca92694a02e7a91">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00586">586</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
     <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
        <span class="comment">// generate node leave messages</span>
        <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a> *vastListMsg = <span class="keyword">new</span> <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>(<span class="stringliteral">&quot;NODE_LEAVE&quot;</span>);
        vastListMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fac2f6b0a84b96ac134911c0d532a4a91c">NODE_LEAVE</a>);
        <span class="comment">// fill neighbors list</span>
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
        <span class="keywordtype">int</span> i = 0;
        <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
            <span class="keywordflow">if</span>(itSites-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#a2aedfe59324ff558559ff9932c649443">ENCLOSING</a>) {
                vastListMsg-&gt;<a class="code" href="classVastListMessage.html#af9ed6e564bae28c51b19cf3004a83325">setNeighborNode</a>(i, itSites-&gt;second-&gt;addr);
                vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ad6718fb26bb003fbf87c6be6c2ecfae5">setNeighborPos</a>(i, itSites-&gt;second-&gt;coord);
                ++i;
            }
        }
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(i);
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(i);

        vastListMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#afd61f02ed0c547b46d3376a4e4e7dc1c">VASTLIST_L</a>(vastListMsg));
        <span class="keywordflow">if</span>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a284ee95a466d4e7c1b4f803acd47be2d">getNeighborNodeArraySize</a>() &gt; 0) {
            <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
                <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a> *vastCopyMsg = <span class="keyword">new</span> <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>(*vastListMsg);
               <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastCopyMsg, itSites-&gt;second-&gt;addr);
            }
        }
        <span class="keyword">delete</span> vastListMsg;
        <a class="code" href="classVast.html#a9f49980680ed52219a6ef0a1bcff412b">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa5b06ce84e80dfe3f274327a8cebf3d9"></a><!-- doxytag: member="Vast::handleNodeLeave" ref="aa5b06ce84e80dfe3f274327a8cebf3d9" args="(VastListMessage *vastListMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleNodeLeave </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastListMessage.html">VastListMessage</a> *&#160;</td>
          <td class="paramname"><em>vastListMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00933">933</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classVast.html#a3e7c0afd3098cc61ede525a6a59fb71f">removeNode</a>(vastListMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());
    <span class="comment">// add possible new neighbors</span>
    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a284ee95a466d4e7c1b4f803acd47be2d">getNeighborNodeArraySize</a>(); i++) {
        <a class="code" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ab21fc36623f45fc11ef02f510b3dceee">getNeighborPos</a>(i), vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a4779058fdfb7630a9ac3658377e033d4">getNeighborNode</a>(i));
    }
    <span class="comment">// update voronoi with new neighbors</span>
    <span class="comment">// buildVoronoi();</span>
    <span class="comment">// synchronizeApp();</span>
    <span class="comment">// removeNeighbors();</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="abe5f7fe27677c21cb0421ace877ff368"></a><!-- doxytag: member="Vast::handleNodeLeaveNotification" ref="abe5f7fe27677c21cb0421ace877ff368" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleNodeLeaveNotification </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method gets call **.gracefulLeaveDelay seconds before it is killed. </p>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#af9ea0a59c26b70c50c63c2c1dc4c2ec3">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00568">568</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
        <span class="comment">// debug output</span>
        <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) {
            EV &lt;&lt; <span class="stringliteral">&quot;[Vast::receiveChangeNotification() @ &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
               &lt;&lt; <span class="stringliteral">&quot;    Node &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot; is leaving the overlay.&quot;</span>
               &lt;&lt; endl;
        }

        <a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>* readyMsg = <span class="keyword">new</span> <a class="code" href="classCompReadyMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">CompReadyMessage</a>(<span class="stringliteral">&quot;OVERLAY_FINISHED&quot;</span>);
        readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#a07d2b2a15889728c23ed4d80730de2cf">setReady</a>(<span class="keyword">false</span>);
        readyMsg-&gt;<a class="code" href="classCompReadyMessage.html#a77640d7f3566804064921b2520ed51b6">setComp</a>(<a class="code" href="classBaseOverlay.html#a92e0d3f96a5716245465e05da60ef487" title="Return the component type of this module.">getThisCompType</a>());
        <a class="code" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a>(readyMsg);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9a1ea2b26ce93b38b226fd0eeb494998"></a><!-- doxytag: member="Vast::handleNodeMove" ref="a9a1ea2b26ce93b38b226fd0eeb494998" args="(VastMoveMessage *vastMoveMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleNodeMove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMoveMessage.html">VastMoveMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMoveMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00859">859</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
            <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(
                <span class="stringliteral">&quot;Vast: MoveDelay&quot;</span>,
                SIMTIME_DBL(simTime()) - SIMTIME_DBL(vastMoveMsg-&gt;getCreationTime())
                );
            );

    <a class="code" href="classVector2D.html">Vector2D</a> old_p, new_p;
    old_p = vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#acd4b084b9e888caaaafa0872cd2cd640">getPos</a>();
    new_p = vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#a6b79e923f8cf72150b2b59e5c0f2a59c">getNewPos</a>();
    <a class="code" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a>(new_p, vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>(), vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a91722b2dc4522f9b533db87c9eb9c56e">getNeighborCount</a>());
    <span class="comment">// update voronoi with new neighbor detection or without</span>
    <span class="keywordflow">if</span>(vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#a4ff4ff5bbee058b7ecb88066f24a1955">getIs_boundary</a>() || vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#ac3a4b30c70da42a1d9fefba6d4b0a762">getRequest_list</a>()) {
        <a class="code" href="classVast.html#aac593b11c556c63cbdb49984bc6e9b34">buildVoronoi</a>(old_p, new_p, vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>()); <span class="comment">// enhanced enclosing check</span>
        <a class="code" href="classVast.html#afe368cd0468509b32f40acfc196a1856">synchronizeApp</a>(vastMoveMsg);
        <span class="comment">// removeNeighbors();</span>
        <span class="comment">// send new neighbors</span>
        <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a> *vastListMsg = <span class="keyword">new</span> <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>(<span class="stringliteral">&quot;NEW_NEIGHBORS&quot;</span>);
        vastListMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fa3aafac4a63883acb0402e9a5dcae8110">NEW_NEIGHBORS</a>);

        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());

        <span class="keywordtype">int</span> i = 0;
        <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
            <span class="keywordflow">if</span>(itSites-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#ab6bca16ed021b1e211fde8669758f199">NEW</a> || vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#ac3a4b30c70da42a1d9fefba6d4b0a762">getRequest_list</a>()) {
                vastListMsg-&gt;<a class="code" href="classVastListMessage.html#af9ed6e564bae28c51b19cf3004a83325">setNeighborNode</a>(i, itSites-&gt;second-&gt;addr);
                vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ad6718fb26bb003fbf87c6be6c2ecfae5">setNeighborPos</a>(i, itSites-&gt;second-&gt;coord);
                ++i;
            }
        }
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(i);
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(i);
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ae6fb80fc3ecda036f8eb68caf82f80f7">setRequestEnclosingNeighbors</a>(<span class="keyword">true</span>);

        vastListMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#afd61f02ed0c547b46d3376a4e4e7dc1c">VASTLIST_L</a>(vastListMsg));
        <span class="keywordflow">if</span>(vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a284ee95a466d4e7c1b4f803acd47be2d">getNeighborNodeArraySize</a>() &gt; 0) {
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                <span class="keywordflow">if</span>( vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#ac3a4b30c70da42a1d9fefba6d4b0a762">getRequest_list</a>() ) <a class="code" href="classVast.html#a44a0e59077adea2a2c3d09a39ce6597e">backupBytesSent</a> += vastListMsg-&gt;getByteLength();
            );
            <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastListMsg, vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());
        }
        <span class="keywordflow">else</span> {
            <span class="keyword">delete</span> vastListMsg;
        }
    }
    <span class="keywordflow">else</span> {
        <span class="comment">// buildVoronoi();</span>
        <a class="code" href="classVast.html#afe368cd0468509b32f40acfc196a1856">synchronizeApp</a>(vastMoveMsg);
        <span class="comment">// removeNeighbors();</span>
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1361682de85c7ecc63476b0a9db712f0"></a><!-- doxytag: member="Vast::handlePing" ref="a1361682de85c7ecc63476b0a9db712f0" args="(VastMessage *vastMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handlePing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMessage.html">VastMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00985">985</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a> *vastPongMsg = <span class="keyword">new</span> <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a>(<span class="stringliteral">&quot;PONG&quot;</span>);
    vastPongMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607ae911a27de4bca30604be3515f31b2057">PONG</a>);
    vastPongMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#ab6942347876cb4befb4da670eb90871f">VAST_L</a>(vastPongMsg));
    <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastPongMsg, vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a183cca07bd6ddceb33eebfba75bf1b80"></a><!-- doxytag: member="Vast::handlePong" ref="a183cca07bd6ddceb33eebfba75bf1b80" args="(VastMessage *vastMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handlePong </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMessage.html">VastMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00993">993</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// replace entry cause it was probably outdated</span>
    <a class="code" href="classVast.html#a27eff8db1664e9cd1e081c6dd3a64f42">addNode</a>(vastMsg-&gt;<a class="code" href="classVastMessage.html#acd4b084b9e888caaaafa0872cd2cd640">getPos</a>(), vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>(), vastMsg-&gt;<a class="code" href="classVastMessage.html#a91722b2dc4522f9b533db87c9eb9c56e">getNeighborCount</a>());
    <span class="comment">// update voronoi</span>
    <span class="comment">//buildVoronoi();</span>
    <span class="comment">//synchronizeApp();</span>
    <span class="comment">// removeNeighbors();</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8b0fcea2fc373e49bb5b496fe8049f10"></a><!-- doxytag: member="Vast::handleTimerEvent" ref="a8b0fcea2fc373e49bb5b496fe8049f10" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleTimerEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classBaseRpc.html#ab893c156412e38caa62fe058b229899b">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00158">158</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(msg-&gt;isName(<span class="stringliteral">&quot;join_timer&quot;</span>)) {
        <span class="comment">//reset timer</span>
        cancelEvent(<a class="code" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">join_timer</a>);
        scheduleAt(simTime() + <a class="code" href="classVast.html#a2218f4c5c055326aeb59640acaf3b91c">joinTimeout</a>, msg);
        <span class="comment">// handle event</span>
        <a class="code" href="classVast.html#aa54887a2c280267a9a401e50c240f6d5">processJoinTimer</a>();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;isName(<span class="stringliteral">&quot;ping_timer&quot;</span>)) {
        <span class="comment">//reset timer</span>
        cancelEvent(<a class="code" href="classVast.html#a34548c8fe764d86196e99f3bd8d5b793">ping_timer</a>);
        scheduleAt(simTime() + <a class="code" href="classVast.html#ad79f8a786033cb62653286f8cc5015e5">pingTimeout</a>, msg);
        <span class="comment">// handle event</span>
        <a class="code" href="classVast.html#af30893315b517cde6403ebf5a0aca8af">processPingTimer</a>();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;isName(<span class="stringliteral">&quot;sec_timer&quot;</span>)) {
        <span class="comment">//reset timer</span>
        cancelEvent(<a class="code" href="classVast.html#aff47bd08fb10c41ec16862934b098a4b">sec_timer</a>);
        scheduleAt(simTime() + 1, msg);
        <span class="comment">// handle event</span>
        <a class="code" href="classVast.html#a0eadb10fa255a3a2b89b1296d87be07d">processSecTimer</a>();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;isName(<span class="stringliteral">&quot;checkcritical_timer&quot;</span>)) {
        <span class="comment">//reset timer</span>
        cancelEvent(<a class="code" href="classVast.html#a6da2c953a461445f77d16764f3545e6e">checkcritical_timer</a>);
        scheduleAt(simTime() + <a class="code" href="classVast.html#a7cf9fae4a48173e8e28a117f568027fb">checkCriticalIntervall</a>, msg);
        <span class="comment">// handle event</span>
        <a class="code" href="classVast.html#a1297368d6e59e3d9528b082f5ec043f4">processCheckCriticalTimer</a>();
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;isName(<span class="stringliteral">&quot;discovery_timer&quot;</span>)) {
        <span class="comment">//reset timer</span>
        cancelEvent(<a class="code" href="classVast.html#a12f4439d33e9d3f8928c5cc81f36a141">discovery_timer</a>);
        scheduleAt(simTime() + <a class="code" href="classVast.html#a9b5faa39bdba0cbc3da3a588173e3c1f">discoveryIntervall</a>, msg);
        <span class="comment">// handle event</span>
        <a class="code" href="classVast.html#a3e41736afd958b63b754c0bcc425cbfe">processDiscoveryTimer</a>();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a5a12a3e1f34fbad6a2f6bb3231fce048"></a><!-- doxytag: member="Vast::handleUDPMessage" ref="a5a12a3e1f34fbad6a2f6bb3231fce048" args="(BaseOverlayMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::handleUDPMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes messages from underlay. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Message from UDP </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a31d7dd39ddc9e62ad92f69f6d7210344">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00232">232</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>) {
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }
    <span class="keywordflow">if</span>(dynamic_cast&lt;VastMessage*&gt;(msg)) {
        <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a>* vastMsg = check_and_cast&lt;<a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a>*&gt;(msg);
        <span class="keywordflow">if</span>(vastMsg-&gt;<a class="code" href="classVastMessage.html#a9c9cdb5c0fbbdc0835ec81958c149a42">getDestKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() ||
           <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>() ||
           vastMsg-&gt;<a class="code" href="classVastMessage.html#a9c9cdb5c0fbbdc0835ec81958c149a42">getDestKey</a>() == <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>()) {
            <span class="comment">// debug output</span>
            <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) EV &lt;&lt; <span class="stringliteral">&quot;[Vast::handleUDPMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                               &lt;&lt; <span class="stringliteral">&quot;    Node &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot; received &quot;</span> &lt;&lt; vastMsg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; from &quot;</span> &lt;&lt; vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>().<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                               &lt;&lt; endl;
            <span class="keywordtype">bool</span> doUpdate = <span class="keyword">true</span>;
            <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
                <span class="keywordflow">switch</span>(vastMsg-&gt;<a class="code" href="classVastMessage.html#a4faf79e8d3e56ae8b1007468d64f415e">getCommand</a>()) {
                    <span class="keywordflow">case</span> <a class="code" href="GiaMessage__m_8h.html#ac712f468e66678ffb5df03be6d6a8157a71fec090ff88ece51771bbbf434064ec">JOIN_REQUEST</a>: {
                        <a class="code" href="classVast.html#a3b1ec50a85c2e2e6c7c3e081acd1dcd2">handleJoinRequest</a>(vastMsg);
                        doUpdate = <span class="keyword">false</span>;
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad9745223990da14f545a02e12e727b63">NODE_MOVE</a>: {
                        <a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a>* vastMoveMsg = check_and_cast&lt;<a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a>*&gt;(msg);
                        <a class="code" href="classVast.html#a9a1ea2b26ce93b38b226fd0eeb494998">handleNodeMove</a>(vastMoveMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fa3aafac4a63883acb0402e9a5dcae8110">NEW_NEIGHBORS</a>: {
                        <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>* vastListMsg = check_and_cast&lt;<a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>*&gt;(msg);
                        <a class="code" href="classVast.html#a50d7f96259000a44b65ee3951cb75ef5">handleNewNeighbors</a>(vastListMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fac2f6b0a84b96ac134911c0d532a4a91c">NODE_LEAVE</a>: {
                        <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>* vastListMsg = check_and_cast&lt;<a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>*&gt;(msg);
                        <a class="code" href="classVast.html#aa5b06ce84e80dfe3f274327a8cebf3d9">handleNodeLeave</a>(vastListMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a328174aefc34e2aa1577e73ca6e0eb70">ENCLOSING_NEIGHBORS_REQUEST</a>: {
                        <a class="code" href="classVast.html#adde7e0c8aab03277a63461d134fc6daa">handleEnclosingNeighborsRequest</a>(vastMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a7157cf88037067097b25279589eec51c">BACKUP_NEIGHBORS</a>: {
                        <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>* vastListMsg = check_and_cast&lt;<a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>*&gt;(msg);
                        <a class="code" href="classVast.html#a7183562b322a046e2f23f8f8f668fdca">handleBackupNeighbors</a>(vastListMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a3a95ef902bc659901cceef98e0bc8041">PING</a>: {
                        <a class="code" href="classVast.html#a1361682de85c7ecc63476b0a9db712f0">handlePing</a>(vastMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607ae911a27de4bca30604be3515f31b2057">PONG</a>: {
                        <a class="code" href="classVast.html#a183cca07bd6ddceb33eebfba75bf1b80">handlePong</a>(vastMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607ad62d6ba53c9c3efbda433545708a79b5">DISCARD_NODE</a>: {
                        <a class="code" href="classVastDiscardMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastDiscardMessage</a>* vastDiscardMsg = check_and_cast&lt;<a class="code" href="classVastDiscardMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastDiscardMessage</a>*&gt;(msg);
                        <a class="code" href="classVast.html#ac8599f81539fdaee6cd4cfd5cca2b8f4">handleDiscardNode</a>(vastDiscardMsg);
                    } <span class="keywordflow">break</span>;
                    <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a0e3f3deef32a4742dc7a553c15c71f51">VAST_EVENT</a>: {
                        <a class="code" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a>(vastMsg-&gt;decapsulate());
                        doUpdate = <span class="keyword">false</span>;
                        <span class="keyword">delete</span> vastMsg;
                    } <span class="keywordflow">break</span>;
                }
                <span class="comment">// update timestamp</span>
                <span class="keywordflow">if</span>(doUpdate) {
                    SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());
                    <span class="keywordflow">if</span>(itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end()) {
                        itSites-&gt;second-&gt;tstamp = simTime();
                    }
                    <span class="keyword">delete</span> msg;
                }
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a> &amp;&amp; vastMsg-&gt;<a class="code" href="classVastMessage.html#a4faf79e8d3e56ae8b1007468d64f415e">getCommand</a>() == <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad2045a15ed8b82d3db379cc54ba0b7d4">JOIN_ACKNOWLEDGE</a>) {
                <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>* vastListMsg = check_and_cast&lt;<a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>*&gt;(msg);
                <a class="code" href="classVast.html#ae3f2d9c26130a6986478513bc281e080">handleJoinAcknowledge</a>(vastListMsg);
                <span class="keyword">delete</span> msg;
            }
            <span class="keywordflow">else</span> <span class="keyword">delete</span> msg;
        }
        <span class="keywordflow">else</span> {
            <a class="code" href="classVast.html#a23e724cfc93976442b57ed98c60b585d">sendDiscardNode</a>(vastMsg);
            <span class="keyword">delete</span> msg;
        }
    }
    <span class="keywordflow">else</span> <span class="keyword">delete</span> msg;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9146368d63151277c8442a17afe8d1d6"></a><!-- doxytag: member="Vast::initializeOverlay" ref="a9146368d63151277c8442a17afe8d1d6" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::initializeOverlay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes derived-class-attributes. </p>
<p><br/>
</p>
<p>Initializes derived-class-attributes, called by <a class="el" href="classBaseOverlay.html#a9738ba6065b0f699f1921bbe82ab97be" title="initializes base-class-attributes">BaseOverlay::initialize()</a>. By default this method is called once. If more stages are needed one can overload <a class="el" href="classBaseOverlay.html#a3234dfcf81463984e88a42432734a615" title="Sets init stage.">numInitStages()</a> and add more stages.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>the init stage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a41f88dfbea856a2b38319ff52c758c96">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00034">34</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// because of IPAddressResolver, we need to wait until interfaces are registered,</span>
    <span class="comment">// address auto-assignment takes place etc.</span>
    <span class="keywordflow">if</span>(stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a58e83c497c7c8495e9c592ff3148b6b9" title="first stage for overlay modules (Tier 0 / KBR)">MIN_STAGE_OVERLAY</a>) <span class="keywordflow">return</span>;

    <span class="comment">// fetch parameters</span>
    <a class="code" href="classVast.html#a9a5f4a33b22c8d78fef399b1041cb333">debugVoronoiOutput</a> = par(<span class="stringliteral">&quot;debugVastOutput&quot;</span>);
    <a class="code" href="classVast.html#afdc6b6327442ee54b2a92c930966aae6">areaDimension</a> = par(<span class="stringliteral">&quot;areaDimension&quot;</span>);
    <a class="code" href="classVast.html#a4720ff97b3ca3a6f53b9533f57a4fb56">AOI_size</a> = par(<span class="stringliteral">&quot;AOIWidth&quot;</span>);
    <a class="code" href="classVast.html#a2218f4c5c055326aeb59640acaf3b91c">joinTimeout</a> = par(<span class="stringliteral">&quot;joinTimeout&quot;</span>);
    <a class="code" href="classVast.html#ad79f8a786033cb62653286f8cc5015e5">pingTimeout</a> = par(<span class="stringliteral">&quot;pingTimeout&quot;</span>);
    <a class="code" href="classVast.html#a9b5faa39bdba0cbc3da3a588173e3c1f">discoveryIntervall</a> = par(<span class="stringliteral">&quot;discoveryIntervall&quot;</span>);
    <a class="code" href="classVast.html#a7cf9fae4a48173e8e28a117f568027fb">checkCriticalIntervall</a> = par(<span class="stringliteral">&quot;criticalCheckIntervall&quot;</span>);
    <a class="code" href="classVast.html#ab68ac286673ed0ae4e2e05215481d667">criticalThreshold</a> = par(<span class="stringliteral">&quot;criticalThreshold&quot;</span>);
    <a class="code" href="classVast.html#a4d00a0a50dd92e3d223b4f4599bc82c3">stockListSize</a> = par(<span class="stringliteral">&quot;stockListSize&quot;</span>);

    <span class="comment">// set node key</span>
    <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>(<a class="code" href="classOverlayKey.html#a1983e1b47e32783f8ccd5e59fe725290" title="Returns a random key.">OverlayKey::random</a>());
    <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a8285244e3eb082cd382c6971b56066a9">type</a> = <a class="code" href="VastDefs_8h.html#ac048bf3907733b6148c78e7345a30525">THIS</a>;
    <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a> = <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>;

    <a class="code" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">geom</a>.<a class="code" href="classGeometry.html#aaac2706d430cac4882368a42993f42c9">setDebug</a>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>);

    <span class="comment">// self-messages</span>
    <a class="code" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">join_timer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;join_timer&quot;</span>);
    <a class="code" href="classVast.html#a34548c8fe764d86196e99f3bd8d5b793">ping_timer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;ping_timer&quot;</span>);
    <a class="code" href="classVast.html#aff47bd08fb10c41ec16862934b098a4b">sec_timer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;sec_timer&quot;</span>);
    <a class="code" href="classVast.html#a12f4439d33e9d3f8928c5cc81f36a141">discovery_timer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;discovery_timer&quot;</span>);
    <a class="code" href="classVast.html#a6da2c953a461445f77d16764f3545e6e">checkcritical_timer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;checkcritical_timer&quot;</span>);

    <span class="comment">// statistics</span>
    <a class="code" href="classVast.html#a8cae35144fc3d3615ca900f4a5d016f5">joinRequestBytesSent</a> = 0;
    <a class="code" href="classVast.html#af1b66db4acda86bc53121f530ad3305f">joinAcknowledgeBytesSent</a> = 0;
    <a class="code" href="classVast.html#ae7e6d853f952734f8e1c41d5c3f82dd3">nodeMoveBytesSent</a> = 0;
    <a class="code" href="classVast.html#a0bb1c36ab41d09526a7b54433b2a1f54">newNeighborsBytesSent</a> = 0;
    <a class="code" href="classVast.html#aec8877ef5725ece7aa4f1e7dc6ec47c6">nodeLeaveBytesSent</a> = 0;
    <a class="code" href="classVast.html#a42fa22094150446e8b0d2e2e2c58ef02">enclosingNeighborsRequestBytesSent</a> = 0;
    <a class="code" href="classVast.html#afea7ca8faed771a898b0daa3cffafeeb">pingBytesSent</a> = 0;
    <a class="code" href="classVast.html#af8a09f477664314710211ec69de5944f">pongBytesSent</a> = 0;
    <a class="code" href="classVast.html#a53543eccb1be540b3d7875cf0cdd0b52">discardNodeBytesSent</a> = 0;
    <a class="code" href="classVast.html#a44a0e59077adea2a2c3d09a39ce6597e">backupBytesSent</a> = 0;

    <a class="code" href="classVast.html#aea94419d8d7589930d1b2e1b4de0468d">maxBytesPerSecondSent</a> = 0;
    <a class="code" href="classVast.html#a90f9ed7d27fee143970e838e2a7bea15">averageBytesPerSecondSent</a> = 0;
    <a class="code" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a> = 0;
    <a class="code" href="classVast.html#a120c3c82cafcab0a237fe080e71a4862">secTimerCount</a> = 0;

    <span class="comment">// watch some variables</span>
    WATCH(<a class="code" href="classVast.html#a4720ff97b3ca3a6f53b9533f57a4fb56">AOI_size</a>);
    WATCH(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>);
    WATCH_MAP(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>);
    WATCH_SET(<a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>);

    WATCH(<a class="code" href="classVast.html#a8cae35144fc3d3615ca900f4a5d016f5">joinRequestBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#af1b66db4acda86bc53121f530ad3305f">joinAcknowledgeBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#ae7e6d853f952734f8e1c41d5c3f82dd3">nodeMoveBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#a0bb1c36ab41d09526a7b54433b2a1f54">newNeighborsBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#aec8877ef5725ece7aa4f1e7dc6ec47c6">nodeLeaveBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#a42fa22094150446e8b0d2e2e2c58ef02">enclosingNeighborsRequestBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#afea7ca8faed771a898b0daa3cffafeeb">pingBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#af8a09f477664314710211ec69de5944f">pongBytesSent</a>);
    WATCH(<a class="code" href="classVast.html#a53543eccb1be540b3d7875cf0cdd0b52">discardNodeBytesSent</a>);

    WATCH(<a class="code" href="classVast.html#aea94419d8d7589930d1b2e1b4de0468d">maxBytesPerSecondSent</a>);
    WATCH(<a class="code" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a>);

    <span class="comment">// set initial state</span>
    <a class="code" href="classVast.html#a9f49980680ed52219a6ef0a1bcff412b">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>);
    <a class="code" href="classVast.html#a9f49980680ed52219a6ef0a1bcff412b">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1297368d6e59e3d9528b082f5ec043f4"></a><!-- doxytag: member="Vast::processCheckCriticalTimer" ref="a1297368d6e59e3d9528b082f5ec043f4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::processCheckCriticalTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00678">678</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">double</span> NeighborLevel;
    <span class="keywordtype">int</span> NeighborSum = 0;
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <span class="keywordflow">if</span>(itSites-&gt;second-&gt;neighborCount &gt; 0) {
            NeighborSum += itSites-&gt;second-&gt;neighborCount;
        }
    }
    NeighborLevel = (double)(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size() * <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size()) / (<span class="keywordtype">double</span>)NeighborSum;

    <span class="keywordflow">if</span>(NeighborLevel &lt; <a class="code" href="classVast.html#ab68ac286673ed0ae4e2e05215481d667">criticalThreshold</a>) {
        <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a> *vastListMsg = <span class="keyword">new</span> <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>(<span class="stringliteral">&quot;BACKUP_NEIGHBORS&quot;</span>);
        vastListMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a7157cf88037067097b25279589eec51c">BACKUP_NEIGHBORS</a>);
        <span class="comment">// fill neighbors list</span>
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#a51421ae8e810c22b4395f0335e6a22b5">setNeighborNodeArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
        vastListMsg-&gt;<a class="code" href="classVastListMessage.html#acdf513aff66a23092146597c5904d72e">setNeighborPosArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
        <span class="keywordtype">int</span> i = 0;
        <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
            vastListMsg-&gt;<a class="code" href="classVastListMessage.html#af9ed6e564bae28c51b19cf3004a83325">setNeighborNode</a>(i, itSites-&gt;second-&gt;addr);
            vastListMsg-&gt;<a class="code" href="classVastListMessage.html#ad6718fb26bb003fbf87c6be6c2ecfae5">setNeighborPos</a>(i, itSites-&gt;second-&gt;coord);
            ++i;
        }
        vastListMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#afd61f02ed0c547b46d3376a4e4e7dc1c">VASTLIST_L</a>(vastListMsg));
        <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
            <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a> *vastCopyMsg = <span class="keyword">new</span> <a class="code" href="classVastListMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastListMessage</a>(*vastListMsg);
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                <a class="code" href="classVast.html#a44a0e59077adea2a2c3d09a39ce6597e">backupBytesSent</a> += vastCopyMsg-&gt;getByteLength();
            );
            <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastCopyMsg, itSites-&gt;second-&gt;addr);
        }
        <span class="keyword">delete</span> vastListMsg;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e41736afd958b63b754c0bcc425cbfe"></a><!-- doxytag: member="Vast::processDiscoveryTimer" ref="a3e41736afd958b63b754c0bcc425cbfe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::processDiscoveryTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00713">713</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span>(StockList::iterator itStock = <a class="code" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a>.begin(); itStock != <a class="code" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Stock</a>.end(); ++itStock) {
        <a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a> *vastMoveMsg = <span class="keyword">new</span> <a class="code" href="classVastMoveMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMoveMessage</a>(<span class="stringliteral">&quot;NODE_MOVE&quot;</span>);
        vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad9745223990da14f545a02e12e727b63">NODE_MOVE</a>);
        vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#ade518f3540a8184ae1a27b262c766ea2">setNewPos</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>);
        vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#a1c51279c4d9653e8753a61d4a67883f8">setRequest_list</a>(<span class="keyword">true</span>);
        vastMoveMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#a865e3b42837bb08abf934321cf8ea6a7">VASTMOVE_L</a>(vastMoveMsg));
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
            <a class="code" href="classVast.html#a44a0e59077adea2a2c3d09a39ce6597e">backupBytesSent</a> += vastMoveMsg-&gt;getByteLength();
        );
        <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMoveMsg, *itStock);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa54887a2c280267a9a401e50c240f6d5"></a><!-- doxytag: member="Vast::processJoinTimer" ref="aa54887a2c280267a9a401e50c240f6d5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::processJoinTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00618">618</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classGameAPIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIMessage</a> *sgcMsg = <span class="keyword">new</span> <a class="code" href="classGameAPIMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIMessage</a>(<span class="stringliteral">&quot;MOVEMENT_REQUEST&quot;</span>);
    sgcMsg-&gt;<a class="code" href="classGameAPIMessage.html#a3fe3071c66623191477b903527280ddc">setCommand</a>(<a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6baebd21087dd4fccf5bea6d56c351f76d1">MOVEMENT_REQUEST</a>);
    <a class="code" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a>(sgcMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="af30893315b517cde6403ebf5a0aca8af"></a><!-- doxytag: member="Vast::processPingTimer" ref="af30893315b517cde6403ebf5a0aca8af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::processPingTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00625">625</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> abnormalLeave = <span class="keyword">false</span>;
    <span class="keywordtype">bool</span> boundaryLeave = <span class="keyword">false</span>;
    std::set&lt;NodeHandle&gt; removeSet;
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <span class="keywordflow">if</span>(itSites-&gt;second-&gt;tstamp &lt; 0.0) { <span class="comment">// node is dropped cause no pong has been received see below</span>
            abnormalLeave = <span class="keyword">true</span>;
            <span class="keywordflow">if</span>(!(itSites-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#ac37458b05fa7ffc23c7d126c12990a7c">NEIGHBOR</a>)) boundaryLeave = <span class="keyword">true</span>;
            itSites-&gt;second-&gt;type = <a class="code" href="VastDefs_8h.html#abde25a67f4046530ae1c572cefeb5869">UNDEF</a>;
            removeSet.insert( itSites-&gt;first );
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(itSites-&gt;second-&gt;tstamp &lt; simTime() - <a class="code" href="classVast.html#ad79f8a786033cb62653286f8cc5015e5">pingTimeout</a>) { <span class="comment">// node showed no activity for some time request pong and mark it to be dropped next time</span>
            <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a> *vastMsg = <span class="keyword">new</span> <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a>(<span class="stringliteral">&quot;PING&quot;</span>);
            vastMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a3a95ef902bc659901cceef98e0bc8041">PING</a>);
            vastMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#ab6942347876cb4befb4da670eb90871f">VAST_L</a>(vastMsg));
            <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMsg, itSites-&gt;second-&gt;addr);
            itSites-&gt;second-&gt;tstamp = -1.0;
        }
    }
    <span class="keywordflow">if</span>(abnormalLeave) {
        <a class="code" href="classVast.html#afe368cd0468509b32f40acfc196a1856">synchronizeApp</a>();
        <span class="keywordflow">for</span>( std::set&lt;NodeHandle&gt;::iterator it = removeSet.begin(); it != removeSet.end(); ++it) {
            <a class="code" href="classVast.html#a3e7c0afd3098cc61ede525a6a59fb71f">removeNode</a>( *it );
        }
        <span class="comment">// removeNeighbors();</span>
        <span class="keywordflow">if</span>(boundaryLeave) {
            <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
                <span class="keywordflow">if</span>(itSites-&gt;second-&gt;type &amp; <a class="code" href="VastDefs_8h.html#a985bae7b67bcb96c5565a24a5f6d4cba">BOUNDARY</a>) {
                    <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a> *vastMsg = <span class="keyword">new</span> <a class="code" href="classVastMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastMessage</a>(<span class="stringliteral">&quot;ENCLOSING_NEIGHBORS_REQUEST&quot;</span>);
                    vastMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a328174aefc34e2aa1577e73ca6e0eb70">ENCLOSING_NEIGHBORS_REQUEST</a>);
                    vastMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#ab6942347876cb4befb4da670eb90871f">VAST_L</a>(vastMsg));
                    <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastMsg, itSites-&gt;second-&gt;addr);
                }
            }
        }
        <span class="comment">//buildVoronoi();</span>
        <span class="comment">//removeNeighbors(); should be superfluous</span>
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0eadb10fa255a3a2b89b1296d87be07d"></a><!-- doxytag: member="Vast::processSecTimer" ref="a0eadb10fa255a3a2b89b1296d87be07d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::processSecTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00666">666</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
        <span class="keywordflow">if</span>(<a class="code" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a> &gt; <a class="code" href="classVast.html#aea94419d8d7589930d1b2e1b4de0468d">maxBytesPerSecondSent</a>) {
            <a class="code" href="classVast.html#aea94419d8d7589930d1b2e1b4de0468d">maxBytesPerSecondSent</a> = <a class="code" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a>;
        }
        <a class="code" href="classVast.html#a90f9ed7d27fee143970e838e2a7bea15">averageBytesPerSecondSent</a> += <a class="code" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a>;
        ++<a class="code" href="classVast.html#a120c3c82cafcab0a237fe080e71a4862">secTimerCount</a>;
    );
    <a class="code" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a> = 0;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac0eb8a31568b3fbec02f6251e7d05e46"></a><!-- doxytag: member="Vast::removeNeighbors" ref="ac0eb8a31568b3fbec02f6251e7d05e46" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::removeNeighbors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00550">550</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end();) {
        <span class="comment">// if current site is no neighbor remove it else go on to next site</span>
        <span class="keywordflow">if</span>(itSites-&gt;second-&gt;type == <a class="code" href="VastDefs_8h.html#abde25a67f4046530ae1c572cefeb5869">UNDEF</a>) {
            <span class="comment">// Debug output</span>
            <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>)  EV &lt;&lt; <span class="stringliteral">&quot;[NeighborsList::removeNeighbors()]\n&quot;</span>
                                &lt;&lt; <span class="stringliteral">&quot;    Site at [&quot;</span> &lt;&lt; itSites-&gt;second-&gt;coord.x &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; itSites-&gt;second-&gt;coord.y
                                &lt;&lt; <span class="stringliteral">&quot;] has been removed from list.&quot;</span>
                                &lt;&lt; endl;
            <a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.erase(itSites-&gt;second-&gt;coord);
            <span class="keyword">delete</span> itSites-&gt;second;
            <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.erase(itSites++);
        }
        <span class="keywordflow">else</span> ++itSites;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3e7c0afd3098cc61ede525a6a59fb71f"></a><!-- doxytag: member="Vast::removeNode" ref="a3e7c0afd3098cc61ede525a6a59fb71f" args="(NodeHandle node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::removeNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l00353">353</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01003">handleDiscardNode()</a>, <a class="el" href="Vast_8cc_source.html#l00933">handleNodeLeave()</a>, and <a class="el" href="Vast_8cc_source.html#l00625">processPingTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(node);
    <span class="keywordflow">if</span>(itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end()) {
        <a class="code" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Positions</a>.erase(itSites-&gt;second-&gt;coord);
        <span class="keyword">delete</span> itSites-&gt;second;
        <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.erase(itSites);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a23e724cfc93976442b57ed98c60b585d"></a><!-- doxytag: member="Vast::sendDiscardNode" ref="a23e724cfc93976442b57ed98c60b585d" args="(VastMessage *vastMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::sendDiscardNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMessage.html">VastMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMsg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01013">1013</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> discardNode;
    discardNode.<a class="code" href="classTransportAddress.html#a1c7b834dc2e6e738f1f4db8711a12814" title="Sets the ip address, port and NAT type.">setIp</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>());
    discardNode.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>(vastMsg-&gt;<a class="code" href="classVastMessage.html#a9c9cdb5c0fbbdc0835ec81958c149a42">getDestKey</a>());
    <span class="comment">// send message</span>
    <a class="code" href="classVastDiscardMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastDiscardMessage</a> *vastDiscardMsg = <span class="keyword">new</span> <a class="code" href="classVastDiscardMessage.html" title="Class generated from overlay/vast/Vast.msg by opp_msgc.">VastDiscardMessage</a>(<span class="stringliteral">&quot;DISCARD_NODE&quot;</span>);
    vastDiscardMsg-&gt;<a class="code" href="classVastMessage.html#a7c59b275d01a0efea1adc8f0e431ce30">setCommand</a>(<a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607ad62d6ba53c9c3efbda433545708a79b5">DISCARD_NODE</a>);
    vastDiscardMsg-&gt;<a class="code" href="classVastDiscardMessage.html#a730a57591e34bea66551aac9f3b2b592">setDiscardNode</a>(discardNode);
    <span class="comment">// debug output</span>
    <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) EV &lt;&lt; <span class="stringliteral">&quot;[Vast::sendDiscardNode() @ &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Node &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot; is leaving the overlay.&quot;</span>
                       &lt;&lt; endl;
    vastDiscardMsg-&gt;setBitLength(<a class="code" href="Vast__m_8h.html#afd16ed69aea89cb14af62cfcf3ebaf64">VASTDISCARD_L</a>(vastDiscardMsg));
    <a class="code" href="classVast.html#a746611132de4dcbba0ece46cf75798b6">sendMessage</a>(vastDiscardMsg, vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a746611132de4dcbba0ece46cf75798b6"></a><!-- doxytag: member="Vast::sendMessage" ref="a746611132de4dcbba0ece46cf75798b6" args="(VastMessage *vastMsg, NodeHandle destAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::sendMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMessage.html">VastMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&#160;</td>
          <td class="paramname"><em>destAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01085">1085</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00946">handleEnclosingNeighborsRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00771">handleEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00728">handleJoin()</a>, <a class="el" href="Vast_8cc_source.html#l00834">handleJoinAcknowledge()</a>, <a class="el" href="Vast_8cc_source.html#l00783">handleJoinRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>, <a class="el" href="Vast_8cc_source.html#l00914">handleNewNeighbors()</a>, <a class="el" href="Vast_8cc_source.html#l00586">handleNodeGracefulLeaveNotification()</a>, <a class="el" href="Vast_8cc_source.html#l00859">handleNodeMove()</a>, <a class="el" href="Vast_8cc_source.html#l00985">handlePing()</a>, <a class="el" href="Vast_8cc_source.html#l00678">processCheckCriticalTimer()</a>, <a class="el" href="Vast_8cc_source.html#l00713">processDiscoveryTimer()</a>, <a class="el" href="Vast_8cc_source.html#l00625">processPingTimer()</a>, and <a class="el" href="Vast_8cc_source.html#l01013">sendDiscardNode()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// collect statistics</span>
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
        <span class="keywordflow">switch</span>(vastMsg-&gt;<a class="code" href="classVastMessage.html#a4faf79e8d3e56ae8b1007468d64f415e">getCommand</a>()) {
            <span class="keywordflow">case</span> <a class="code" href="GiaMessage__m_8h.html#ac712f468e66678ffb5df03be6d6a8157a71fec090ff88ece51771bbbf434064ec">JOIN_REQUEST</a>: {
                <a class="code" href="classVast.html#a8cae35144fc3d3615ca900f4a5d016f5">joinRequestBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad2045a15ed8b82d3db379cc54ba0b7d4">JOIN_ACKNOWLEDGE</a>: {
                <a class="code" href="classVast.html#af1b66db4acda86bc53121f530ad3305f">joinAcknowledgeBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fad9745223990da14f545a02e12e727b63">NODE_MOVE</a>: {
                <a class="code" href="classVast.html#ae7e6d853f952734f8e1c41d5c3f82dd3">nodeMoveBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fa3aafac4a63883acb0402e9a5dcae8110">NEW_NEIGHBORS</a>: {
                <a class="code" href="classVast.html#a0bb1c36ab41d09526a7b54433b2a1f54">newNeighborsBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Quon__m_8h.html#af6ba389f08ae3248fdcdcbcf600ea41fac2f6b0a84b96ac134911c0d532a4a91c">NODE_LEAVE</a>: {
                <a class="code" href="classVast.html#aec8877ef5725ece7aa4f1e7dc6ec47c6">nodeLeaveBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a328174aefc34e2aa1577e73ca6e0eb70">ENCLOSING_NEIGHBORS_REQUEST</a>: {
                <a class="code" href="classVast.html#a42fa22094150446e8b0d2e2e2c58ef02">enclosingNeighborsRequestBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607a3a95ef902bc659901cceef98e0bc8041">PING</a>: {
                <a class="code" href="classVast.html#afea7ca8faed771a898b0daa3cffafeeb">pingBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607ae911a27de4bca30604be3515f31b2057">PONG</a>: {
                <a class="code" href="classVast.html#af8a09f477664314710211ec69de5944f">pongBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
            <span class="keywordflow">case</span> <a class="code" href="Vast__m_8h.html#affe4c21be5de8586938eff67f154b607ad62d6ba53c9c3efbda433545708a79b5">DISCARD_NODE</a>: {
                <a class="code" href="classVast.html#a53543eccb1be540b3d7875cf0cdd0b52">discardNodeBytesSent</a> += vastMsg-&gt;getByteLength();
            } <span class="keywordflow">break</span>;
        }
        <a class="code" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">bytesPerSecond</a> += vastMsg-&gt;getByteLength();
    );

    <span class="comment">// debug output</span>
    <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) EV &lt;&lt; <span class="stringliteral">&quot;[Vast::sendMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Node &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot; sending &quot;</span> &lt;&lt; vastMsg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; destAddr.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot;.&quot;</span>
                       &lt;&lt; endl;
    <span class="comment">// set vastbase message stuff</span>
    vastMsg-&gt;<a class="code" href="classVastMessage.html#a1261e60d2cbc669d27607799d3bf4868">setDestKey</a>(destAddr.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>());
    <span class="comment">// fill in sender information only if we are not forwarding a message from another node</span>
    <span class="comment">// e.g. a joining node</span>
    <span class="keywordflow">if</span>(vastMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>().<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>()) {
        vastMsg-&gt;<a class="code" href="classVastMessage.html#ae853c47373a57c41d20898dd80702b29">setSourceNode</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>);
        vastMsg-&gt;<a class="code" href="classVastMessage.html#a9428a4970412386808b252320f7edbc0">setPos</a>(<a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a47f1f719668ba23a61049c2178fd4226">coord</a>);
        vastMsg-&gt;<a class="code" href="classVastMessage.html#ab19b7ac43edc311698af211d2a6254fc">setNeighborCount</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
    }

    <a class="code" href="classBaseOverlay.html#a10189697bd95f3de66c27c1ecf07e323" title="Sends message to underlay.">sendMessageToUDP</a>(destAddr, vastMsg);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad3da9d482e3f5e50e0555cb561805320"></a><!-- doxytag: member="Vast::sendToApp" ref="ad3da9d482e3f5e50e0555cb561805320" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::sendToApp </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01075">1075</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>, <a class="el" href="Vast_8cc_source.html#l00568">handleNodeLeaveNotification()</a>, <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00618">processJoinTimer()</a>, and <a class="el" href="Vast_8cc_source.html#l01031">synchronizeApp()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// debug output</span>
    <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) EV &lt;&lt; <span class="stringliteral">&quot;[Vast::sendToApp() @ &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
                       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
                       &lt;&lt; <span class="stringliteral">&quot;    Node &quot;</span> &lt;&lt; <a class="code" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">thisSite</a>.<a class="code" href="classSite.html#a00aa6ee527770673220a97dd7bff3c4a">addr</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>() &lt;&lt; <span class="stringliteral">&quot; sending &quot;</span> &lt;&lt; msg-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; to application.&quot;</span>
                       &lt;&lt; endl;
    send(msg, <span class="stringliteral">&quot;appOut&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1bfee43b8a5cde362b7ff137f3597c78"></a><!-- doxytag: member="Vast::setBootstrapedIcon" ref="a1bfee43b8a5cde362b7ff137f3597c78" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::setBootstrapedIcon </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01139">1139</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>(ev.isGUI()) {
        <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) {
            getParentModule()-&gt;getParentModule()-&gt;getDisplayString().setTagArg(<span class="stringliteral">&quot;i2&quot;</span>, 1, <span class="stringliteral">&quot;green&quot;</span>);
            getDisplayString().setTagArg(<span class="stringliteral">&quot;i&quot;</span>, 1, <span class="stringliteral">&quot;green&quot;</span>);
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>) {
            getParentModule()-&gt;getParentModule()-&gt;getDisplayString().setTagArg(<span class="stringliteral">&quot;i2&quot;</span>, 1, <span class="stringliteral">&quot;yellow&quot;</span>);
            getDisplayString().setTagArg(<span class="stringliteral">&quot;i&quot;</span>, 1, <span class="stringliteral">&quot;yellow&quot;</span>);
        }
        <span class="keywordflow">else</span> {
            getParentModule()-&gt;getParentModule()-&gt;getDisplayString().setTagArg(<span class="stringliteral">&quot;i2&quot;</span>, 1, <span class="stringliteral">&quot;red&quot;</span>);
            getDisplayString().setTagArg(<span class="stringliteral">&quot;i&quot;</span>, 1, <span class="stringliteral">&quot;red&quot;</span>);
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="afe368cd0468509b32f40acfc196a1856"></a><!-- doxytag: member="Vast::synchronizeApp" ref="afe368cd0468509b32f40acfc196a1856" args="(VastMoveMessage *vastMoveMsg=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vast::synchronizeApp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVastMoveMessage.html">VastMoveMessage</a> *&#160;</td>
          <td class="paramname"><em>vastMoveMsg</em> = <code>NULL</code></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8cc_source.html#l01031">1031</a> of file <a class="el" href="Vast_8cc_source.html">Vast.cc</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00834">handleJoinAcknowledge()</a>, <a class="el" href="Vast_8cc_source.html#l00783">handleJoinRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>, <a class="el" href="Vast_8cc_source.html#l00859">handleNodeMove()</a>, and <a class="el" href="Vast_8cc_source.html#l00625">processPingTimer()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classGameAPIListMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIListMessage</a> *sgcMsg = <span class="keyword">new</span> <a class="code" href="classGameAPIListMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">GameAPIListMessage</a>(<span class="stringliteral">&quot;NEIGHBOR_UPDATE&quot;</span>);
    sgcMsg-&gt;<a class="code" href="classGameAPIMessage.html#a3fe3071c66623191477b903527280ddc">setCommand</a>(<a class="code" href="CommonMessages__m_8h.html#ac76e82bc37e4b2b364247c7cff8f7b6ba360dbdf5c7f61a4d26263e2a010057d7">NEIGHBOR_UPDATE</a>);

    sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a6cc71a3065a72e5636753f4e0904ad38">setRemoveNeighborArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size());
    sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a6bac1604abbdf9c0ec959343b7b64834">setAddNeighborArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size() + 1);
    sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a81292ede7c0903f5982efcc7625024f1">setNeighborPositionArraySize</a>(<a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.size() + 1);

    <span class="keywordtype">int</span> remSize, addSize;
    remSize = addSize = 0;
    <span class="keywordflow">for</span>(SiteMap::iterator itSites = <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.begin(); itSites != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end(); ++itSites) {
        <span class="keywordflow">if</span>(itSites-&gt;second-&gt;type == <a class="code" href="VastDefs_8h.html#abde25a67f4046530ae1c572cefeb5869">UNDEF</a>) {
            sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a8b48a0c0f6661b7adf07221130be2685">setRemoveNeighbor</a>(remSize, itSites-&gt;second-&gt;addr);
            ++remSize;
        }
        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!itSites-&gt;second-&gt;isAdded) {
            sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a6fdd2736b4eaabac3e90a623f0e8e130">setAddNeighbor</a>(addSize, itSites-&gt;second-&gt;addr);
            sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#ad91052c0577545e987bf5b08244ece9e">setNeighborPosition</a>(addSize, itSites-&gt;second-&gt;coord);
            itSites-&gt;second-&gt;isAdded = <span class="keyword">true</span>;
            ++addSize;
        }
    }

    <span class="keywordflow">if</span>(vastMoveMsg &amp;&amp;
       <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>()) != <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.end() &amp;&amp;
       <a class="code" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Sites</a>.find(vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>())-&gt;second-&gt;isAdded) {
        sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a6fdd2736b4eaabac3e90a623f0e8e130">setAddNeighbor</a>(addSize, vastMoveMsg-&gt;<a class="code" href="classVastMessage.html#a39ede7a350c6cb596d2042bb95f36c59">getSourceNode</a>());
        sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#ad91052c0577545e987bf5b08244ece9e">setNeighborPosition</a>(addSize, vastMoveMsg-&gt;<a class="code" href="classVastMoveMessage.html#a6b79e923f8cf72150b2b59e5c0f2a59c">getNewPos</a>());
        ++addSize;
    }

    sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a6cc71a3065a72e5636753f4e0904ad38">setRemoveNeighborArraySize</a>(remSize);
    sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a6bac1604abbdf9c0ec959343b7b64834">setAddNeighborArraySize</a>(addSize);
    sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#a81292ede7c0903f5982efcc7625024f1">setNeighborPositionArraySize</a>(addSize);

    <span class="keywordflow">if</span>(sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#ae59494fd094b6d8c365675aacc7b680b">getAddNeighborArraySize</a>() || sgcMsg-&gt;<a class="code" href="classGameAPIListMessage.html#acf76a431085300d7ee4ba9f32f63d4e9">getRemoveNeighborArraySize</a>()) {
        <a class="code" href="classVast.html#ad3da9d482e3f5e50e0555cb561805320">sendToApp</a>(sgcMsg);
    }
    <span class="keywordflow">else</span> {
        <span class="keyword">delete</span> sgcMsg;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a4720ff97b3ca3a6f53b9533f57a4fb56"></a><!-- doxytag: member="Vast::AOI_size" ref="a4720ff97b3ca3a6f53b9533f57a4fb56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classVast.html#a4720ff97b3ca3a6f53b9533f57a4fb56">Vast::AOI_size</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00064">64</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00363">buildVoronoi()</a>, <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l01181">getAOI()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="afdc6b6327442ee54b2a92c930966aae6"></a><!-- doxytag: member="Vast::areaDimension" ref="afdc6b6327442ee54b2a92c930966aae6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classVast.html#afdc6b6327442ee54b2a92c930966aae6">Vast::areaDimension</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00065">65</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01199">getAreaDimension()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a90f9ed7d27fee143970e838e2a7bea15"></a><!-- doxytag: member="Vast::averageBytesPerSecondSent" ref="a90f9ed7d27fee143970e838e2a7bea15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#a90f9ed7d27fee143970e838e2a7bea15">Vast::averageBytesPerSecondSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00081">81</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l00666">processSecTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="a44a0e59077adea2a2c3d09a39ce6597e"></a><!-- doxytag: member="Vast::backupBytesSent" ref="a44a0e59077adea2a2c3d09a39ce6597e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#a44a0e59077adea2a2c3d09a39ce6597e">Vast::backupBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00079">79</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00859">handleNodeMove()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00678">processCheckCriticalTimer()</a>, and <a class="el" href="Vast_8cc_source.html#l00713">processDiscoveryTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="af30ae27611d3b281fb3a7f16b329f539"></a><!-- doxytag: member="Vast::bytesPerSecond" ref="af30ae27611d3b281fb3a7f16b329f539" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#af30ae27611d3b281fb3a7f16b329f539">Vast::bytesPerSecond</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00081">81</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00666">processSecTimer()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a6da2c953a461445f77d16764f3545e6e"></a><!-- doxytag: member="Vast::checkcritical_timer" ref="a6da2c953a461445f77d16764f3545e6e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classVast.html#a6da2c953a461445f77d16764f3545e6e">Vast::checkcritical_timer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00106">106</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01205">~Vast()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cf9fae4a48173e8e28a117f568027fb"></a><!-- doxytag: member="Vast::checkCriticalIntervall" ref="a7cf9fae4a48173e8e28a117f568027fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classVast.html#a7cf9fae4a48173e8e28a117f568027fb">Vast::checkCriticalIntervall</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00086">86</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="ab68ac286673ed0ae4e2e05215481d667"></a><!-- doxytag: member="Vast::criticalThreshold" ref="ab68ac286673ed0ae4e2e05215481d667" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classVast.html#ab68ac286673ed0ae4e2e05215481d667">Vast::criticalThreshold</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00087">87</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l00678">processCheckCriticalTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a5f4a33b22c8d78fef399b1041cb333"></a><!-- doxytag: member="Vast::debugVoronoiOutput" ref="a9a5f4a33b22c8d78fef399b1041cb333" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classVast.html#a9a5f4a33b22c8d78fef399b1041cb333">Vast::debugVoronoiOutput</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00085">85</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a53543eccb1be540b3d7875cf0cdd0b52"></a><!-- doxytag: member="Vast::discardNodeBytesSent" ref="a53543eccb1be540b3d7875cf0cdd0b52" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#a53543eccb1be540b3d7875cf0cdd0b52">Vast::discardNodeBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00078">78</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a12f4439d33e9d3f8928c5cc81f36a141"></a><!-- doxytag: member="Vast::discovery_timer" ref="a12f4439d33e9d3f8928c5cc81f36a141" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classVast.html#a12f4439d33e9d3f8928c5cc81f36a141">Vast::discovery_timer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00105">105</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01205">~Vast()</a>.</p>

</div>
</div>
<a class="anchor" id="a9b5faa39bdba0cbc3da3a588173e3c1f"></a><!-- doxytag: member="Vast::discoveryIntervall" ref="a9b5faa39bdba0cbc3da3a588173e3c1f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classVast.html#a9b5faa39bdba0cbc3da3a588173e3c1f">Vast::discoveryIntervall</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00086">86</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="afa2c209389e2a7e721c238336501971b"></a><!-- doxytag: member="Vast::edgelist" ref="afa2c209389e2a7e721c238336501971b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classEdgeList.html">EdgeList</a> <a class="el" href="classVast.html#afa2c209389e2a7e721c238336501971b">Vast::edgelist</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00092">92</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00363">buildVoronoi()</a>.</p>

</div>
</div>
<a class="anchor" id="a42fa22094150446e8b0d2e2e2c58ef02"></a><!-- doxytag: member="Vast::enclosingNeighborsRequestBytesSent" ref="a42fa22094150446e8b0d2e2e2c58ef02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#a42fa22094150446e8b0d2e2e2c58ef02">Vast::enclosingNeighborsRequestBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00075">75</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a74a56d4cdcb37e86d85a893696ba7780"></a><!-- doxytag: member="Vast::geom" ref="a74a56d4cdcb37e86d85a893696ba7780" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classGeometry.html">Geometry</a> <a class="el" href="classVast.html#a74a56d4cdcb37e86d85a893696ba7780">Vast::geom</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00091">91</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00363">buildVoronoi()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a8080d25da7c61e9d731f5d84779b7d8c"></a><!-- doxytag: member="Vast::heap" ref="a8080d25da7c61e9d731f5d84779b7d8c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classHeapPQ.html">HeapPQ</a> <a class="el" href="classVast.html#a8080d25da7c61e9d731f5d84779b7d8c">Vast::heap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00093">93</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00363">buildVoronoi()</a>.</p>

</div>
</div>
<a class="anchor" id="a5679f28e0a58927ef5e707f8eafd9473"></a><!-- doxytag: member="Vast::join_timer" ref="a5679f28e0a58927ef5e707f8eafd9473" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classVast.html#a5679f28e0a58927ef5e707f8eafd9473">Vast::join_timer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00103">103</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01205">~Vast()</a>.</p>

</div>
</div>
<a class="anchor" id="af1b66db4acda86bc53121f530ad3305f"></a><!-- doxytag: member="Vast::joinAcknowledgeBytesSent" ref="af1b66db4acda86bc53121f530ad3305f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#af1b66db4acda86bc53121f530ad3305f">Vast::joinAcknowledgeBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00071">71</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a8cae35144fc3d3615ca900f4a5d016f5"></a><!-- doxytag: member="Vast::joinRequestBytesSent" ref="a8cae35144fc3d3615ca900f4a5d016f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#a8cae35144fc3d3615ca900f4a5d016f5">Vast::joinRequestBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00070">70</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a2218f4c5c055326aeb59640acaf3b91c"></a><!-- doxytag: member="Vast::joinTimeout" ref="a2218f4c5c055326aeb59640acaf3b91c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classVast.html#a2218f4c5c055326aeb59640acaf3b91c">Vast::joinTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00086">86</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="aea94419d8d7589930d1b2e1b4de0468d"></a><!-- doxytag: member="Vast::maxBytesPerSecondSent" ref="aea94419d8d7589930d1b2e1b4de0468d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#aea94419d8d7589930d1b2e1b4de0468d">Vast::maxBytesPerSecondSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00081">81</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l00666">processSecTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bb1c36ab41d09526a7b54433b2a1f54"></a><!-- doxytag: member="Vast::newNeighborsBytesSent" ref="a0bb1c36ab41d09526a7b54433b2a1f54" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#a0bb1c36ab41d09526a7b54433b2a1f54">Vast::newNeighborsBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00073">73</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="aec8877ef5725ece7aa4f1e7dc6ec47c6"></a><!-- doxytag: member="Vast::nodeLeaveBytesSent" ref="aec8877ef5725ece7aa4f1e7dc6ec47c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#aec8877ef5725ece7aa4f1e7dc6ec47c6">Vast::nodeLeaveBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00074">74</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="ae7e6d853f952734f8e1c41d5c3f82dd3"></a><!-- doxytag: member="Vast::nodeMoveBytesSent" ref="ae7e6d853f952734f8e1c41d5c3f82dd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#ae7e6d853f952734f8e1c41d5c3f82dd3">Vast::nodeMoveBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00072">72</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a34548c8fe764d86196e99f3bd8d5b793"></a><!-- doxytag: member="Vast::ping_timer" ref="a34548c8fe764d86196e99f3bd8d5b793" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classVast.html#a34548c8fe764d86196e99f3bd8d5b793">Vast::ping_timer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00104">104</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01205">~Vast()</a>.</p>

</div>
</div>
<a class="anchor" id="afea7ca8faed771a898b0daa3cffafeeb"></a><!-- doxytag: member="Vast::pingBytesSent" ref="afea7ca8faed771a898b0daa3cffafeeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#afea7ca8faed771a898b0daa3cffafeeb">Vast::pingBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00076">76</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="ad79f8a786033cb62653286f8cc5015e5"></a><!-- doxytag: member="Vast::pingTimeout" ref="ad79f8a786033cb62653286f8cc5015e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classVast.html#ad79f8a786033cb62653286f8cc5015e5">Vast::pingTimeout</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00086">86</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l00625">processPingTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="af8a09f477664314710211ec69de5944f"></a><!-- doxytag: member="Vast::pongBytesSent" ref="af8a09f477664314710211ec69de5944f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classVast.html#af8a09f477664314710211ec69de5944f">Vast::pongBytesSent</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00077">77</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>.</p>

</div>
</div>
<a class="anchor" id="a72ef8a625cc4c37c0513fc842bd09470"></a><!-- doxytag: member="Vast::Positions" ref="a72ef8a625cc4c37c0513fc842bd09470" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="VastDefs_8h.html#aba713d0046c49fb23c12ac880a9eb8e8">PositionSet</a> <a class="el" href="classVast.html#a72ef8a625cc4c37c0513fc842bd09470">Vast::Positions</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00066">66</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00314">addNode()</a>, <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00550">removeNeighbors()</a>, <a class="el" href="Vast_8cc_source.html#l00353">removeNode()</a>, and <a class="el" href="Vast_8cc_source.html#l01205">~Vast()</a>.</p>

</div>
</div>
<a class="anchor" id="aff47bd08fb10c41ec16862934b098a4b"></a><!-- doxytag: member="Vast::sec_timer" ref="aff47bd08fb10c41ec16862934b098a4b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classVast.html#aff47bd08fb10c41ec16862934b098a4b">Vast::sec_timer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00107">107</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l00158">handleTimerEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l01205">~Vast()</a>.</p>

</div>
</div>
<a class="anchor" id="a120c3c82cafcab0a237fe080e71a4862"></a><!-- doxytag: member="Vast::secTimerCount" ref="a120c3c82cafcab0a237fe080e71a4862" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="classVast.html#a120c3c82cafcab0a237fe080e71a4862">Vast::secTimerCount</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00082">82</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, and <a class="el" href="Vast_8cc_source.html#l00666">processSecTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="aa91c3bc67b42ddb46d9ff6ff0dc9aaf7"></a><!-- doxytag: member="Vast::Sites" ref="aa91c3bc67b42ddb46d9ff6ff0dc9aaf7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="VastDefs_8h.html#ad41236870dd150736adba869c442c2c5">SiteMap</a> <a class="el" href="classVast.html#aa91c3bc67b42ddb46d9ff6ff0dc9aaf7">Vast::Sites</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00059">59</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00314">addNode()</a>, <a class="el" href="Vast_8cc_source.html#l00363">buildVoronoi()</a>, <a class="el" href="ConnectivityProbe_8cc_source.html#l00278">ConnectivityProbe::getComponentSize()</a>, <a class="el" href="Vast_8cc_source.html#l00975">handleBackupNeighbors()</a>, <a class="el" href="Vast_8cc_source.html#l00946">handleEnclosingNeighborsRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00771">handleEvent()</a>, <a class="el" href="Vast_8cc_source.html#l00834">handleJoinAcknowledge()</a>, <a class="el" href="Vast_8cc_source.html#l00783">handleJoinRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>, <a class="el" href="Vast_8cc_source.html#l00586">handleNodeGracefulLeaveNotification()</a>, <a class="el" href="Vast_8cc_source.html#l00859">handleNodeMove()</a>, <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00678">processCheckCriticalTimer()</a>, <a class="el" href="Vast_8cc_source.html#l00625">processPingTimer()</a>, <a class="el" href="Vast_8cc_source.html#l00550">removeNeighbors()</a>, <a class="el" href="Vast_8cc_source.html#l00353">removeNode()</a>, <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>, <a class="el" href="Vast_8cc_source.html#l01031">synchronizeApp()</a>, and <a class="el" href="Vast_8cc_source.html#l01205">~Vast()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b80c395388f7cc10a7a084bac6157e7"></a><!-- doxytag: member="Vast::Stock" ref="a1b80c395388f7cc10a7a084bac6157e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="VastDefs_8h.html#aad88cf774ac0f22b8d7d61dc28589662">StockList</a> <a class="el" href="classVast.html#a1b80c395388f7cc10a7a084bac6157e7">Vast::Stock</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00067">67</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00338">addNodeToStock()</a>, and <a class="el" href="Vast_8cc_source.html#l00713">processDiscoveryTimer()</a>.</p>

</div>
</div>
<a class="anchor" id="a4d00a0a50dd92e3d223b4f4599bc82c3"></a><!-- doxytag: member="Vast::stockListSize" ref="a4d00a0a50dd92e3d223b4f4599bc82c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long <a class="el" href="classVast.html#a4d00a0a50dd92e3d223b4f4599bc82c3">Vast::stockListSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00088">88</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00338">addNodeToStock()</a>, and <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a6cc5cbcb1af32443b0ed007af8937073"></a><!-- doxytag: member="Vast::thisSite" ref="a6cc5cbcb1af32443b0ed007af8937073" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSite.html">Site</a> <a class="el" href="classVast.html#a6cc5cbcb1af32443b0ed007af8937073">Vast::thisSite</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Vast_8h_source.html#l00060">60</a> of file <a class="el" href="Vast_8h_source.html">Vast.h</a>.</p>

<p>Referenced by <a class="el" href="Vast_8cc_source.html#l00314">addNode()</a>, <a class="el" href="Vast_8cc_source.html#l00338">addNodeToStock()</a>, <a class="el" href="Vast_8cc_source.html#l00363">buildVoronoi()</a>, <a class="el" href="Vast_8cc_source.html#l00106">changeState()</a>, <a class="el" href="Vast_8cc_source.html#l01157">finishOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l01193">getHandle()</a>, <a class="el" href="Vast_8cc_source.html#l01187">getPosition()</a>, <a class="el" href="Vast_8cc_source.html#l00197">handleAppMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00728">handleJoin()</a>, <a class="el" href="Vast_8cc_source.html#l00834">handleJoinAcknowledge()</a>, <a class="el" href="Vast_8cc_source.html#l00783">handleJoinRequest()</a>, <a class="el" href="Vast_8cc_source.html#l00744">handleMove()</a>, <a class="el" href="Vast_8cc_source.html#l00568">handleNodeLeaveNotification()</a>, <a class="el" href="Vast_8cc_source.html#l00232">handleUDPMessage()</a>, <a class="el" href="Vast_8cc_source.html#l00034">initializeOverlay()</a>, <a class="el" href="Vast_8cc_source.html#l00713">processDiscoveryTimer()</a>, <a class="el" href="Vast_8cc_source.html#l01013">sendDiscardNode()</a>, <a class="el" href="Vast_8cc_source.html#l01085">sendMessage()</a>, and <a class="el" href="Vast_8cc_source.html#l01075">sendToApp()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Vast_8h_source.html">Vast.h</a></li>
<li><a class="el" href="Vast_8cc_source.html">Vast.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classVast.html">Vast</a>      </li>

    <li class="footer">Generated on Thu Mar 6 2014 14:07:04 for OverSim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>

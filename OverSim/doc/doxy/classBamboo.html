<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: Bamboo Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OverSim
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classBamboo.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">Bamboo Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Bamboo" --><!-- doxytag: inherits="BasePastry,LookupListener" -->
<p><a class="el" href="classBamboo.html" title="Bamboo overlay module.">Bamboo</a> overlay module.  
 <a href="classBamboo.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Bamboo:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBamboo.png" usemap="#Bamboo_map" alt=""/>
  <map id="Bamboo_map" name="Bamboo_map">
<area href="classBasePastry.html" alt="BasePastry" shape="rect" coords="172,168,277,192"/>
<area href="classLookupListener.html" title="This class declares an abstract lookup listener." alt="LookupListener" shape="rect" coords="287,168,392,192"/>
<area href="classBaseOverlay.html" title="Base class for overlays." alt="BaseOverlay" shape="rect" coords="115,112,220,136"/>
<area href="classProxListener.html" alt="ProxListener" shape="rect" coords="230,112,335,136"/>
<area href="classBaseRpc.html" title="Base class for RPCs." alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classTopologyVis.html" alt="TopologyVis" shape="rect" coords="230,56,335,80"/>
<area href="classRpcListener.html" title="A Remote-Procedure-Call listener class." alt="RpcListener" shape="rect" coords="0,0,105,24"/>
</map>
 </div></div>

<p><a href="classBamboo-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a8e2d71e2abf9ca5e7a1ddbbad5381757">~Bamboo</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a52bd33a4d9a8418e9027284cc74f72d1">initializeOverlay</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes derived-class-attributes.  <a href="#a52bd33a4d9a8418e9027284cc74f72d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a6d3f0705b1495c225432238094a38cea">handleTimerEvent</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a8efba5b237b7985672ea27dbe9d67bdd">handleRpcResponse</a> (<a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *msg, cPolymorphic *context, int rpcId, simtime_t rtt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is called if an RPC response has been received.  <a href="#a8efba5b237b7985672ea27dbe9d67bdd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a143d3d0fa491f4bd177b69a934182f90">handleRequestLeafSetResponse</a> (<a class="el" href="classRequestLeafSetResponse.html">RequestLeafSetResponse</a> *response)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#af7e2ea2c6f6d654980310005a230f6a3">handleStateMessage</a> (<a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">processes state messages, merging with own state tables  <a href="#af7e2ea2c6f6d654980310005a230f6a3"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a37816e3b77076881120a13606d836489">lookupFinished</a> (<a class="el" href="classAbstractLookup.html">AbstractLookup</a> *lookup)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#ae987647d2b516c6bcaa1c93257b6be3f">changeState</a> (int toState)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">changes node state  <a href="#ae987647d2b516c6bcaa1c93257b6be3f"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#ab28c657a75980f968defb032f4aa9002">doLeafsetMaintenance</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">periodically repairs the leafset by pushing it to and pulling it from from a random live leafset node  <a href="#ab28c657a75980f968defb032f4aa9002"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a7d9390f517830e44e35e3cd475730724">getNextRowToMaintain</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#acde8e02f731fe1a26a5c21d47ee84188">doLocalTuning</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#acc2e50c06119f74386cc083431f86675">doGlobalTuning</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">periodically repairs the routing table by performing random lookups  <a href="#acc2e50c06119f74386cc083431f86675"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#ac33bbf6ffd5a95bb730ce046f921a335">handleFailedNode</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;failed)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">notifies leafset and routingtable of a failed node and sends out a repair request if possible  <a href="#ac33bbf6ffd5a95bb730ce046f921a335"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a4efad1712615507ca730b86006513d9e">checkProxCache</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">checks whether proxCache is complete, takes appropriate actions depending on the protocol state  <a href="#a4efad1712615507ca730b86006513d9e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a1b8dba4c0d42b0dbf6b6b2a693c6dc29">joinOverlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Join the overlay with a given nodeID in thisNode.key.  <a href="#a1b8dba4c0d42b0dbf6b6b2a693c6dc29"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a06b850d5351d33617171bc92f26d88c8">rowToAsk</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a05f92ae31d195ee37d78f45ab7f5f5bb">leafsetMaintenanceInterval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a703829a0001a2396b500aff8eb823242">localTuningInterval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">simtime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a8a4593a1108a8d18b11799bbbe1c63dc">globalTuningInterval</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">leafsetMaintenanceTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">globalTuningTimer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">localTuningTimer</a></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBamboo.html#aefc36fb7b441daba48500acc1fec62d4">BambooLookupListener</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classBamboo.html" title="Bamboo overlay module.">Bamboo</a> overlay module. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Gerhard Petruschat </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classBaseOverlay.html" title="Base class for overlays.">BaseOverlay</a> </dd></dl>

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00053">53</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8e2d71e2abf9ca5e7a1ddbbad5381757"></a><!-- doxytag: member="Bamboo::~Bamboo" ref="a8e2d71e2abf9ca5e7a1ddbbad5381757" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bamboo::~Bamboo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00041">41</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// destroy self timer messages</span>
    cancelAndDelete(<a class="code" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">localTuningTimer</a>);
    cancelAndDelete(<a class="code" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">leafsetMaintenanceTimer</a>);
    cancelAndDelete(<a class="code" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">globalTuningTimer</a>);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae987647d2b516c6bcaa1c93257b6be3f"></a><!-- doxytag: member="Bamboo::changeState" ref="ae987647d2b516c6bcaa1c93257b6be3f" args="(int toState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::changeState </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>toState</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>changes node state </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">toState</td><td>state to change to </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBasePastry.html#ab9eeefa3a6a0dc3d56860a7d45bc585c">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00086">86</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00323">checkProxCache()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00072">joinOverlay()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBasePastry.html#a1f99c5e7da561015851b206abb4d0f59" title="changes node state, but leaves specific behavour, scheduling tasks in particular, to the inheriting p...">baseChangeState</a>(toState);

    <span class="keywordflow">switch</span> (toState) {
    <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>:
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa6f9e50300f12679850ddc29f15cdf37b">DISCOVERY</a>:
        <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>: {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::changeState()]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    sending join message via &quot;</span> &lt;&lt; <a class="code" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">bootstrapNode</a>
           &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>()
           &lt;&lt; endl;

        <a class="code" href="classRequestLeafSetCall.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">RequestLeafSetCall</a>* call = <span class="keyword">new</span> <a class="code" href="classRequestLeafSetCall.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">RequestLeafSetCall</a>(<span class="stringliteral">&quot;JOIN Call&quot;</span>);
        call-&gt;setTimestamp(simTime());
        call-&gt;<a class="code" href="classBaseOverlayMessage.html#a07301be10c346b328a0a9cc4cae48777">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);

        call-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#ae4a17bae7faeed6a6c46cac07ad68d8d">PASTRYREQUESTLEAFSETCALL_L</a>(call));
        call-&gt;encapsulate(<a class="code" href="classBasePastry.html#aa5351a4ba129681864f7b6e3d77e2962">createStateMessage</a>(<a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7acaf8b7f0f06bde65edd6fcc21c0fe74b">PASTRY_STATE_LEAFSET</a>));
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">leafsetReqSent</a>++;
                     <a class="code" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">leafsetReqBytesSent</a> += call-&gt;getByteLength());

        <a class="code" href="classBaseRpc.html#a816918e82652f724c291923e018eabe2" title="Routes a Remote-Procedure-Call message to an OverlayKey.">sendRouteRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5ead1b904580b02f8adaa1ab2de239c4c79">OVERLAY_COMP</a>, <a class="code" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">bootstrapNode</a>, <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>(), call);
    }

    <span class="keywordflow">break</span>;

    <span class="keywordflow">case</span> <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>:
        cancelEvent(<a class="code" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">leafsetMaintenanceTimer</a>);
        scheduleAt(simTime(), <a class="code" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">leafsetMaintenanceTimer</a>);

        <span class="comment">// schedule routing table maintenance task</span>
        cancelEvent(<a class="code" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">localTuningTimer</a>);
        scheduleAt(simTime() + <a class="code" href="classBamboo.html#a703829a0001a2396b500aff8eb823242">localTuningInterval</a>, <a class="code" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">localTuningTimer</a>);

        cancelEvent(<a class="code" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">globalTuningTimer</a>);
        scheduleAt(simTime() + <a class="code" href="classBamboo.html#a8a4593a1108a8d18b11799bbbe1c63dc">globalTuningInterval</a>, <a class="code" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">globalTuningTimer</a>);

        <span class="keywordflow">break</span>;
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4efad1712615507ca730b86006513d9e"></a><!-- doxytag: member="Bamboo::checkProxCache" ref="a4efad1712615507ca730b86006513d9e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::checkProxCache </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>checks whether proxCache is complete, takes appropriate actions depending on the protocol state </p>

<p>Implements <a class="el" href="classBasePastry.html#a1062cac20a1fd1c5368157fe2da8b8fb">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00323">323</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00377">handleStateMessage()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00455">lookupFinished()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">// no cached STATE message?</span>
    <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>) {
        simtime_t now = simTime();
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>) {
            <span class="comment">// some entries not yet determined?</span>
            <span class="keywordflow">if</span> ((find(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.begin(), <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.end(),
                      <a class="code" href="PastryTypes_8h.html#a095206927871324515b53a7e3417f4ea" title="value for not yet determined proximity value:">PASTRY_PROX_PENDING</a>) != <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#afc10e12f0e7f2806255ce8277ece0a62">pr_rt</a>.end()) ||
                (find(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.begin(), <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.end(),
                      <a class="code" href="PastryTypes_8h.html#a095206927871324515b53a7e3417f4ea" title="value for not yet determined proximity value:">PASTRY_PROX_PENDING</a>) != <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#adbadfcad7fd962f6b3a12c003f873dfb">pr_ls</a>.end()) ||
                (find(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.begin(), <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.end(),
                      <a class="code" href="PastryTypes_8h.html#a095206927871324515b53a7e3417f4ea" title="value for not yet determined proximity value:">PASTRY_PROX_PENDING</a>) != <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>-&gt;<a class="code" href="structPastryStateMsgProximity.html#a564d4bd5da4adead22fc4ef02d9c1c91">pr_ns</a>.end())) {
                <span class="keywordflow">return</span>;
            }
        }
        <span class="comment">// merge info in own state tables</span>
        <span class="comment">// except leafset (was already handled in handleStateMessage)</span>
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryStateObject.html#a36f82233ec05837bf3761057f2437c86" title="update own state based on a received PastryStateMessage">mergeState</a>(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>, <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>)) {
            <a class="code" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">lastStateChange</a> = now;
        }

        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryStateObject.html#a36f82233ec05837bf3761057f2437c86" title="update own state based on a received PastryStateMessage">mergeState</a>(<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>, <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>)) {
            <a class="code" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">lastStateChange</a> = now;
            EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::checkProxCache()]\n&quot;</span>
                    &lt;&lt; <span class="stringliteral">&quot;    Merged nodes into routing table.&quot;</span>
                    &lt;&lt; endl;
        }
    }

    <span class="keyword">delete</span> <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>;
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a> = NULL;
    <span class="keyword">delete</span> <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a>;
    <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#a83106b985f989835e68654900708835b">prox</a> = NULL;

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>) {
        <a class="code" href="classBamboo.html#ae987647d2b516c6bcaa1c93257b6be3f" title="changes node state">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>);
    }

    <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();

    <span class="comment">// process next queued message:</span>
    <span class="keywordflow">if</span> (! <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.empty()) {
        <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a> = <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.front();
              <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.pop();
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a>) {
            <a class="code" href="classBasePastry.html#a445a74a2791f810975bf99b4ff7d9865" title="ping all nodes in the pastry state message pointed to by private member stateCache">pingNodes</a>();
        } <span class="keywordflow">else</span> {
            <a class="code" href="classBamboo.html#a4efad1712615507ca730b86006513d9e" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acc2e50c06119f74386cc083431f86675"></a><!-- doxytag: member="Bamboo::doGlobalTuning" ref="acc2e50c06119f74386cc083431f86675" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::doGlobalTuning </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>periodically repairs the routing table by performing random lookups </p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00275">275</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> digit = <a class="code" href="classBamboo.html#a7d9390f517830e44e35e3cd475730724">getNextRowToMaintain</a>();

    <span class="comment">// would be a better alternative</span>
    <span class="comment">//OverlayKey OverlayKey::randomSuffix(uint pos) const;</span>

    uint32_t maxDigitIndex = <a class="code" href="classOverlayKey.html#af855a4dfc0e5dc0d2afc6b87fa1d7426" title="Returns the length in number of bits.">OverlayKey::getLength</a>() - <a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a>;
    uint32_t maxKeyIndex = <a class="code" href="classOverlayKey.html#af855a4dfc0e5dc0d2afc6b87fa1d7426" title="Returns the length in number of bits.">OverlayKey::getLength</a>() - 1;
    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> newKey = <a class="code" href="classOverlayKey.html#a1983e1b47e32783f8ccd5e59fe725290" title="Returns a random key.">OverlayKey::random</a>();
    <span class="keywordflow">while</span> (newKey.<a class="code" href="classOverlayKey.html#a25b2a67642f29fe2035a0abf74de3dd1" title="Returns a sub integer at position p with n-bits.">getBitRange</a>(maxDigitIndex - digit * <a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a>, bitsPerDigit) ==
           <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#a25b2a67642f29fe2035a0abf74de3dd1" title="Returns a sub integer at position p with n-bits.">getBitRange</a>(maxDigitIndex - digit * bitsPerDigit, bitsPerDigit)) {
        newKey = <a class="code" href="classOverlayKey.html#a1983e1b47e32783f8ccd5e59fe725290" title="Returns a random key.">OverlayKey::random</a>();
    }

    assert(digit * bitsPerDigit &lt; <a class="code" href="classOverlayKey.html#af855a4dfc0e5dc0d2afc6b87fa1d7426" title="Returns the length in number of bits.">OverlayKey::getLength</a>());
    <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; digit * <a class="code" href="classBasePastry.html#a80645aaa29443c4b7dc919d67fb7af81">bitsPerDigit</a>; ++i) {
        newKey[maxKeyIndex - i] = <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#abf5c47662357fb4f01de9a7a93523308">getBit</a>(maxKeyIndex - i);
    }

    <a class="code" href="classBasePastry.html#abcdf9ac9a9cc75300ba325bb8f163d19" title="Creates an abstract iterative lookup instance.">createLookup</a>()-&gt;<a class="code" href="classAbstractLookup.html#aa1bda70950cbd160ea78d1fcbd8c7767" title="Lookup siblings for a key.">lookup</a>(newKey, 1, 0, 0, <span class="keyword">new</span> <a class="code" href="classBamboo.html#aefc36fb7b441daba48500acc1fec62d4">BambooLookupListener</a>(<span class="keyword">this</span>));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab28c657a75980f968defb032f4aa9002"></a><!-- doxytag: member="Bamboo::doLeafsetMaintenance" ref="ab28c657a75980f968defb032f4aa9002" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::doLeafsetMaintenance </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>periodically repairs the leafset by pushing it to and pulling it from from a random live leafset node </p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00202">202</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; ask = <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a76dca71b4a758f9aec046e1626b5a42e" title="returns a random node from the leafset">getRandomNode</a>();
    <span class="keywordflow">if</span> (!ask.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::doLeafsetMaintenance()]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    leafset maintenance: pulling leafset from &quot;</span>
           &lt;&lt; ask &lt;&lt; endl;

        <a class="code" href="classRequestLeafSetCall.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">RequestLeafSetCall</a>* call = <span class="keyword">new</span> <a class="code" href="classRequestLeafSetCall.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">RequestLeafSetCall</a>(<span class="stringliteral">&quot;LeafSet PULL&quot;</span>);
        call-&gt;setTimestamp(simTime());
        call-&gt;<a class="code" href="classBaseOverlayMessage.html#a07301be10c346b328a0a9cc4cae48777">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);

        call-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#ae4a17bae7faeed6a6c46cac07ad68d8d">PASTRYREQUESTLEAFSETCALL_L</a>(call));
        call-&gt;encapsulate(<a class="code" href="classBasePastry.html#aa5351a4ba129681864f7b6e3d77e2962">createStateMessage</a>(<a class="code" href="PastryMessage__m_8h.html#a36b8c7a9b6b9c184ab518606946446c7acaf8b7f0f06bde65edd6fcc21c0fe74b">PASTRY_STATE_LEAFSET</a>));
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a26cf01f1f60f7c76ec071d551d2bc77e">leafsetReqSent</a>++;
                     <a class="code" href="classBasePastry.html#ab200043644da860d9d8c260fb6735053">leafsetReqBytesSent</a> += call-&gt;getByteLength());

        <a class="code" href="classBaseRpc.html#ac128e0ff0d09f81b652f7d3e00ce9441" title="Sends a Remote-Procedure-Call message to the underlay ">sendUdpRpcCall</a>(ask, call);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="acde8e02f731fe1a26a5c21d47ee84188"></a><!-- doxytag: member="Bamboo::doLocalTuning" ref="acde8e02f731fe1a26a5c21d47ee84188" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::doLocalTuning </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00250">250</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBamboo.html#a06b850d5351d33617171bc92f26d88c8">rowToAsk</a> = <a class="code" href="classBamboo.html#a7d9390f517830e44e35e3cd475730724">getNextRowToMaintain</a>();

    <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; ask4row = <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a37d02a2bda67fe9618b382f321a532d3" title="returns a random node from the routing table">getRandomNode</a>(<a class="code" href="classBamboo.html#a06b850d5351d33617171bc92f26d88c8">rowToAsk</a>);

    <span class="keywordflow">if</span> ((!ask4row.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) &amp;&amp; (ask4row != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>)) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::doLocalTuning() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Sending  Message to Node in Row&quot;</span> &lt;&lt; <a class="code" href="classBamboo.html#a06b850d5351d33617171bc92f26d88c8">rowToAsk</a>
           &lt;&lt; endl;

        <a class="code" href="classRequestRoutingRowCall.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">RequestRoutingRowCall</a>* call =
            <span class="keyword">new</span> <a class="code" href="classRequestRoutingRowCall.html" title="Class generated from overlay/pastry/PastryMessage.msg by opp_msgc.">RequestRoutingRowCall</a>(<span class="stringliteral">&quot;REQUEST ROUTINGROW Call (Local Tuning)&quot;</span>);
        call-&gt;<a class="code" href="classBaseOverlayMessage.html#a07301be10c346b328a0a9cc4cae48777">setStatType</a>(<a class="code" href="CommonMessages__m_8h.html#a25418fa818fbb01cd8c0b2c4b0732cdfad7989a419a7028d382d7b6e6d17e88c5">MAINTENANCE_STAT</a>);
        call-&gt;<a class="code" href="classRequestRoutingRowCall.html#ae7fe893a792196e34510975a00503b26">setRow</a>(<a class="code" href="classBamboo.html#a06b850d5351d33617171bc92f26d88c8">rowToAsk</a> + 1);
        call-&gt;setBitLength(<a class="code" href="PastryMessage__m_8h.html#a6c7bf6c9f0135ddd1b0c3e06cb92c270">PASTRYREQUESTROUTINGROWCALL_L</a>(call));
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(<a class="code" href="classBasePastry.html#a1a1785687d9560edfe30d6b4f8d5c31f">routingTableRowReqSent</a>++;
                     <a class="code" href="classBasePastry.html#a836e8dcea673d81c8e2a68500becd084">routingTableRowReqBytesSent</a> += call-&gt;getByteLength());

        <a class="code" href="classBaseRpc.html#ac128e0ff0d09f81b652f7d3e00ce9441" title="Sends a Remote-Procedure-Call message to the underlay ">sendUdpRpcCall</a>(ask4row, call);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7d9390f517830e44e35e3cd475730724"></a><!-- doxytag: member="Bamboo::getNextRowToMaintain" ref="a7d9390f517830e44e35e3cd475730724" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Bamboo::getNextRowToMaintain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00224">224</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00275">doGlobalTuning()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00250">doLocalTuning()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> digit = 0;
    <span class="keywordtype">int</span> lastRow = <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a449b7e0abcd2be8a93816669201bfc4c" title="gets the number of rows in the routing table">getLastRow</a>();

    <span class="keywordtype">int</span>* choices = <span class="keyword">new</span> <span class="keywordtype">int</span>[lastRow + 1];
    <span class="keywordtype">int</span> sum = 0;

    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; lastRow; ++i) {
        sum += (choices[i] = lastRow - i);
    }

    <span class="keywordtype">int</span> rval = intuniform(0, sum);

    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
        rval -= choices [digit];
        <span class="keywordflow">if</span> (rval &lt;= 0)
            <span class="keywordflow">break</span>;
        ++digit;
    }
    <span class="keyword">delete</span>[] choices;

    <span class="keywordflow">return</span> digit;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac33bbf6ffd5a95bb730ce046f921a335"></a><!-- doxytag: member="Bamboo::handleFailedNode" ref="ac33bbf6ffd5a95bb730ce046f921a335" args="(const TransportAddress &amp;failed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Bamboo::handleFailedNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>failed</em></td><td>)</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>notifies leafset and routingtable of a failed node and sends out a repair request if possible </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">failed</td><td>the failed node </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true as long as local state is READY (signals lookup to try again) </dd></dl>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#aa53ca4e1b4720ba0d2874afe29eacbf7">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00299">299</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> != <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (failed.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;Bamboo::handleFailedNode(): failed is unspecified!&quot;</span>);
    }

    <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; lsAsk = <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#ad691bdd611ba773d5b7a0a90af491498" title="tells the leafset that a node has failed">failedNode</a>(failed);
    <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#ae440c8aa89543afc2147b8784be93c41" title="tells the routing table that a node has failed">failedNode</a>(failed);
    <a class="code" href="classBasePastry.html#a66df35d5ace03485bf20db2d2899a98f">neighborhoodSet</a>-&gt;<a class="code" href="classPastryNeighborhoodSet.html#a86f227b707f881c8897ec334f2bd5a33" title="tell the neighborhood set about a failed node">failedNode</a>(failed);

    <span class="keywordflow">if</span> (lsAsk.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>() &amp;&amp; (! <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#ae13d5a42c50606e3cc0fbcd830429322" title="check if LeafSet knows at least one node to the left and to the right">isValid</a>())) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleFailedNode()]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    lost connection to the network, trying to re-join.&quot;</span>
           &lt;&lt; endl;
        <a class="code" href="classBaseOverlay.html#acb8855faa86247ae37ab894891d9f4dd" title="Join the overlay with a given nodeID.">join</a>();
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a143d3d0fa491f4bd177b69a934182f90"></a><!-- doxytag: member="Bamboo::handleRequestLeafSetResponse" ref="a143d3d0fa491f4bd177b69a934182f90" args="(RequestLeafSetResponse *response)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::handleRequestLeafSetResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classRequestLeafSetResponse.html">RequestLeafSetResponse</a> *&#160;</td>
          <td class="paramname"><em>response</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classBasePastry.html#ae745710e7bd27898ded7fe73987ef676">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00183">183</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00162">handleRpcResponse()</a>.</p>
<div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleRequestLeafSetResponse() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]&quot;</span>
       &lt;&lt; endl;

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>) {
        <a class="code" href="classPastryStateMessage.html">PastryStateMessage</a>* stateMsg =
             check_and_cast&lt;<a class="code" href="classPastryStateMessage.html">PastryStateMessage</a>*&gt;(response-&gt;decapsulate());

        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ac3f254bf54612f480dde0eef3a1204bf">setLeafSetArraySize</a>(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ad792f9b41aee54969504dee46452252c">getLeafSetArraySize</a>() + 1);
        stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#a8d3948f9d7acca20fd5ca257ca7b45be">setLeafSet</a>(stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ad792f9b41aee54969504dee46452252c">getLeafSetArraySize</a>() - 1,
                             stateMsg-&gt;<a class="code" href="classPastryStateMessage.html#ab854faec5faca431685829ba8296ecfd">getSender</a>());

        <a class="code" href="classBamboo.html#af7e2ea2c6f6d654980310005a230f6a3" title="processes state messages, merging with own state tables">handleStateMessage</a>(stateMsg);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a8efba5b237b7985672ea27dbe9d67bdd"></a><!-- doxytag: member="Bamboo::handleRpcResponse" ref="a8efba5b237b7985672ea27dbe9d67bdd" args="(BaseResponseMessage *msg, cPolymorphic *context, int rpcId, simtime_t rtt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::handleRpcResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&#160;</td>
          <td class="paramname"><em>rtt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method is called if an RPC response has been received. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The response message. </td></tr>
    <tr><td class="paramname">context</td><td>Pointer to an optional state object. The object has to be handled/deleted by the <a class="el" href="classBamboo.html#a8efba5b237b7985672ea27dbe9d67bdd" title="This method is called if an RPC response has been received.">handleRpcResponse()</a> code </td></tr>
    <tr><td class="paramname">rpcId</td><td>The RPC id. </td></tr>
    <tr><td class="paramname">rtt</td><td>The Round-Trip-Time of this RPC </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBasePastry.html#a6bdf07238d36dc4fc8298e57632d78e5">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00162">162</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBamboo.html#a8efba5b237b7985672ea27dbe9d67bdd" title="This method is called if an RPC response has been received.">BasePastry::handleRpcResponse</a>(msg, context, rpcId, rtt);

    <a class="code" href="RpcMacros_8h.html#aa75b135e279b574267e1a7dc4ab79da4" title="Marks the beginning of a Remote-Procedure-Call Switch block.">RPC_SWITCH_START</a>( msg )
    <a class="code" href="RpcMacros_8h.html#a0394d2dc4f9f1e15d7e99c9f43da10c7">RPC_ON_RESPONSE</a>( RequestLeafSet ) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleRpcResponse() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    Received a RequestLeafSet RPC Response (PUSH): id=&quot;</span>
           &lt;&lt; rpcId &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    msg=&quot;</span> &lt;&lt; *_RequestLeafSetResponse &lt;&lt; <span class="stringliteral">&quot; rtt=&quot;</span> &lt;&lt; rtt
           &lt;&lt; endl;
        <a class="code" href="classBamboo.html#a143d3d0fa491f4bd177b69a934182f90">handleRequestLeafSetResponse</a>(_RequestLeafSetResponse);
        <span class="keywordflow">break</span>;
    }
    <a class="code" href="RpcMacros_8h.html#a29a8a3f21e67ecb25f58608a54df5191" title="Marks the end of a Remote-Procedure-Call Switch block.">RPC_SWITCH_END</a>( )
}
</pre></div>
</div>
</div>
<a class="anchor" id="af7e2ea2c6f6d654980310005a230f6a3"></a><!-- doxytag: member="Bamboo::handleStateMessage" ref="af7e2ea2c6f6d654980310005a230f6a3" args="(PastryStateMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::handleStateMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPastryStateMessage.html">PastryStateMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>processes state messages, merging with own state tables </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>the pastry state message </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBasePastry.html#a1172a453b44856e2fdd7a027f0d03833">BasePastry</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00377">377</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00183">handleRequestLeafSetResponse()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#a49ff0fb8c25792a1339d54a60c36f2cd" title="debug output ?">debugOutput</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleStateMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    new STATE message to process &quot;</span>
           &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(msg) &lt;&lt; <span class="stringliteral">&quot; in state &quot;</span>
           &lt;&lt; ((<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>)?<span class="stringliteral">&quot;READY&quot;</span>:((<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>)?<span class="stringliteral">&quot;JOIN&quot;</span>:<span class="stringliteral">&quot;INIT&quot;</span>))
           &lt;&lt; endl;
    }

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleStateMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    can&#39;t handle state messages until at least reaching JOIN state.&quot;</span>
           &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="structPastryStateMsgHandle.html" title="struct-type containing local info while processing a STATE message">PastryStateMsgHandle</a> handle(msg);

    <span class="keywordflow">if</span> (<a class="code" href="classBaseOverlay.html#ab4be6d88417117fbf33a445d56af2655">state</a> == <a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>) {
        <a class="code" href="classBasePastry.html#a89aba6ca97abfbe6baff748a19969d1e" title="change the aliveTable to match the given stateMsg.">determineAliveTable</a>(msg);
        <a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a477c57b8227f5ec46a3d635b4590985a" title="update own state based on a received PastryStateMessage">mergeState</a>(msg, &amp;<a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>);
        <span class="comment">// merged state into leafset right now</span>
        <a class="code" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">lastStateChange</a> = simTime();
        <a class="code" href="classBasePastry.html#a71aa8137f8e2eaf0977a437d7d852189" title="Pastry API: send newLeafs() to application if enabled.">newLeafs</a>();
        <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();

        <span class="comment">// no state message is processed right now, start immediately:</span>
        <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a> = handle;
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a>) {
            <a class="code" href="classBasePastry.html#a445a74a2791f810975bf99b4ff7d9865" title="ping all nodes in the pastry state message pointed to by private member stateCache">pingNodes</a>();
        } <span class="keywordflow">else</span> {
            <a class="code" href="classBamboo.html#a4efad1712615507ca730b86006513d9e" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
        }

        <span class="keywordflow">return</span>;
    }

    <span class="comment">// determine aliveTable to prevent leafSet from merging nodes that are</span>
    <span class="comment">// known to be dead:</span>
    <a class="code" href="classBasePastry.html#a89aba6ca97abfbe6baff748a19969d1e" title="change the aliveTable to match the given stateMsg.">determineAliveTable</a>(msg);
    <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a72c95d72afcded1185c628646e4f819c">leafSet</a>-&gt;<a class="code" href="classPastryLeafSet.html#a477c57b8227f5ec46a3d635b4590985a" title="update own state based on a received PastryStateMessage">mergeState</a>(msg, &amp;<a class="code" href="classBasePastry.html#a22e76d53e4ba89d63eca403923a46da8" title="Early update of leaf set: helper structure for marking known-dead nodes.">aliveTable</a>)) {
        <span class="comment">// merged state into leafset right now</span>
        <a class="code" href="classBasePastry.html#a6c7b5c6e2d71db0c8233b80764e63dc6">lastStateChange</a> = simTime();
        <a class="code" href="classBasePastry.html#a71aa8137f8e2eaf0977a437d7d852189" title="Pastry API: send newLeafs() to application if enabled.">newLeafs</a>();
        <a class="code" href="classBasePastry.html#abc8da91d0187799f60bddb3ddab3e2f6" title="updates information shown in tk-environment">updateTooltip</a>();
    }
    <span class="comment">// in READY state, only ping nodes to get proximity metric:</span>
    <span class="keywordflow">if</span> (!<a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a>.<a class="code" href="structPastryStateMsgHandle.html#aecab9143d3bcf4e2d70272abbb74f428">msg</a>) {
        <span class="comment">// no state message is processed right now, start immediately:</span>
        <a class="code" href="classBasePastry.html#a70d78d4ebef74ab2367fed00f77b2d65" title="Handle for processing a single state message.">stateCache</a> = handle;
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a>) {
            <a class="code" href="classBasePastry.html#a445a74a2791f810975bf99b4ff7d9865" title="ping all nodes in the pastry state message pointed to by private member stateCache">pingNodes</a>();
        } <span class="keywordflow">else</span> {
            <a class="code" href="classBamboo.html#a4efad1712615507ca730b86006513d9e" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
        }
    } <span class="keywordflow">else</span> {
        <span class="comment">// enqueue message for later processing:</span>
        <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.push(handle);
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.size() &gt; 15) {
            <span class="keyword">delete</span> <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.front().msg;
            <a class="code" href="classBasePastry.html#a763ec48a49b047252ea3d758b335df70" title="Queue of state messages waiting to be processed in READY state.">stateCacheQueue</a>.pop();
            EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleStateMessage() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
               &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
               &lt;&lt; <span class="stringliteral">&quot;    stateCacheQueue full -&gt; pop()&quot;</span> &lt;&lt; endl;
        }
        <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a>) {
            <a class="code" href="classBasePastry.html#af6a7090deb645b1f79b33edb0409485c" title="ping all nodes in a given state message.">prePing</a>(msg);
        } <span class="keywordflow">else</span> {
            <a class="code" href="classBamboo.html#a4efad1712615507ca730b86006513d9e" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a6d3f0705b1495c225432238094a38cea"></a><!-- doxytag: member="Bamboo::handleTimerEvent" ref="a6d3f0705b1495c225432238094a38cea" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::handleTimerEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classBaseRpc.html#ab893c156412e38caa62fe058b229899b">BaseRpc</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00133">133</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (msg == <a class="code" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">localTuningTimer</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleTimerEvent() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    starting local tuning &quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;(aka neighbor&#39;s neighbors / routing table maintenance)&quot;</span>
           &lt;&lt; endl;
        <a class="code" href="classBamboo.html#acde8e02f731fe1a26a5c21d47ee84188">doLocalTuning</a>();
        scheduleAt(simTime() + <a class="code" href="classBamboo.html#a703829a0001a2396b500aff8eb823242">localTuningInterval</a>, <a class="code" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">localTuningTimer</a>);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg == <a class="code" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">leafsetMaintenanceTimer</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleTimerEvent() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    starting leafset maintenance&quot;</span>
           &lt;&lt; endl;
        <a class="code" href="classBamboo.html#ab28c657a75980f968defb032f4aa9002" title="periodically repairs the leafset by pushing it to and pulling it from from a random live leafset node...">doLeafsetMaintenance</a>();
        scheduleAt(simTime() + <a class="code" href="classBamboo.html#a05f92ae31d195ee37d78f45ab7f5f5bb">leafsetMaintenanceInterval</a>,
                   <a class="code" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">leafsetMaintenanceTimer</a>);
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg == <a class="code" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">globalTuningTimer</a>) {
        EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::handleTimerEvent() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    starting global tuning&quot;</span>
           &lt;&lt; endl;
        <a class="code" href="classBamboo.html#acc2e50c06119f74386cc083431f86675" title="periodically repairs the routing table by performing random lookups">doGlobalTuning</a>();
        scheduleAt(simTime() + <a class="code" href="classBamboo.html#a8a4593a1108a8d18b11799bbbe1c63dc">globalTuningInterval</a>, <a class="code" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">globalTuningTimer</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52bd33a4d9a8418e9027284cc74f72d1"></a><!-- doxytag: member="Bamboo::initializeOverlay" ref="a52bd33a4d9a8418e9027284cc74f72d1" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::initializeOverlay </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stage</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes derived-class-attributes. </p>
<p><br/>
</p>
<p>Initializes derived-class-attributes, called by <a class="el" href="classBaseOverlay.html#a9738ba6065b0f699f1921bbe82ab97be" title="initializes base-class-attributes">BaseOverlay::initialize()</a>. By default this method is called once. If more stages are needed one can overload <a class="el" href="classBaseOverlay.html#a3234dfcf81463984e88a42432734a615" title="Sets init stage.">numInitStages()</a> and add more stages.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">stage</td><td>the init stage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a41f88dfbea856a2b38319ff52c758c96">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00050">50</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ( stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a58e83c497c7c8495e9c592ff3148b6b9" title="first stage for overlay modules (Tier 0 / KBR)">MIN_STAGE_OVERLAY</a> )
        <span class="keywordflow">return</span>;

    <span class="comment">// Bamboo provides KBR services</span>
    <a class="code" href="classBaseOverlay.html#a53389ea3326d2e8ad53f02b388487d0b" title="set this to true, if the overlay provides KBR services">kbr</a> = <span class="keyword">true</span>;

    <a class="code" href="classBamboo.html#a06b850d5351d33617171bc92f26d88c8">rowToAsk</a> = 0;

    <a class="code" href="classBasePastry.html#a0bc39902de2d03ea45714bf8506d983f" title="initializes parameters and variables used in both Bamboo and Pastry">baseInit</a>();

    <a class="code" href="classBamboo.html#a703829a0001a2396b500aff8eb823242">localTuningInterval</a> = par(<span class="stringliteral">&quot;localTuningInterval&quot;</span>);
    <a class="code" href="classBamboo.html#a05f92ae31d195ee37d78f45ab7f5f5bb">leafsetMaintenanceInterval</a> = par(<span class="stringliteral">&quot;leafsetMaintenanceInterval&quot;</span>);
    <a class="code" href="classBamboo.html#a8a4593a1108a8d18b11799bbbe1c63dc">globalTuningInterval</a> = par(<span class="stringliteral">&quot;globalTuningInterval&quot;</span>);

    <a class="code" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">localTuningTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;repairTaskTimer&quot;</span>);
    <a class="code" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">leafsetMaintenanceTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;leafsetMaintenanceTimer&quot;</span>);
    <a class="code" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">globalTuningTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;globalTuningTimer&quot;</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a1b8dba4c0d42b0dbf6b6b2a693c6dc29"></a><!-- doxytag: member="Bamboo::joinOverlay" ref="a1b8dba4c0d42b0dbf6b6b2a693c6dc29" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::joinOverlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Join the overlay with a given nodeID in thisNode.key. </p>
<p>Join the overlay with a given nodeID in thisNode.key. This method may be called by an application to join the overlay with a specific nodeID. It is also called if the node's IP address changes. </p>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a3eefb56c2396601373c89d21b5b58110">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00072">72</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="classBamboo.html#ae987647d2b516c6bcaa1c93257b6be3f" title="changes node state">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa4c1b397f6c4682baf7db280e7f15520a">INIT</a>);

    <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af534020c5663e436cf28aa83a4a790c9">bootstrapNode</a>.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>()) {
        <span class="comment">// no existing pastry network -&gt; first node of a new one</span>
        <a class="code" href="classBamboo.html#ae987647d2b516c6bcaa1c93257b6be3f" title="changes node state">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fab3a263fb274a58d63b15cd61ba910335">READY</a>);
    } <span class="keywordflow">else</span> {
        <span class="comment">// join existing pastry network</span>
        <a class="code" href="classBamboo.html#ae987647d2b516c6bcaa1c93257b6be3f" title="changes node state">changeState</a>(<a class="code" href="classBaseOverlay.html#a0ad4b12b0c9949661f66db7fbbf7d40fa40c37f1f56c6ed8e40ae467e67e61cab">JOIN</a>);
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a37816e3b77076881120a13606d836489"></a><!-- doxytag: member="Bamboo::lookupFinished" ref="a37816e3b77076881120a13606d836489" args="(AbstractLookup *lookup)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Bamboo::lookupFinished </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classAbstractLookup.html">AbstractLookup</a> *&#160;</td>
          <td class="paramname"><em>lookup</em></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Implements <a class="el" href="classLookupListener.html#acf45d13c80a956edd062b0915ac5facd">LookupListener</a>.</p>

<p>Definition at line <a class="el" href="Bamboo_8cc_source.html#l00455">455</a> of file <a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8h_source.html#l00148">BambooLookupListener::lookupFinished()</a>.</p>
<div class="fragment"><pre class="fragment">{
    EV &lt;&lt; <span class="stringliteral">&quot;[Bamboo::lookupFinished() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
       &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
       &lt;&lt; endl;

    <span class="keywordflow">if</span> (lookup-&gt;<a class="code" href="classAbstractLookup.html#a698d5d467c714e4d114359d1078b505d" title="Returns true, if the lookup was successful.">isValid</a>()) {
        EV  &lt;&lt; <span class="stringliteral">&quot;    Lookup successful&quot;</span> &lt;&lt; endl;
        <span class="keyword">const</span> <a class="code" href="classBaseKeySortedVector.html" title="A STL-vector that supports inserts sorted by an OverlayKey found somewhere in the type...">NodeVector</a>&amp; result = lookup-&gt;<a class="code" href="classAbstractLookup.html#a0ad852a71fdafed808e0ebb8dcd3723e" title="Returns the result of the lookup.">getResult</a>();
        <span class="keywordflow">if</span> (result[0] != <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>) {
            <span class="keywordflow">if</span> (<a class="code" href="classBasePastry.html#af6e8cefc3c62e666203cfedea1532f04">proximityNeighborSelection</a>) {
                <span class="comment">// Global Tuning PING</span>
                <a class="code" href="structProx.html">Prox</a> prox = <a class="code" href="classBaseRpc.html#ad80237130dc2316d0d76ac6757c50f4f" title="pointer to the neighbor cache">neighborCache</a>-&gt;<a class="code" href="classNeighborCache.html#ab934be8fb503f9629cf6eb83e7d1b576" title="Gets the proximity of a node.">getProx</a>(result[0],
                                                   <a class="code" href="NeighborCache_8h.html#ada3b7deab861ead8c817d583da336ccba751bede7ee708c74811f4bd49ee74cea">NEIGHBORCACHE_DEFAULT</a>,
                                                   <a class="code" href="classBasePastry.html#a26eda810c876c5062a849e9e0fb7e2b8aaab166e746fb925df8707610d92af824">PING_SINGLE_NODE</a>,
                                                   <span class="keyword">this</span>, NULL);
                <span class="keywordflow">if</span> (prox != <a class="code" href="structProx.html#aa7ac832a04fe61863222d8631526647b">Prox::PROX_UNKNOWN</a> &amp;&amp; prox != <a class="code" href="structProx.html#abf2f5f92914e5e617c5ef157ea5ffc86">Prox::PROX_WAITING</a>) {
                    <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a92eb6e9176f873cb0a7106ce6e97a53e" title="merge a node in the IRoutingTable">mergeNode</a>(result[0], prox.<a class="code" href="structProx.html#aeb8eca3cac2c681c5e7f1060fcbd7b6f">proximity</a>);
                }
            } <span class="keywordflow">else</span> {
                <a class="code" href="classBasePastry.html#a759c548b4bb1cb4f92b3a4b369cc8d02">routingTable</a>-&gt;<a class="code" href="classPastryRoutingTable.html#a92eb6e9176f873cb0a7106ce6e97a53e" title="merge a node in the IRoutingTable">mergeNode</a>(result[0], -1.0);
                <a class="code" href="classBamboo.html#a4efad1712615507ca730b86006513d9e" title="checks whether proxCache is complete, takes appropriate actions depending on the protocol state...">checkProxCache</a>();
            }
        }
    } <span class="keywordflow">else</span> {
        EV &lt;&lt; <span class="stringliteral">&quot;    Lookup failed&quot;</span> &lt;&lt; endl;
    }
}
</pre></div>
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="aefc36fb7b441daba48500acc1fec62d4"></a><!-- doxytag: member="Bamboo::BambooLookupListener" ref="aefc36fb7b441daba48500acc1fec62d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classBambooLookupListener.html">BambooLookupListener</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00055">55</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00275">doGlobalTuning()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a8a4593a1108a8d18b11799bbbe1c63dc"></a><!-- doxytag: member="Bamboo::globalTuningInterval" ref="a8a4593a1108a8d18b11799bbbe1c63dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classBamboo.html#a8a4593a1108a8d18b11799bbbe1c63dc">Bamboo::globalTuningInterval</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00095">95</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00086">changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00050">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a18101007aa88fae455a40c512b964a33"></a><!-- doxytag: member="Bamboo::globalTuningTimer" ref="a18101007aa88fae455a40c512b964a33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classBamboo.html#a18101007aa88fae455a40c512b964a33">Bamboo::globalTuningTimer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00098">98</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00086">changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>, <a class="el" href="Bamboo_8cc_source.html#l00050">initializeOverlay()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00041">~Bamboo()</a>.</p>

</div>
</div>
<a class="anchor" id="a05f92ae31d195ee37d78f45ab7f5f5bb"></a><!-- doxytag: member="Bamboo::leafsetMaintenanceInterval" ref="a05f92ae31d195ee37d78f45ab7f5f5bb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classBamboo.html#a05f92ae31d195ee37d78f45ab7f5f5bb">Bamboo::leafsetMaintenanceInterval</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00093">93</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00050">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="a27b7c5753ca505d9405088db5b992abb"></a><!-- doxytag: member="Bamboo::leafsetMaintenanceTimer" ref="a27b7c5753ca505d9405088db5b992abb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classBamboo.html#a27b7c5753ca505d9405088db5b992abb">Bamboo::leafsetMaintenanceTimer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00097">97</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00086">changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>, <a class="el" href="Bamboo_8cc_source.html#l00050">initializeOverlay()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00041">~Bamboo()</a>.</p>

</div>
</div>
<a class="anchor" id="a703829a0001a2396b500aff8eb823242"></a><!-- doxytag: member="Bamboo::localTuningInterval" ref="a703829a0001a2396b500aff8eb823242" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">simtime_t <a class="el" href="classBamboo.html#a703829a0001a2396b500aff8eb823242">Bamboo::localTuningInterval</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00094">94</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00086">changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00050">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="aab00eaa43352d0f3d1529d2f03ebc6c2"></a><!-- doxytag: member="Bamboo::localTuningTimer" ref="aab00eaa43352d0f3d1529d2f03ebc6c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classBamboo.html#aab00eaa43352d0f3d1529d2f03ebc6c2">Bamboo::localTuningTimer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00099">99</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00086">changeState()</a>, <a class="el" href="Bamboo_8cc_source.html#l00133">handleTimerEvent()</a>, <a class="el" href="Bamboo_8cc_source.html#l00050">initializeOverlay()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00041">~Bamboo()</a>.</p>

</div>
</div>
<a class="anchor" id="a06b850d5351d33617171bc92f26d88c8"></a><!-- doxytag: member="Bamboo::rowToAsk" ref="a06b850d5351d33617171bc92f26d88c8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="classBamboo.html#a06b850d5351d33617171bc92f26d88c8">Bamboo::rowToAsk</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="Bamboo_8h_source.html#l00090">90</a> of file <a class="el" href="Bamboo_8h_source.html">Bamboo.h</a>.</p>

<p>Referenced by <a class="el" href="Bamboo_8cc_source.html#l00250">doLocalTuning()</a>, and <a class="el" href="Bamboo_8cc_source.html#l00050">initializeOverlay()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Bamboo_8h_source.html">Bamboo.h</a></li>
<li><a class="el" href="Bamboo_8cc_source.html">Bamboo.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="classBamboo.html">Bamboo</a>      </li>

    <li class="footer">Generated on Thu Mar 6 2014 14:06:37 for OverSim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>

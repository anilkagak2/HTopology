<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: XmlRpc::XmlRpcServerConnection Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OverSim
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classXmlRpc_1_1XmlRpcServerConnection.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">XmlRpc::XmlRpcServerConnection Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="XmlRpc::XmlRpcServerConnection" --><!-- doxytag: inherits="XmlRpc::XmlRpcSource" -->
<p>A class to handle XML RPC requests from a particular client.  
 <a href="classXmlRpc_1_1XmlRpcServerConnection.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for XmlRpc::XmlRpcServerConnection:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classXmlRpc_1_1XmlRpcServerConnection.png" usemap="#XmlRpc::XmlRpcServerConnection_map" alt=""/>
  <map id="XmlRpc::XmlRpcServerConnection_map" name="XmlRpc::XmlRpcServerConnection_map">
<area href="classXmlRpc_1_1XmlRpcSource.html" title="An RPC source represents a file descriptor to monitor." alt="XmlRpc::XmlRpcSource" shape="rect" coords="0,0,207,24"/>
</map>
 </div></div>

<p><a href="classXmlRpc_1_1XmlRpcServerConnection-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a87d0ef4ba886ba68986c3062013aae01">XmlRpcServerConnection</a> (int fd, <a class="el" href="classXmlRpc_1_1XmlRpcServer.html">XmlRpcServer</a> *server, bool deleteOnClose=false)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a87d0ef4ba886ba68986c3062013aae01"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a67cba9901da4e410f0686242b2f728a5">~XmlRpcServerConnection</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a67cba9901da4e410f0686242b2f728a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#abaec02b02aa78372b251f48872087fe6">handleEvent</a> (unsigned eventType)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle IO on the client connection socket.  <a href="#abaec02b02aa78372b251f48872087fe6"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09">ServerConnectionState</a> { <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09aba39b67cc857d22c568da8b871f4e7e7">READ_HEADER</a>, 
<a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a63e043096058ef5d745fdaa73359270f">READ_REQUEST</a>, 
<a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a17a4dca3486e5adcece34a55d463ab26">WRITE_RESPONSE</a>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Possible IO states for the connection.  <a href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#ace9ad848fb6a42dc8f773a034580cf75">readHeader</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the http header.  <a href="#ace9ad848fb6a42dc8f773a034580cf75"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a2e27c9b14915ff8324ea85d5b2ef4ea8">readRequest</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the request (based on the content-length header value)  <a href="#a2e27c9b14915ff8324ea85d5b2ef4ea8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a9b25d8d436315fda83a2eff8c33fe181">writeResponse</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the request and writes the resulting response.  <a href="#a9b25d8d436315fda83a2eff8c33fe181"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a7928d53455bbfe8aae3eb81319e62b1b">executeRequest</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method to execute the client request.  <a href="#a7928d53455bbfe8aae3eb81319e62b1b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classXmlRpc_1_1XmlRpcServer.html">XmlRpcServer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad55a408b9f92152fb2b0d6da3c80102d">_server</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="namespaceXmlRpc.html">XmlRpc</a> server that accepted this connection.  <a href="#ad55a408b9f92152fb2b0d6da3c80102d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09">ServerConnectionState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9">_connectionState</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Current IO state for the connection.  <a href="#a24beae84a3885a19c75aaf2f130bdbe9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb">_header</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Request headers.  <a href="#a040c389e5db426977553eaa238b82acb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078">_contentLength</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes expected in the request body (parsed from header)  <a href="#ad9f5bdff4af85f5baf80bc24e6ea6078"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2">_request</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Request body.  <a href="#a31fd216bde1d98f721349f503b1a29f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a">_response</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Response.  <a href="#abe6c19bf5da6fa4365ad9991abbda95a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a92167e450abcac63e0bbe71bca40eeb9">_bytesWritten</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes of the response written so far.  <a href="#a92167e450abcac63e0bbe71bca40eeb9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd">_keepAlive</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to keep the current client connection open for further requests.  <a href="#a921ad52de93f71a8c8cdb10b7db486dd"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A class to handle XML RPC requests from a particular client. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00031">31</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>
</div><hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a509d96fb697a23f6078fdbd6c3405d09"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::ServerConnectionState" ref="a509d96fb697a23f6078fdbd6c3405d09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09">XmlRpc::XmlRpcServerConnection::ServerConnectionState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Possible IO states for the connection. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a509d96fb697a23f6078fdbd6c3405d09aba39b67cc857d22c568da8b871f4e7e7"></a><!-- doxytag: member="READ_HEADER" ref="a509d96fb697a23f6078fdbd6c3405d09aba39b67cc857d22c568da8b871f4e7e7" args="" -->READ_HEADER</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a509d96fb697a23f6078fdbd6c3405d09a63e043096058ef5d745fdaa73359270f"></a><!-- doxytag: member="READ_REQUEST" ref="a509d96fb697a23f6078fdbd6c3405d09a63e043096058ef5d745fdaa73359270f" args="" -->READ_REQUEST</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a509d96fb697a23f6078fdbd6c3405d09a17a4dca3486e5adcece34a55d463ab26"></a><!-- doxytag: member="WRITE_RESPONSE" ref="a509d96fb697a23f6078fdbd6c3405d09a17a4dca3486e5adcece34a55d463ab26" args="" -->WRITE_RESPONSE</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00064">64</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>
<div class="fragment"><pre class="fragment">{ <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09aba39b67cc857d22c568da8b871f4e7e7">READ_HEADER</a>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a63e043096058ef5d745fdaa73359270f">READ_REQUEST</a>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a17a4dca3486e5adcece34a55d463ab26">WRITE_RESPONSE</a> };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a87d0ef4ba886ba68986c3062013aae01"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::XmlRpcServerConnection" ref="a87d0ef4ba886ba68986c3062013aae01" args="(int fd, XmlRpcServer *server, bool deleteOnClose=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XmlRpcServerConnection::XmlRpcServerConnection </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classXmlRpc_1_1XmlRpcServer.html">XmlRpcServer</a> *&#160;</td>
          <td class="paramname"><em>server</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deleteOnClose</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00026">26</a> of file <a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     :
  <a class="code" href="classXmlRpc_1_1XmlRpcSource.html#ac2dffe3f0c9414e86efe68f28d13f1f1" title="Constructor.">XmlRpcSource</a>(fd, deleteOnClose)
{
  <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(2,<span class="stringliteral">&quot;XmlRpcServerConnection: new socket %d.&quot;</span>, fd);
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad55a408b9f92152fb2b0d6da3c80102d" title="The XmlRpc server that accepted this connection.">_server</a> = server;
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> = <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09aba39b67cc857d22c568da8b871f4e7e7">READ_HEADER</a>;
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd" title="Whether to keep the current client connection open for further requests.">_keepAlive</a> = <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a67cba9901da4e410f0686242b2f728a5"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::~XmlRpcServerConnection" ref="a67cba9901da4e410f0686242b2f728a5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XmlRpcServerConnection::~XmlRpcServerConnection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00038">38</a> of file <a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(4,<span class="stringliteral">&quot;XmlRpcServerConnection dtor.&quot;</span>);
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad55a408b9f92152fb2b0d6da3c80102d" title="The XmlRpc server that accepted this connection.">_server</a>-&gt;<a class="code" href="classXmlRpc_1_1XmlRpcServer.html#a784922a9ac3787c05e9247269752c98c" title="Remove a connection from the dispatcher.">removeConnection</a>(<span class="keyword">this</span>);
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7928d53455bbfe8aae3eb81319e62b1b"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::executeRequest" ref="a7928d53455bbfe8aae3eb81319e62b1b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XmlRpcServerConnection::executeRequest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Helper method to execute the client request. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00208">208</a> of file <a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">writeResponse()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a" title="Response.">_response</a> = <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad55a408b9f92152fb2b0d6da3c80102d" title="The XmlRpc server that accepted this connection.">_server</a>-&gt;<a class="code" href="classXmlRpc_1_1XmlRpcServer.html#acc3b49e20a5e1c7e360572df0752dad0" title="Parses the request xml, runs the method, generates the response (header+xml).">executeRequest</a>(<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2" title="Request body.">_request</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="abaec02b02aa78372b251f48872087fe6"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::handleEvent" ref="abaec02b02aa78372b251f48872087fe6" args="(unsigned eventType)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned XmlRpcServerConnection::handleEvent </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>eventType</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle IO on the client connection socket. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">eventType</td><td>Type of IO event that occurred. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classXmlRpc_1_1XmlRpcDispatch.html#a4f75ac1cdd83a138699d2bbf10511d5d" title="Values indicating the type of events a source is interested in.">XmlRpcDispatch::EventType</a>. </dd></dl>

<p>Implements <a class="el" href="classXmlRpc_1_1XmlRpcSource.html#ad9858285d9ab1c7bbef9c3a1eb27b634">XmlRpc::XmlRpcSource</a>.</p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00049">49</a> of file <a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> == <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09aba39b67cc857d22c568da8b871f4e7e7">READ_HEADER</a>)
    <span class="keywordflow">if</span> ( ! <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ace9ad848fb6a42dc8f773a034580cf75" title="Reads the http header.">readHeader</a>()) <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> == <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a63e043096058ef5d745fdaa73359270f">READ_REQUEST</a>)
    <span class="keywordflow">if</span> ( ! <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a2e27c9b14915ff8324ea85d5b2ef4ea8" title="Reads the request (based on the content-length header value)">readRequest</a>()) <span class="keywordflow">return</span> 0;

  <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> == <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a17a4dca3486e5adcece34a55d463ab26">WRITE_RESPONSE</a>)
    <span class="keywordflow">if</span> ( ! <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a9b25d8d436315fda83a2eff8c33fe181" title="Executes the request and writes the resulting response.">writeResponse</a>()) <span class="keywordflow">return</span> 0;

  <span class="keywordflow">return</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> == <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a17a4dca3486e5adcece34a55d463ab26">WRITE_RESPONSE</a>) 
        ? <a class="code" href="classXmlRpc_1_1XmlRpcDispatch.html#a4f75ac1cdd83a138699d2bbf10511d5daf3d2dd04861a1f219313c085be68b015" title="connected/data can be written without blocking">XmlRpcDispatch::WritableEvent</a> : <a class="code" href="classXmlRpc_1_1XmlRpcDispatch.html#a4f75ac1cdd83a138699d2bbf10511d5da882cc1bb5d0f955eb07240c1cb01949f" title="data available to read">XmlRpcDispatch::ReadableEvent</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ace9ad848fb6a42dc8f773a034580cf75"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::readHeader" ref="ace9ad848fb6a42dc8f773a034580cf75" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool XmlRpcServerConnection::readHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the http header. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00066">66</a> of file <a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00049">handleEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">// Read available data</span>
  <span class="keywordtype">bool</span> eof;
  <span class="keywordflow">if</span> ( ! <a class="code" href="classXmlRpc_1_1XmlRpcSocket.html#a6444e46abadd7b59cea079e3a25fc87b" title="Read text from the specified socket. Returns false on error.">XmlRpcSocket::nbRead</a>(this-&gt;<a class="code" href="classXmlRpc_1_1XmlRpcSource.html#a58f7ffbcdbdc10a7102938b5cf8d6146" title="Return the file descriptor being monitored.">getfd</a>(), <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a>, &amp;eof, <a class="code" href="classXmlRpc_1_1XmlRpcSource.html#a3bd3055ba6bb61889368716766ba52c7">_ssl_ssl</a>)) {
    <span class="comment">// Its only an error if we already have read some data</span>
    <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a>.length() &gt; 0)
      <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#a3b8a23e81eb924fb0889cff32d3fe190" title="Dump error messages somewhere.">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::readHeader: error while reading header (%s).&quot;</span>,<a class="code" href="classXmlRpc_1_1XmlRpcSocket.html#ae1926209b963e3e1a95a41fd25dcd43d" title="Returns message corresponding to last error.">XmlRpcSocket::getErrorMsg</a>().c_str());
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
  }

  <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(4, <span class="stringliteral">&quot;XmlRpcServerConnection::readHeader: read %d bytes.&quot;</span>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a>.length());
  <span class="keywordtype">char</span> *hp = (<span class="keywordtype">char</span>*)<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a>.c_str();  <span class="comment">// Start of header</span>
  <span class="keywordtype">char</span> *ep = hp + <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a>.length();   <span class="comment">// End of string</span>
  <span class="keywordtype">char</span> *bp = 0;                       <span class="comment">// Start of body</span>
  <span class="keywordtype">char</span> *lp = 0;                       <span class="comment">// Start of content-length value</span>
  <span class="keywordtype">char</span> *kp = 0;                       <span class="comment">// Start of connection value</span>

  <span class="keywordflow">for</span> (<span class="keywordtype">char</span> *cp = hp; (bp == 0) &amp;&amp; (cp &lt; ep); ++cp) {
        <span class="keywordflow">if</span> ((ep - cp &gt; 16) &amp;&amp; (strncasecmp(cp, <span class="stringliteral">&quot;Content-length: &quot;</span>, 16) == 0))
          lp = cp + 16;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ep - cp &gt; 12) &amp;&amp; (strncasecmp(cp, <span class="stringliteral">&quot;Connection: &quot;</span>, 12) == 0))
          kp = cp + 12;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ep - cp &gt; 4) &amp;&amp; (strncmp(cp, <span class="stringliteral">&quot;\r\n\r\n&quot;</span>, 4) == 0))
          bp = cp + 4;
        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ep - cp &gt; 2) &amp;&amp; (strncmp(cp, <span class="stringliteral">&quot;\n\n&quot;</span>, 2) == 0))
          bp = cp + 2;
  }

  <span class="comment">// If we haven&#39;t gotten the entire header yet, return (keep reading)</span>
  <span class="keywordflow">if</span> (bp == 0) {
    <span class="comment">// EOF in the middle of a request is an error, otherwise its ok</span>
    <span class="keywordflow">if</span> (eof) {
      <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(4, <span class="stringliteral">&quot;XmlRpcServerConnection::readHeader: EOF&quot;</span>);
      <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a>.length() &gt; 0)
        <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#a3b8a23e81eb924fb0889cff32d3fe190" title="Dump error messages somewhere.">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::readHeader: EOF while reading header&quot;</span>);
      <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// Either way we close the connection</span>
    }
    
    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Keep reading</span>
  }

  <span class="comment">// Decode content length</span>
  <span class="keywordflow">if</span> (lp == 0) {
    <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::readHeader: No Content-length specified&quot;</span>);
    <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// We could try to figure it out by parsing as we read, but for now...</span>
  }

  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078" title="Number of bytes expected in the request body (parsed from header)">_contentLength</a> = atoi(lp);
  <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078" title="Number of bytes expected in the request body (parsed from header)">_contentLength</a> &lt;= 0) {
    <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::readHeader: Invalid Content-length specified (%d).&quot;</span>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078" title="Number of bytes expected in the request body (parsed from header)">_contentLength</a>);
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
  }
        
  <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(3, <span class="stringliteral">&quot;XmlRpcServerConnection::readHeader: specified content length is %d.&quot;</span>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078" title="Number of bytes expected in the request body (parsed from header)">_contentLength</a>);

  <span class="comment">// Otherwise copy non-header data to request buffer and set state to read request.</span>
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2" title="Request body.">_request</a> = bp;

  <span class="comment">// Parse out any interesting bits from the header (HTTP version, connection)</span>
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd" title="Whether to keep the current client connection open for further requests.">_keepAlive</a> = <span class="keyword">true</span>;
  <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a>.find(<span class="stringliteral">&quot;HTTP/1.0&quot;</span>) != std::string::npos) {
    <span class="keywordflow">if</span> (kp == 0 || strncasecmp(kp, <span class="stringliteral">&quot;keep-alive&quot;</span>, 10) != 0)
      <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd" title="Whether to keep the current client connection open for further requests.">_keepAlive</a> = <span class="keyword">false</span>;           <span class="comment">// Default for HTTP 1.0 is to close the connection</span>
  } <span class="keywordflow">else</span> {
    <span class="keywordflow">if</span> (kp != 0 &amp;&amp; strncasecmp(kp, <span class="stringliteral">&quot;close&quot;</span>, 5) == 0)
      <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd" title="Whether to keep the current client connection open for further requests.">_keepAlive</a> = <span class="keyword">false</span>;
  }
  <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(3, <span class="stringliteral">&quot;KeepAlive: %d&quot;</span>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd" title="Whether to keep the current client connection open for further requests.">_keepAlive</a>);


  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a> = <span class="stringliteral">&quot;&quot;</span>; 
  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> = <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a63e043096058ef5d745fdaa73359270f">READ_REQUEST</a>;
  <span class="keywordflow">return</span> <span class="keyword">true</span>;    <span class="comment">// Continue monitoring this source</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2e27c9b14915ff8324ea85d5b2ef4ea8"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::readRequest" ref="a2e27c9b14915ff8324ea85d5b2ef4ea8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool XmlRpcServerConnection::readRequest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the request (based on the content-length header value) </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00145">145</a> of file <a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00049">handleEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">// If we dont have the entire request yet, read available data</span>
  <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2" title="Request body.">_request</a>.length()) &lt; <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078" title="Number of bytes expected in the request body (parsed from header)">_contentLength</a>) {
    <span class="keywordtype">bool</span> eof;
    <span class="keywordflow">if</span> ( ! <a class="code" href="classXmlRpc_1_1XmlRpcSocket.html#a6444e46abadd7b59cea079e3a25fc87b" title="Read text from the specified socket. Returns false on error.">XmlRpcSocket::nbRead</a>(this-&gt;<a class="code" href="classXmlRpc_1_1XmlRpcSource.html#a58f7ffbcdbdc10a7102938b5cf8d6146" title="Return the file descriptor being monitored.">getfd</a>(), <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2" title="Request body.">_request</a>, &amp;eof, <a class="code" href="classXmlRpc_1_1XmlRpcSource.html#a3bd3055ba6bb61889368716766ba52c7">_ssl_ssl</a>)) {
      <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::readRequest: read error (%s).&quot;</span>,<a class="code" href="classXmlRpc_1_1XmlRpcSocket.html#ae1926209b963e3e1a95a41fd25dcd43d" title="Returns message corresponding to last error.">XmlRpcSocket::getErrorMsg</a>().c_str());
      <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }

    <span class="comment">// If we haven&#39;t gotten the entire request yet, return (keep reading)</span>
    <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2" title="Request body.">_request</a>.length()) &lt; <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078" title="Number of bytes expected in the request body (parsed from header)">_contentLength</a>) {
      <span class="keywordflow">if</span> (eof) {
        <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::readRequest: EOF while reading request&quot;</span>);
        <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// Either way we close the connection</span>
      }
      <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }
  }

  <span class="comment">// Otherwise, parse and dispatch the request</span>
  <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(3, <span class="stringliteral">&quot;XmlRpcServerConnection::readRequest read %d bytes.&quot;</span>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2" title="Request body.">_request</a>.length());
  <span class="comment">//XmlRpcUtil::log(5, &quot;XmlRpcServerConnection::readRequest:\n%s\n&quot;, _request.c_str());</span>

  <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> = <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09a17a4dca3486e5adcece34a55d463ab26">WRITE_RESPONSE</a>;

  <span class="keywordflow">return</span> <span class="keyword">true</span>;    <span class="comment">// Continue monitoring this source</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9b25d8d436315fda83a2eff8c33fe181"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::writeResponse" ref="a9b25d8d436315fda83a2eff8c33fe181" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool XmlRpcServerConnection::writeResponse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Executes the request and writes the resulting response. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">177</a> of file <a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00049">handleEvent()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a" title="Response.">_response</a>.length() == 0) {
    <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a7928d53455bbfe8aae3eb81319e62b1b" title="Helper method to execute the client request.">executeRequest</a>();
    <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a92167e450abcac63e0bbe71bca40eeb9" title="Number of bytes of the response written so far.">_bytesWritten</a> = 0;
    <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a" title="Response.">_response</a>.length() == 0) {
      <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::writeResponse: empty response.&quot;</span>);
      <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
  }

  <span class="comment">// Try to write the response</span>
  <span class="keywordflow">if</span> ( ! <a class="code" href="classXmlRpc_1_1XmlRpcSocket.html#a878097ad3bcce2f7046e30322b5ac7ef" title="Write text to the specified socket. Returns false on error.">XmlRpcSocket::nbWrite</a>(this-&gt;<a class="code" href="classXmlRpc_1_1XmlRpcSource.html#a58f7ffbcdbdc10a7102938b5cf8d6146" title="Return the file descriptor being monitored.">getfd</a>(), <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a" title="Response.">_response</a>, &amp;<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a92167e450abcac63e0bbe71bca40eeb9" title="Number of bytes of the response written so far.">_bytesWritten</a>, <a class="code" href="classXmlRpc_1_1XmlRpcSource.html#a3bd3055ba6bb61889368716766ba52c7">_ssl_ssl</a>)) {
    <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">XmlRpcUtil::error</a>(<span class="stringliteral">&quot;XmlRpcServerConnection::writeResponse: write error (%s).&quot;</span>,<a class="code" href="classXmlRpc_1_1XmlRpcSocket.html#ae1926209b963e3e1a95a41fd25dcd43d" title="Returns message corresponding to last error.">XmlRpcSocket::getErrorMsg</a>().c_str());
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
  }
  <a class="code" href="classXmlRpc_1_1XmlRpcUtil.html#ac8423b781acbcbf90e5d4558591e7c61" title="Dump messages somewhere.">XmlRpcUtil::log</a>(3, <span class="stringliteral">&quot;XmlRpcServerConnection::writeResponse: wrote %d of %d bytes.&quot;</span>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a92167e450abcac63e0bbe71bca40eeb9" title="Number of bytes of the response written so far.">_bytesWritten</a>, <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a" title="Response.">_response</a>.length());

  <span class="comment">// Prepare to read the next request</span>
  <span class="keywordflow">if</span> (<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a92167e450abcac63e0bbe71bca40eeb9" title="Number of bytes of the response written so far.">_bytesWritten</a> == <span class="keywordtype">int</span>(<a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a" title="Response.">_response</a>.length())) {
    <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb" title="Request headers.">_header</a> = <span class="stringliteral">&quot;&quot;</span>;
    <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2" title="Request body.">_request</a> = <span class="stringliteral">&quot;&quot;</span>;
    <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a" title="Response.">_response</a> = <span class="stringliteral">&quot;&quot;</span>;
    <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9" title="Current IO state for the connection.">_connectionState</a> = <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09aba39b67cc857d22c568da8b871f4e7e7">READ_HEADER</a>;
  }

  <span class="keywordflow">return</span> <a class="code" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd" title="Whether to keep the current client connection open for further requests.">_keepAlive</a>;    <span class="comment">// Continue monitoring this source if true</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a92167e450abcac63e0bbe71bca40eeb9"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_bytesWritten" ref="a92167e450abcac63e0bbe71bca40eeb9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a92167e450abcac63e0bbe71bca40eeb9">XmlRpc::XmlRpcServerConnection::_bytesWritten</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of bytes of the response written so far. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00081">81</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">writeResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="a24beae84a3885a19c75aaf2f130bdbe9"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_connectionState" ref="a24beae84a3885a19c75aaf2f130bdbe9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a509d96fb697a23f6078fdbd6c3405d09">ServerConnectionState</a> <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a24beae84a3885a19c75aaf2f130bdbe9">XmlRpc::XmlRpcServerConnection::_connectionState</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Current IO state for the connection. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00066">66</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00049">handleEvent()</a>, <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00066">readHeader()</a>, <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00145">readRequest()</a>, <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">writeResponse()</a>, and <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00026">XmlRpcServerConnection()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9f5bdff4af85f5baf80bc24e6ea6078"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_contentLength" ref="ad9f5bdff4af85f5baf80bc24e6ea6078" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad9f5bdff4af85f5baf80bc24e6ea6078">XmlRpc::XmlRpcServerConnection::_contentLength</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of bytes expected in the request body (parsed from header) </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00072">72</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00066">readHeader()</a>, and <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00145">readRequest()</a>.</p>

</div>
</div>
<a class="anchor" id="a040c389e5db426977553eaa238b82acb"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_header" ref="a040c389e5db426977553eaa238b82acb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a040c389e5db426977553eaa238b82acb">XmlRpc::XmlRpcServerConnection::_header</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request headers. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00069">69</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00066">readHeader()</a>, and <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">writeResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="a921ad52de93f71a8c8cdb10b7db486dd"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_keepAlive" ref="a921ad52de93f71a8c8cdb10b7db486dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a921ad52de93f71a8c8cdb10b7db486dd">XmlRpc::XmlRpcServerConnection::_keepAlive</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Whether to keep the current client connection open for further requests. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00084">84</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00066">readHeader()</a>, <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">writeResponse()</a>, and <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00026">XmlRpcServerConnection()</a>.</p>

</div>
</div>
<a class="anchor" id="a31fd216bde1d98f721349f503b1a29f2"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_request" ref="a31fd216bde1d98f721349f503b1a29f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#a31fd216bde1d98f721349f503b1a29f2">XmlRpc::XmlRpcServerConnection::_request</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request body. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00075">75</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00208">executeRequest()</a>, <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00066">readHeader()</a>, <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00145">readRequest()</a>, and <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">writeResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="abe6c19bf5da6fa4365ad9991abbda95a"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_response" ref="abe6c19bf5da6fa4365ad9991abbda95a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#abe6c19bf5da6fa4365ad9991abbda95a">XmlRpc::XmlRpcServerConnection::_response</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Response. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00078">78</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00208">executeRequest()</a>, and <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00177">writeResponse()</a>.</p>

</div>
</div>
<a class="anchor" id="ad55a408b9f92152fb2b0d6da3c80102d"></a><!-- doxytag: member="XmlRpc::XmlRpcServerConnection::_server" ref="ad55a408b9f92152fb2b0d6da3c80102d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classXmlRpc_1_1XmlRpcServer.html">XmlRpcServer</a>* <a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html#ad55a408b9f92152fb2b0d6da3c80102d">XmlRpc::XmlRpcServerConnection::_server</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The <a class="el" href="namespaceXmlRpc.html">XmlRpc</a> server that accepted this connection. </p>

<p>Definition at line <a class="el" href="XmlRpcServerConnection_8h_source.html#l00061">61</a> of file <a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a>.</p>

<p>Referenced by <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00208">executeRequest()</a>, <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00026">XmlRpcServerConnection()</a>, and <a class="el" href="XmlRpcServerConnection_8cc_source.html#l00038">~XmlRpcServerConnection()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="XmlRpcServerConnection_8h_source.html">XmlRpcServerConnection.h</a></li>
<li><a class="el" href="XmlRpcServerConnection_8cc_source.html">XmlRpcServerConnection.cc</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceXmlRpc.html">XmlRpc</a>      </li>
      <li class="navelem"><a class="el" href="classXmlRpc_1_1XmlRpcServerConnection.html">XmlRpcServerConnection</a>      </li>

    <li class="footer">Generated on Thu Mar 6 2014 14:07:06 for OverSim by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
